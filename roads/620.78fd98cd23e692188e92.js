"use strict";(self.webpackChunkhollat_end_user_app=self.webpackChunkhollat_end_user_app||[]).push([[620],{1620:(zl,ce,g)=>{g.r(ce),g.d(ce,{SelfServiceModule:()=>Kl});var B=g(4655),Ee=g(739),e=g(639),O=g(6074),N=g(9641),ee=g(9075),Z=g(9790),Y=g(1750),f=g(8583);function Ne(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",3),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.facebookLink,e.LSH)}}function qe(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",4),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.twitterLink,e.LSH)}}function Me(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",5),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.instagramLink,e.LSH)}}function De(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",6),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.linkedinLink,e.LSH)}}function Je(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",7),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.tiktokLink,e.LSH)}}function Ue(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",8),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.youtubeLink,e.LSH)}}function Qe(n,s){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",9),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.snapchatLink,e.LSH)}}let Ve=(()=>{class n{constructor(t,i){this.themeService=t,this.translateService=i,this.copyRights=""}ngOnInit(){this.copyRights="ar"===this.translateService.currentLang?this.themeService.copyRightsAR:this.themeService.copyRightsEN}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.f),e.Y36(Z.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-footer"]],decls:11,vars:8,consts:[[1,"self-service-footer","d-flex","flex-column","justify-content-center","align-middle","main-themed"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],["src","assets/imgs/facebook.svg","alt","",1,"social-icon"],["src","assets/imgs/006-twitter.svg","alt","",1,"social-icon"],["src","assets/imgs/002-instagram.svg","alt","",1,"social-icon"],["src","assets/imgs/002-linkedin.svg","alt","",1,"social-icon"],["src","assets/imgs/003-tik-tok.svg","alt","",1,"social-icon"],["src","assets/imgs/004-youtube.svg","alt","",1,"social-icon"],["src","assets/imgs/005-snapchat.svg","alt","",1,"social-icon"]],template:function(t,i){1&t&&(e.TgZ(0,"footer",0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e.YNc(4,Ne,2,1,"a",1),e.YNc(5,qe,2,1,"a",1),e.YNc(6,Me,2,1,"a",1),e.YNc(7,De,2,1,"a",1),e.YNc(8,Je,2,1,"a",1),e.YNc(9,Ue,2,1,"a",1),e.YNc(10,Qe,2,1,"a",1),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",i.copyRights," "),e.xp6(2),e.Q6J("ngIf",i.themeService.facebookLink),e.xp6(1),e.Q6J("ngIf",i.themeService.twitterLink),e.xp6(1),e.Q6J("ngIf",i.themeService.instagramLink),e.xp6(1),e.Q6J("ngIf",i.themeService.linkedinLink),e.xp6(1),e.Q6J("ngIf",i.themeService.tiktokLink),e.xp6(1),e.Q6J("ngIf",i.themeService.youtubeLink),e.xp6(1),e.Q6J("ngIf",i.themeService.snapchatLink))},directives:[f.O5],styles:[".self-service-footer[_ngcontent-%COMP%]{padding:16px;align-items:center;color:#fff}.social-icon[_ngcontent-%COMP%]{width:25px;margin:7px}"]}),n})();var r=g(3679);class de{static StringOnlyValidation(s){return s.value?/^[a-zA-Z]+$/gm.test(s.value)?null:{stringOnly:!0}:null}static NumberOnlyValidation(s){return s.value?/\d+$/gm.test(s.value)?null:{numberOnly:!0}:null}static needOtherControlValid(s,t){var i;return(null===(i=s.get(t))||void 0===i?void 0:i.valid)?{[`${t}Required`]:!0}:null}}var q=g(5554),b=g(8002),C=g(7574),w=g(2340),M=g(7373),te=g(9839),L=g(3013),K=g(1808),H=g(8939),_e=g(5257),ue=g(945),A=g(5917),Q=g(3427),$=g(5121),V=g(9140);function Re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().getOtpCode()}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.isLoading),e.xp6(2),e.Oqu(e.lcZ(3,2,"GLOBAL.OTB_Send"))}}function Pe(n,s){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"code_will_expire_after")," ",t.countDown," ",e.lcZ(3,5,"second")," ")}}function Be(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.validate")))}function Ye(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e._UZ(2,"input",12),e.qZA(),e.TgZ(3,"div",13),e.TgZ(4,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().verifyOtp()}),e.YNc(5,Be,3,3,"span",15),e._UZ(6,"hollat-spinner",16),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let i;e.xp6(4),e.Q6J("disabled",!(null!=(i=t.getControl("otp_code"))&&i.value)),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("showSpinner",t.isLoading)}}const He=function(){return{width:"50vw"}};let $e=(()=>{class n{constructor(t,i,o,l){this.otpService=t,this.themeService=i,this.toastMessageService=o,this.ref=l,this.isLoading=!1,this.inputType=q.n,this.showDialog=!1,this.mobile=0,this.form=new r.cw({mobile_number:new r.NI(null),otp_code:new r.NI(null)}),this.timerInterval$=(0,ue.F)(1e3),this.times=60*Number(this.themeService.OTPExpirationTime),this.countDown=null,this.mobileVerified=!1,this.mobileForm=new e.vpe}ngOnChanges(t){var i,o,l;(null===(i=t.mobile)||void 0===i?void 0:i.currentValue)&&(null===(o=this.form.get("mobile_number"))||void 0===o||o.setValue(t.mobile.currentValue)),(null===(l=t.showDialog)||void 0===l?void 0:l.currentValue)?this.getOtpCode():(this.countDown=!1,this.subscribers&&this.subscribers.unsubscribe())}ngOnInit(){var t;null===(t=this.form.get("mobile_number"))||void 0===t||t.setValue(this.mobile)}getOtpCode(){var t;this.isLoading=!0,this.otpService.sendOtp({mobile_number:null===(t=this.form.get("mobile_number"))||void 0===t?void 0:t.value,section:"follow-up"}).pipe((0,b.U)(i=>i.data),(0,H.x)(()=>{this.isLoading=!1})).subscribe(()=>{this.subscribers=this.timerInterval$.pipe((0,_e.q)(this.times)).subscribe(i=>{this.countDown=this.times-i,1===this.countDown&&(this.countDown=null),this.ref.detectChanges()})},i=>{this.isLoading=!1,this.showDialog=!1,this.ref.detectChanges(),this.countDown=null,this.toastMessageService.showErrorMessage("",i.error.message?i.error:i.error.errors[0])})}verifyOtp(){this.isLoading=!0,this.otpService.verifyOtp(this.form.value).pipe((0,b.U)(t=>t),(0,H.x)(()=>{this.isLoading=!1})).subscribe(t=>{var i;this.mobileVerified=!0,localStorage.setItem("auth",t.auth),this.otpService.userInfo.next(t.data),this.showDialog=!1,this.otpService.OTBUserActivated.next(null===(i=this.form.get("mobile_number"))||void 0===i?void 0:i.value),this.toastMessageService.showSuccessMessage("Mobile_Verified")},t=>{var i;return this.isLoading=!1,null===(i=this.form.get("otp_code"))||void 0===i||i.patchValue(""),this.toastMessageService.showErrorMessage("error",t.error.errors[0]),(0,A.of)(t)})}emitForm(){if(this.showDialog=!1,this.mobileVerified){let t=this.form.value;t.mobileVerified=!0,this.mobileForm.emit(t)}else this.mobileForm.emit(null)}getControl(t){return this.form.get(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.j),e.Y36(O.f),e.Y36(Q.D),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-otp-verify"]],inputs:{showDialog:"showDialog",mobile:"mobile"},outputs:{mobileForm:"mobileForm"},features:[e.TTD],decls:11,vars:14,consts:[[3,"header","visible","visibleChange","onHide"],[3,"formGroup"],[1,"col-md-12"],["for","mobile_number"],["readonly","","id","mobile_number","formControlName","mobile_number",1,"form-control"],["type","button","class","btn btn-success main-themed float-start mt-1",3,"disabled","click",4,"ngIf"],["class","row p-2",4,"ngIf"],["class","row d-flex justify-content-center align-items-center","style","clear: both",4,"ngIf"],["type","button",1,"btn","btn-success","main-themed","float-start","mt-1",3,"disabled","click"],[1,"row","p-2"],[1,"row","d-flex","justify-content-center","align-items-center",2,"clear","both"],[1,"col-8"],["placeholder","X X X X","id","otp_code","formControlName","otp_code",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","w-100","btn-success","float-start","main-themed","mt-1",3,"disabled","click"],[4,"ngIf"],[3,"showSpinner"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(l){return i.showDialog=l})("onHide",function(){return i.emitForm()}),e.ALo(1,"translate"),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e.TgZ(4,"label",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.YNc(8,Re,4,4,"button",5),e.YNc(9,Pe,4,7,"div",6),e.YNc(10,Ye,7,3,"div",7),e.qZA(),e.qZA()),2&t&&(e.Akn(e.DdM(13,He)),e.s9C("header",e.lcZ(1,9,"GLOBAL.otp")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(3),e.hij(" ",e.lcZ(6,11,"GLOBAL.PHONE_NUMBER"),""),e.xp6(3),e.Q6J("ngIf",!i.countDown),e.xp6(1),e.Q6J("ngIf",i.countDown&&!i.mobileVerified),e.xp6(1),e.Q6J("ngIf",i.countDown&&!i.mobileVerified))},directives:[$.V,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,f.O5,V.P],pipes:[Z.X$],styles:[""]}),n})();var R=g(5802),pe=g(9870),me=g(1482),z=g(2618),ie=g(1841);let ne=(()=>{class n{constructor(t){this.httpClient=t}getConfiguredFieldsBySlug(t){return this.httpClient.get(`${w.N.baseAPIURL}/api/form-fields-bySlug/${t}`)}getConfiguredFields(){return this.httpClient.get(`${w.N.baseAPIURL}/api/selfService-fields`)}getSystemOptions(t){return this.httpClient.get(`${w.N.baseAPIURL}/api/system-lookup-options/${t}`)}getNewOptions(t){return this.httpClient.get(`${w.N.baseAPIURL}/api/all-new-lookup-options?new_lookup_id=${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ie.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ge=g(103),he=g(7477),D=g(7238),F=g(1818),I=g(6988),j=g(3819),fe=g(9287),oe=g(9309);function je(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.label)}}function Ge(n,s){1&n&&e.GkF(0)}const ve=function(n){return{height:n}},Ke=function(n,s){return{"p-highlight":n,"p-disabled":s}},ze=function(n){return{"p-highlight":n}},Te=function(n){return{"pi pi-check":n}},G=function(n){return{$implicit:n}},Xe=["container"],We=["filterInput"],et=["in"];function tt(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.valuesAsString||"empty")}}function it(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"span",17),e.NdJ("click",function(o){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(3).removeChip(l,o)}),e.qZA()}}function nt(n,s){if(1&n&&(e.TgZ(0,"div",13,14),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.YNc(4,it,1,0,"span",16),e.qZA()),2&n){const t=s.$implicit,i=e.oxw(3);e.xp6(3),e.Oqu(i.findLabelByValue(t)),e.xp6(1),e.Q6J("ngIf",!i.disabled)}}function ot(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.placeholder||t.defaultLabel||"empty")}}function lt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,nt,5,2,"div",12),e.YNc(2,ot,2,1,"ng-container",7),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value||0===t.value.length)}}function st(n,s){if(1&n&&(e.ynx(0),e.YNc(1,tt,2,1,"ng-container",7),e.YNc(2,lt,3,2,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","comma"===t.display),e.xp6(1),e.Q6J("ngIf","chip"===t.display)}}function at(n,s){1&n&&e.GkF(0)}function rt(n,s){1&n&&e.GkF(0)}const ct=function(n){return{"p-checkbox-disabled":n}},dt=function(n,s,t){return{"p-highlight":n,"p-focus":s,"p-disabled":t}};function _t(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",2),e.TgZ(2,"input",31),e.NdJ("focus",function(){return e.CHM(t),e.oxw(3).onHeaderCheckboxFocus()})("blur",function(){return e.CHM(t),e.oxw(3).onHeaderCheckboxBlur()})("keydown.space",function(o){return e.CHM(t),e.oxw(3).toggleAll(o)}),e.qZA(),e.qZA(),e.TgZ(3,"div",32),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).toggleAll(o)}),e._UZ(4,"span",33),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(6,ct,t.disabled||t.toggleAllDisabled)),e.xp6(2),e.Q6J("checked",t.allChecked),e.uIk("disabled",t.disabled||t.toggleAllDisabled),e.xp6(1),e.Q6J("ngClass",e.kEZ(8,dt,t.allChecked,t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),e.uIk("aria-checked",t.allChecked),e.xp6(1),e.Q6J("ngClass",e.VKq(12,Te,t.allChecked))}}function ut(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"input",35,36),e.NdJ("input",function(o){return e.CHM(t),e.oxw(3).onFilterInputChange(o)}),e.qZA(),e._UZ(3,"span",37),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.filterValue||"")("disabled",t.disabled),e.uIk("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel)}}function pt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",24),e.Hsn(1),e.YNc(2,rt,1,0,"ng-container",25),e.YNc(3,_t,5,14,"div",26),e.YNc(4,ut,4,4,"div",27),e.TgZ(5,"button",28),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).close(o)}),e._UZ(6,"span",29),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.headerTemplate),e.xp6(1),e.Q6J("ngIf",t.showToggleAll&&!t.selectionLimit),e.xp6(1),e.Q6J("ngIf",t.filter)}}function mt(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Oqu(i.getOptionGroupLabel(t)||"empty")}}function gt(n,s){1&n&&e.GkF(0)}function ht(n,s){1&n&&e.GkF(0)}function ft(n,s){if(1&n&&(e.TgZ(0,"li",39),e.YNc(1,mt,2,1,"span",7),e.YNc(2,gt,1,0,"ng-container",8),e.qZA(),e.YNc(3,ht,1,0,"ng-container",8)),2&n){const t=s.$implicit;e.oxw(2);const i=e.MAs(7),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.groupTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",o.groupTemplate)("ngTemplateOutletContext",e.VKq(5,G,t)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(7,G,o.getOptionGroupChildren(t)))}}function vt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ft,4,9,"ng-template",38),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.optionsToRender)}}function Tt(n,s){1&n&&e.GkF(0)}function xt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Tt,1,0,"ng-container",8),e.BQk()),2&n){e.oxw();const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,G,i.optionsToRender))}}function bt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-multiSelectItem",43),e.NdJ("onClick",function(o){return e.CHM(t),e.oxw(4).onOptionClick(o)})("onKeydown",function(o){return e.CHM(t),e.oxw(4).onOptionKeydown(o)}),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(4);e.Q6J("option",t)("selected",i.isSelected(t))("label",i.getOptionLabel(t))("disabled",i.isOptionDisabled(t))("template",i.itemTemplate)}}function Ct(n,s){if(1&n&&(e.ynx(0),e.YNc(1,bt,1,5,"ng-template",38),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function kt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"p-multiSelectItem",48),e.NdJ("onClick",function(o){return e.CHM(t),e.oxw(5).onOptionClick(o)})("onKeydown",function(o){return e.CHM(t),e.oxw(5).onOptionKeydown(o)}),e.qZA(),e.BQk()}if(2&n){const t=s.$implicit,i=e.oxw(5);e.xp6(1),e.Q6J("option",t)("selected",i.isSelected(t))("label",i.getOptionLabel(t))("disabled",i.isOptionDisabled(t))("template",i.itemTemplate)("itemSize",i.itemSize)}}function yt(n,s){if(1&n&&(e.TgZ(0,"cdk-virtual-scroll-viewport",45,46),e.YNc(2,kt,2,6,"ng-container",47),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(3,ve,i.scrollHeight))("itemSize",i.itemSize),e.xp6(2),e.Q6J("cdkVirtualForOf",t)}}function Zt(n,s){if(1&n&&e.YNc(0,yt,3,5,"cdk-virtual-scroll-viewport",44),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.virtualScroll&&!t.emptyOptions)}}function At(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyFilterMessageLabel," ")}}function St(n,s){1&n&&e.GkF(0,null,50)}function wt(n,s){if(1&n&&(e.TgZ(0,"li",49),e.YNc(1,At,2,1,"ng-container",40),e.YNc(2,St,2,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.emptyFilterTemplate&&!t.emptyTemplate)("ngIfElse",t.emptyFilter),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyFilterTemplate||t.emptyTemplate)}}function Lt(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyMessageLabel," ")}}function Ft(n,s){1&n&&e.GkF(0,null,51)}function It(n,s){if(1&n&&(e.TgZ(0,"li",49),e.YNc(1,Lt,2,1,"ng-container",40),e.YNc(2,Ft,2,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyTemplate)}}function Ot(n,s){if(1&n&&(e.YNc(0,Ct,2,1,"ng-container",40),e.YNc(1,Zt,1,1,"ng-template",null,41,e.W1O),e.YNc(3,wt,3,3,"li",42),e.YNc(4,It,3,3,"li",42)),2&n){const t=e.MAs(2),i=e.oxw(2);e.Q6J("ngIf",!i.virtualScroll)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.hasFilter()&&i.emptyOptions),e.xp6(1),e.Q6J("ngIf",!i.hasFilter()&&i.emptyOptions)}}function Et(n,s){1&n&&e.GkF(0)}function Nt(n,s){if(1&n&&(e.TgZ(0,"div",52),e.Hsn(1,1),e.YNc(2,Et,1,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}const qt=function(){return["p-multiselect-panel p-component"]},Mt=function(n,s){return{showTransitionParams:n,hideTransitionParams:s}},Dt=function(n){return{value:"visible",params:n}},Jt=function(n){return{"p-multiselect-virtualscroll":n}};function Ut(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("@overlayAnimation.start",function(o){return e.CHM(t),e.oxw().onOverlayAnimationStart(o)})("@overlayAnimation.done",function(o){return e.CHM(t),e.oxw().onOverlayAnimationEnd(o)})("keydown",function(o){return e.CHM(t),e.oxw().onKeydown(o)})("click",function(o){return e.CHM(t),e.oxw().onOverlayClick(o)}),e.YNc(1,pt,7,3,"div",19),e.TgZ(2,"div",20),e.TgZ(3,"ul",21),e.YNc(4,vt,2,1,"ng-container",7),e.YNc(5,xt,2,4,"ng-container",7),e.YNc(6,Ot,5,4,"ng-template",null,22,e.W1O),e.qZA(),e.qZA(),e.YNc(8,Nt,3,1,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.Tol(t.panelStyleClass),e.Q6J("ngClass",e.DdM(12,qt))("@overlayAnimation",e.VKq(16,Dt,e.WLB(13,Mt,t.showTransitionOptions,t.hideTransitionOptions)))("ngStyle",t.panelStyle),e.xp6(1),e.Q6J("ngIf",t.showHeader),e.xp6(1),e.Udp("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),e.xp6(1),e.Q6J("ngClass",e.VKq(18,Jt,t.virtualScroll)),e.xp6(1),e.Q6J("ngIf",t.group),e.xp6(1),e.Q6J("ngIf",!t.group),e.xp6(3),e.Q6J("ngIf",t.footerFacet||t.footerTemplate)}}const Qt=[[["p-header"]],[["p-footer"]]],Vt=function(n,s,t,i){return{"p-multiselect p-component":!0,"p-multiselect-open":n,"p-multiselect-chip":s,"p-focus":t,"p-disabled":i}},Rt=function(n,s){return{"p-placeholder":n,"p-multiselect-label-empty":s}},Pt=function(){return{"p-multiselect-trigger":!0}},Bt=["p-header","p-footer"],Yt={provide:r.JU,useExisting:(0,e.Gpc)(()=>le),multi:!0};let Ht=(()=>{class n{constructor(){this.onClick=new e.vpe,this.onKeydown=new e.vpe}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option})}onOptionKeydown(t){this.onKeydown.emit({originalEvent:t,option:this.option})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(e.TgZ(0,"li",0),e.NdJ("click",function(l){return i.onOptionClick(l)})("keydown",function(l){return i.onOptionKeydown(l)}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.qZA(),e.qZA(),e.YNc(4,je,2,1,"span",4),e.YNc(5,Ge,1,0,"ng-container",5),e.qZA()),2&t&&(e.Q6J("ngStyle",e.VKq(9,ve,i.itemSize+"px"))("ngClass",e.WLB(11,Ke,i.selected,i.disabled)),e.uIk("aria-label",i.label)("tabindex",i.disabled?null:"0"),e.xp6(2),e.Q6J("ngClass",e.VKq(14,ze,i.selected)),e.xp6(1),e.Q6J("ngClass",e.VKq(16,Te,i.selected)),e.xp6(1),e.Q6J("ngIf",!i.template),e.xp6(1),e.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.VKq(18,G,i.option)))},directives:[oe.H,f.PC,f.mk,f.O5,f.tP],encapsulation:2}),n})(),le=(()=>{class n{constructor(t,i,o,l,a,d){this.el=t,this.renderer=i,this.cd=o,this.filterService=l,this.config=a,this.overlayService=d,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.onChange=new e.vpe,this.onFilter=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.onClick=new e.vpe,this.onPanelShow=new e.vpe,this.onPanelHide=new e.vpe,this.scrollHeight="200px",this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(t){this._defaultLabel=t,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(t){this._placeholder=t,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(t){this._options=t,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}ngOnInit(){this.updateLabel()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItems":this.selectedItemsTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;default:this.itemTemplate=t.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(t){return this.optionLabel?I.gb.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?I.gb.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}getOptionGroupLabel(t){return this.optionGroupLabel?I.gb.resolveFieldData(t,this.optionGroupLabel):null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?I.gb.resolveFieldData(t,this.optionGroupChildren):t.items}isOptionDisabled(t){return(this.optionDisabled?I.gb.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled)||this.maxSelectionLimitReached&&!this.isSelected(t)}writeValue(t){this.value=t,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionClick(t){let i=t.option;if(this.isOptionDisabled(i))return;let o=this.getOptionValue(i),l=this.findSelectionIndex(o);-1!=l?(this.value=this.value.filter((a,d)=>d!=l),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],o]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:t.originalEvent,value:this.value,itemValue:o}),this.updateLabel(),this.updateFilledState()}isSelected(t){return-1!=this.findSelectionIndex(this.getOptionValue(t))}findSelectionIndex(t){let i=-1;if(this.value)for(let o=0;o<this.value.length;o++)if(I.gb.equals(this.value[o],t,this.dataKey)){i=o;break}return i}get toggleAllDisabled(){let t=this.optionsToRender;if(!t||0===t.length)return!0;for(let i of t)if(!this.isOptionDisabled(i))return!1;return!0}toggleAll(t){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateFilledState(),this.updateLabel(),t.preventDefault())}checkAll(){let i=[];this.optionsToRender.forEach(o=>{if(this.group){let l=this.getOptionGroupChildren(o);l&&l.forEach(a=>{let d=this.isOptionDisabled(a);(!d||d&&this.isSelected(a))&&i.push(this.getOptionValue(a))})}else{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&i.push(this.getOptionValue(o))}}),this.value=i}uncheckAll(){let i=[];this.optionsToRender.forEach(o=>{this.group?o.items&&o.items.forEach(l=>{this.isOptionDisabled(l)&&this.isSelected(l)&&i.push(this.getOptionValue(l))}):this.isOptionDisabled(o)&&this.isSelected(o)&&i.push(this.getOptionValue(o))}),this.value=i}show(){this.overlayVisible||(this.overlayVisible=!0)}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}onOverlayAnimationStart(t){switch(t.toState){case"visible":this.overlay=t.element,this.appendOverlay(),this.autoZIndex&&I.P9.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(t){switch(t.toState){case"void":I.P9.clear(t.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):F.p.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=F.p.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?F.p.absolutePosition(this.overlay,this.containerViewChild.nativeElement):F.p.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&(this.filterInputChild.nativeElement.value="",this._filterValue=null,this._filteredOptions=null),this.onPanelHide.emit(),this.cd.markForCheck()}close(t){this.hide(),t.preventDefault(),t.stopPropagation()}onMouseclick(t,i){this.disabled||this.readonly||t.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(t),!this.isOverlayClick(t)&&!F.p.hasClass(t.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(i.focus(),this.show())))}removeChip(t,i){this.value=this.value.filter(o=>!I.gb.equals(o,t,this.dataKey)),this.onModelChange(this.value),this.onChange.emit({originalEvent:i,value:this.value}),this.updateLabel(),this.updateFilledState()}isOverlayClick(t){let i=t.target;return!!this.overlay&&(this.overlay.isSameNode(i)||this.overlay.contains(i))}isOutsideClicked(t){return!(this.el.nativeElement.isSameNode(t.target)||this.el.nativeElement.contains(t.target)||this.isOverlayClick(t))}onInputFocus(t){this.focus=!0,this.onFocus.emit({originalEvent:t})}onInputBlur(t){this.focus=!1,this.onBlur.emit({originalEvent:t}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(t){if(!this.readonly)switch(t.originalEvent.which){case 40:var i=this.findNextItem(t.originalEvent.target.parentElement);i&&i.focus(),t.originalEvent.preventDefault();break;case 38:var o=this.findPrevItem(t.originalEvent.target.parentElement);o&&o.focus(),t.originalEvent.preventDefault();break;case 13:this.onOptionClick(t),t.originalEvent.preventDefault()}}findNextItem(t){let i=t.nextElementSibling;return i?F.p.hasClass(i.children[0],"p-disabled")||F.p.isHidden(i.children[0])||F.p.hasClass(i,"p-multiselect-item-group")?this.findNextItem(i):i.children[0]:null}findPrevItem(t){let i=t.previousElementSibling;return i?F.p.hasClass(i.children[0],"p-disabled")||F.p.isHidden(i.children[0])||F.p.hasClass(i,"p-multiselect-item-group")?this.findPrevItem(i):i.children[0]:null}onKeydown(t){switch(t.which){case 40:!this.overlayVisible&&t.altKey&&(this.show(),t.preventDefault());break;case 32:this.overlayVisible||(this.show(),t.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let t="";for(let i=0;i<this.value.length;i++){let o=this.findLabelByValue(this.value[i]);o&&(t.length>0&&(t+=", "),t+=o)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=t;else{let i=/{(.*?)}/;this.valuesAsString=i.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(i)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(t){if(this.group){let i=null;for(let o=0;o<this.options.length;o++){let l=this.getOptionGroupChildren(this.options[o]);if(l&&(i=this.searchLabelByValue(t,l),i))break}return i}return this.searchLabelByValue(t,this.options)}searchLabelByValue(t,i){let o=null;for(let l=0;l<i.length;l++){let a=i[l],d=this.getOptionValue(a);if(null==t&&null==d||I.gb.equals(t,d,this.dataKey)){o=this.getOptionLabel(a);break}}return o}get allChecked(){let t=this.optionsToRender;if(!t||0===t.length)return!1;{let i=0,o=0,l=0,a=this.group?0:this.optionsToRender.length;for(let d of t)if(this.group)for(let u of this.getOptionGroupChildren(d)){let c=this.isOptionDisabled(u),m=this.isSelected(u);if(c)m?i++:o++;else{if(!m)return!1;l++}a++}else{let u=this.isOptionDisabled(d),c=this.isSelected(d);if(u)c?i++:o++;else{if(!c)return!1;l++}}return a===i||a===l||l&&a===l+o+i}}get optionsToRender(){return this._filteredOptions||this.options}get emptyOptions(){let t=this.optionsToRender;return!t||0===t.length}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(L.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(L.ws.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}onFilterInputChange(t){this._filterValue=t.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:t,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let t=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let i=(this.optionLabel||"label").split(","),o=[];for(let l of this.options){let a=this.filterService.filter(this.getOptionGroupChildren(l),i,this.filterValue,this.filterMatchMode,this.filterLocale);a&&a.length&&o.push(Object.assign(Object.assign({},l),{[this.optionGroupChildren]:a}))}this._filteredOptions=o}else this._filteredOptions=this.filterService.filter(this.options,t,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",i=>{this.isOutsideClicked(i)&&this.hide()}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){F.p.isAndroid()||this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new F.V(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&I.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(L.iZ),e.Y36(L.b4),e.Y36(L.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-multiSelect"]],contentQueries:function(t,i,o){if(1&t&&(e.Suo(o,L.$_,5),e.Suo(o,L.h4,5),e.Suo(o,L.jx,4)),2&t){let l;e.iGM(l=e.CRH())&&(i.footerFacet=l.first),e.iGM(l=e.CRH())&&(i.headerFacet=l.first),e.iGM(l=e.CRH())&&(i.templates=l)}},viewQuery:function(t,i){if(1&t&&(e.Gf(Xe,5),e.Gf(We,5),e.Gf(et,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.containerViewChild=o.first),e.iGM(o=e.CRH())&&(i.filterInputChild=o.first),e.iGM(o=e.CRH())&&(i.accessibleViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus||i.overlayVisible)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",virtualScroll:"virtualScroll",itemSize:"itemSize",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",scrollHeight:"scrollHeight",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide"},features:[e._Bn([Yt])],ngContentSelectors:Bt,decls:12,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["itemslist",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-multiselect-empty-message",4,"ngIf"],[3,"option","selected","label","disabled","template","onClick","onKeydown"],[3,"ngStyle","itemSize",4,"ngIf"],[3,"ngStyle","itemSize"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(t,i){if(1&t){const o=e.EpF();e.F$t(Qt),e.TgZ(0,"div",0,1),e.NdJ("click",function(a){e.CHM(o);const d=e.MAs(4);return i.onMouseclick(a,d)}),e.TgZ(2,"div",2),e.TgZ(3,"input",3,4),e.NdJ("focus",function(a){return i.onInputFocus(a)})("blur",function(a){return i.onInputBlur(a)})("keydown",function(a){return i.onKeydown(a)}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.YNc(7,st,3,2,"ng-container",7),e.YNc(8,at,1,0,"ng-container",8),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e._UZ(10,"span",10),e.qZA(),e.YNc(11,Ut,9,20,"div",11),e.qZA()}2&t&&(e.Tol(i.styleClass),e.Q6J("ngClass",e.l5B(21,Vt,i.overlayVisible,"chip"===i.display,i.focus,i.disabled))("ngStyle",i.style),e.xp6(3),e.Q6J("disabled",i.disabled),e.uIk("id",i.inputId)("name",i.name)("tabindex",i.tabindex)("aria-expanded",i.overlayVisible)("aria-labelledby",i.ariaLabelledBy),e.xp6(2),e.Q6J("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),e.xp6(1),e.Q6J("ngClass",e.WLB(26,Rt,i.valuesAsString===(i.defaultLabel||i.placeholder),!(null!=i.valuesAsString&&0!==i.valuesAsString.length||null!=i.placeholder&&0!==i.placeholder.length))),e.xp6(1),e.Q6J("ngIf",!i.selectedItemsTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.selectedItemsTemplate)("ngTemplateOutletContext",e.VKq(29,G,i.value)),e.xp6(1),e.Q6J("ngClass",e.DdM(31,Pt)),e.xp6(1),e.Q6J("ngClass",i.dropdownIcon),e.xp6(1),e.Q6J("ngIf",i.overlayVisible))},directives:[f.mk,f.PC,fe.u,f.O5,f.tP,f.sg,oe.H,Ht,j.N7,j.xd,j.x0],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}"],encapsulation:2,data:{animation:[(0,D.X$)("overlayAnimation",[(0,D.eR)(":enter",[(0,D.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,D.jt)("{{showTransitionParams}}")]),(0,D.eR)(":leave",[(0,D.jt)("{{hideTransitionParams}}",(0,D.oB)({opacity:0}))])])]},changeDetection:0}),n})(),$t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.ez,L.m8,j.Cl,fe.z,oe.T],L.m8,j.Cl]}),n})();function jt(n,s){if(1&n&&(e._UZ(0,"p-dropdown",15),e.ALo(1,"translate")),2&n){const t=e.oxw(2);e.s9C("optionLabel","ar"===t.currentLang?"title_ar":"title_en"),e.Q6J("filter",!0)("options",t.nationalityTypes)("styleClass","w-100")("placeholder",e.lcZ(1,6,"GLOBAL.CHOOSE"))("disabled",!t.nationalityTypes.length)}}function Gt(n,s){1&n&&e._UZ(0,"hollat-loading-skeleton")}function Kt(n,s){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"label",11),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"sup"),e._UZ(5,"i",12),e.qZA(),e.qZA(),e.YNc(6,jt,2,8,"p-dropdown",13),e.YNc(7,Gt,1,0,"ng-template",null,14,e.W1O),e.qZA()),2&n){const t=e.MAs(8),i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"GLOBAL.ID.TYPE")," "),e.xp6(4),e.Q6J("ngIf",i.nationalityTypes.length)("ngIfElse",t)}}function zt(n,s){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"hollat-generic-input",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("required",t.required("national_id"))("label",t.getFieldLable("national_id"))("inputId","national_id")("inputType",t.inputType.TEXT)("control",t.getControl("national_id"))("optionLabel","national_id")}}function Xt(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label",i.getFieldLable(t.field))("inputId",t.field)("inputType",i.inputType.TEXT)("control",i.getControl(t.field))("optionLabel",t.details)}}function Wt(n,s){if(1&n&&e._UZ(0,"phone-input",21),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("parentForm",i.profileForm)("fieldName",null==t?null:t.field)("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("formControl",i.getControl(null==t?null:t.field))}}function ei(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.PASSWORD)("control",i.getControl(t.field))("optionLabel",t.details)}}function ti(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.TEXTAREA)("control",i.getControl(t.field))("optionLabel",t.details)}}function ii(n,s){1&n&&e._UZ(0,"i",12)}const xe=function(){return[]};function ni(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"label"),e._uU(2),e.YNc(3,ii,1,0,"i",22),e.qZA(),e._UZ(4,"p-dropdown",23),e.ALo(5,"translate"),e.ALo(6,"translate"),e.ALo(7,"translate"),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("","ar"===i.currentLang?t.display_name_ar:t.display_name_en," "),e.xp6(1),e.Q6J("ngIf",i.required(t.field)),e.xp6(1),e.s9C("emptyFilterMessage",e.lcZ(5,10,"emptyFilterMessage")),e.s9C("emptyMessage",e.lcZ(6,12,"emptyFilterMessage")),e.s9C("formControlName",t.field),e.s9C("optionLabel","ar"===i.currentLang?"title_ar":"title_en"),e.s9C("placeholder",e.lcZ(7,14,"Choose")),e.Q6J("filter",!0)("options",i.customLookups[t.field]?i.customLookups[t.field]:e.DdM(16,xe))("styleClass","w-100")}}function oi(n,s){1&n&&e._UZ(0,"i",12)}function li(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"label"),e._uU(2),e.YNc(3,oi,1,0,"i",22),e.qZA(),e._UZ(4,"p-multiSelect",23),e.ALo(5,"translate"),e.ALo(6,"translate"),e.ALo(7,"translate"),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();let o;e.xp6(2),e.hij("","ar"===i.currentLang?t.display_name_ar:t.display_name_en," "),e.xp6(1),e.Q6J("ngIf",i.required(t.field)),e.xp6(1),e.s9C("emptyFilterMessage",e.lcZ(5,10,"emptyFilterMessage")),e.s9C("emptyMessage",e.lcZ(6,12,"emptyFilterMessage")),e.s9C("formControlName",t.field),e.s9C("optionLabel","ar"===i.currentLang?"title_ar":"title_en"),e.s9C("placeholder",e.lcZ(7,14,"Choose")),e.Q6J("filter",!0)("options",null!==(o=i.customLookups[t.field])&&void 0!==o?o:e.DdM(16,xe))("styleClass","form-control")}}function si(n,s){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,Xt,2,6,"ng-container",19),e.ynx(2),e.YNc(3,Wt,1,4,"phone-input",20),e.BQk(),e.YNc(4,ei,2,6,"ng-container",19),e.YNc(5,ti,2,6,"ng-container",19),e.YNc(6,ni,8,17,"ng-container",19),e.YNc(7,li,8,17,"ng-container",19),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!t.validation_json||"text"===(null==t.validation_json?null:t.validation_json.type)||"email"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(2),e.Q6J("ngIf","phone"===(null==t||null==t.form_field_type?null:t.form_field_type.html_type)),e.xp6(1),e.Q6J("ngIf","password"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","multipleTextField"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","dropdown"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","multiselect"===(null==t.validation_json?null:t.validation_json.type))}}function ai(n,s){if(1&n&&(e.ynx(0),e.YNc(1,si,8,6,"div",17),e.BQk()),2&n){const t=s.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.showField(null==t?null:t.field)&&"national_id_type_id"!=(null==t?null:t.field))}}function ri(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e.TgZ(1,"div",1),e.TgZ(2,"div",29),e._UZ(3,"img",30),e.qZA(),e.TgZ(4,"div",31),e.TgZ(5,"a",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).reloadCapatcha()}),e._UZ(6,"i",33),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("src",t.capatchaResponse,e.LSH)("alt",t.capatchaResponse)}}function ci(n,s){if(1&n&&(e.TgZ(0,"div",24),e.TgZ(1,"div",1),e.TgZ(2,"div",25),e._UZ(3,"input",26),e.ALo(4,"translate"),e.qZA(),e.YNc(5,ri,7,2,"div",27),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.s9C("placeholder",e.lcZ(4,2,"CAPATCHA_CODE")),e.xp6(2),e.Q6J("ngIf",t.capatchaResponse)}}let di=(()=>{class n{constructor(t,i,o,l,a,d,u,c){this.configuredFieldsService=t,this.translateService=i,this.otpService=o,this.lookupService=l,this.santianzer=a,this.ticketService=d,this.chacheService=u,this.messageService=c,this.clientFields=[],this.profileForm=new r.cw({name:new r.NI,national_id_type_id:new r.NI,national_id:new r.NI,captcha_code:new r.NI("",[r.kI.required]),key:new r.NI("",[r.kI.required])}),this.customLookups={},this.inputType=q.n,this.fieldToBeAdded=[],this.nationalityTypes=[],this.capatchaResponse="",this.finishEditProfile=new e.vpe,o.loggedUser.subscribe(m=>{this.currentUser=m}),this.reloadCapatcha(),this.lookupService.getNationalIDTypes().pipe((0,b.U)(m=>m.data)).subscribe(m=>{this.nationalityTypes=m})}get currentLang(){return this.translateService.currentLang}reloadCapatcha(){this.otpService.createCaptcha().subscribe(t=>{var i,o;this.capatchaResponse=this.santianzer.bypassSecurityTrustResourceUrl(t.img),null===(i=this.profileForm.get("key"))||void 0===i||i.setValue(t.key),null===(o=this.profileForm.get("captcha_code"))||void 0===o||o.reset()})}ngOnInit(){this.configuredFieldsService.getConfiguredFields().pipe((0,b.U)(t=>t.fields.filter(i=>5===i.form_id)),(0,b.U)(t=>{var i;this.clientFields=t,this.clientFields.forEach(o=>{var l,a,d;if(o.validation_json="string"==typeof o.validation_json?JSON.parse(o.validation_json):o.validation_json,this.profileForm.controls[o.field]&&o.show_on_self_service)this.profileForm.get(o.field).setValidators(o.required?r.kI.required:null),this.profileForm.get(o.field).updateValueAndValidity();else{let u=[];o.is_migrated&&(this.profileForm.contains(o.field)||(this.fieldToBeAdded.push(o),this.profileForm.addControl(o.field,new r.NI)),o.validation_json&&(u=this.buildValidations(o.validation_json))),o.required&&o.show_on_self_service&&!!o.is_migrated&&u.push(r.kI.required),o.is_migrated&&(null===(l=this.profileForm.get(o.field))||void 0===l||l.setValidators(u))}("dropdown"===(null===(a=null==o?void 0:o.validation_json)||void 0===a?void 0:a.type)||"multiselect"===(null===(d=null==o?void 0:o.validation_json)||void 0===d?void 0:d.type))&&o.show_on_self_service&&(o.is_system_lookup?this.configuredFieldsService.getSystemOptions(o.system_lookup_id).subscribe(u=>{this.customLookups[o.field]=u.data,this.customLookups[o.field].forEach(c=>(c.disabled=!c.active,c.id=`${c.id}`,c)),this.customLookups[o.field]=[...this.customLookups[o.field]]}):this.configuredFieldsService.getNewOptions(o.new_lookup_id).subscribe(u=>{this.customLookups[o.field]=u,this.customLookups[o.field].forEach(c=>(c.disabled=!c.active,c.id=`${c.id}`,c)),this.customLookups[o.field]=[...this.customLookups[o.field]]}))}),this.profileForm.patchValue(this.currentUser),null===(i=this.profileForm.get("national_id_type_id"))||void 0===i||i.valueChanges.subscribe(o=>{var l,a;const d=z.NF[o];null===(l=this.profileForm.get("national_id"))||void 0===l||l.setValidators(d),null===(a=this.profileForm.get("national_id"))||void 0===a||a.updateValueAndValidity()}),this.clientFields=[...this.clientFields]})).subscribe()}buildValidations(t){const i=[];if(t)switch(t.type){case"email":t.max_length&&i.push(r.kI.maxLength(t.max_length)),t.min_length&&i.push(r.kI.minLength(t.min_length)),i.push(this.EmailValidation);break;case"password":t.max_length&&i.push(r.kI.maxLength(t.max_length)),t.min_length&&i.push(r.kI.minLength(t.min_length)),i.push(this.passwordPattern);break;case"text":case"multipleTextField":t.max_length&&i.push(r.kI.maxLength(t.max_length)),t.min_length&&i.push(r.kI.minLength(t.min_length))}return i}EmailValidation(t){const i=t.value;return!/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(i)&&i?{email:!0}:null}passwordPattern(t){return/(?=(.*[0-9]))(?=.*[\!@#$%^&*()\\[\]{}\-_+=~`|:;"'<>,./?])(?=.*[a-z])(?=(.*[A-Z]))(?=(.*)).{8,}/gm.test(t.value)?null:{notValidPassword:!0}}required(t){var i;return!!this.profileForm.get(t)&&(null===(i=this.profileForm.get(t))||void 0===i?void 0:i.hasValidator(r.kI.required))}showField(t){var i,o,l,a,d,u,c,m,h;const _=this.clientFields.filter(v=>v.field===t)[0];if(console.log(t,_),(null==_?void 0:_.show_on_self_service)&&_.required_if){const v=this.clientFields.find(p=>p.id===_.constrain_field_id);if(v){const p=null===(i=this.profileForm.get(v.field))||void 0===i?void 0:i.value,T=[],x=(k,S)=>{let U=!1;for(let re of k)if(U=S.indexOf(re)>-1,U)break;return U};null===(o=_.constrain_field_option_ids)||void 0===o||o.forEach(k=>T.push(+k));const y=_.constrain_field_option_ids.indexOf(p)>-1||p&&p[0]&&x(T,p)||p&&!p[0]&&x(T,[p]);if(y){const k=this.buildValidations(_.validation_json);_.required_with_constrain&&k.push(r.kI.required),null===(l=this.profileForm.get(_.field))||void 0===l||l.setValidators(k),"color"===_.validation_json.type&&!(null===(a=this.profileForm.get(_.field))||void 0===a?void 0:a.value)&&(null===(d=this.profileForm.get(_.field))||void 0===d||d.setValue("#ffffff")),null===(u=this.profileForm.get(_.field))||void 0===u||u.updateValueAndValidity()}else null===(c=this.profileForm.get(_.field))||void 0===c||c.clearValidators(),null===(m=this.profileForm.get(_.field))||void 0===m||m.setValue(null),null===(h=this.profileForm.get(_.field))||void 0===h||h.updateValueAndValidity();return y}}return null==_?void 0:_.show_on_self_service}cleanObject(t){const i=Object.getOwnPropertyNames(t);for(let o=0;o<i.length;o++){const l=i[o];(""===t[l]||null===t[l]||"null"===t[l]||t[l]==={}||void 0===t[l])&&delete t[l]}return t}getFieldLable(t){const i=this.clientFields.filter(o=>o.field===t)[0];return"ar"===this.currentLang?null==i?void 0:i.display_name_ar:null==i?void 0:i.display_name_en}getControl(t){return this.profileForm.get(t)}updateProfile(){this.profileForm.invalid||this.otpService.updateProfile(this.ticketService.cleanObject(Object.assign({},this.profileForm.value))).subscribe(t=>{this.finishEditProfile.emit(),this.otpService.loggedUser.next(t),this.chacheService.setItem("userData",t),this.profileForm.patchValue(t),this.messageService.add({severity:"success",summary:this.translateService.instant("updated_Successfully")}),this.reloadCapatcha()},t=>{this.reloadCapatcha(),this.messageService.add({severity:"error",summary:this.displayErrors(t.error.errors)})})}displayErrors(t){let i="";return t&&Object.keys(t).forEach(o=>{t[o]instanceof Array&&t[o].forEach(l=>{i=i+" "+l})}),i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne),e.Y36(Z.sK),e.Y36(N.j),e.Y36(te.W),e.Y36(ee.H7),e.Y36(M.d),e.Y36(Y.Q),e.Y36(L.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],outputs:{finishEditProfile:"finishEditProfile"},decls:14,vars:14,consts:[[1,"form-horizontal",3,"formGroup"],[1,"row"],[1,"col-md-6"],[3,"required","label","inputId","inputType","control"],["class","col-md-6",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-6","mt-3"],["class","form-group",4,"ngIf"],[1,"row","mt-5"],[1,"col-xs-12","d-flex","justify-content-end"],[1,"btn","btn-success","margin-r-10","mx-1","main-themed",3,"disabled","click"],["for","nationalIdType"],[1,"fa","fa-asterisk","required"],["formControlName","national_id_type_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder","disabled",4,"ngIf","ngIfElse"],["showSkeleton",""],["formControlName","national_id_type_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder","disabled"],[3,"required","label","inputId","inputType","control","optionLabel"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[4,"ngIf"],[3,"parentForm","fieldName","label","formControl",4,"ngIf"],[3,"parentForm","fieldName","label","formControl"],["class","fa fa-asterisk required",4,"ngIf"],["optionValue","id","optionDisabled","disabled",3,"emptyFilterMessage","emptyMessage","filter","options","styleClass","formControlName","optionLabel","placeholder"],[1,"form-group"],[1,"col-md-4"],["formControlName","captcha_code","type","text","maxlength","6",1,"form-control",3,"placeholder"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[1,"col-md-10"],["id","diab_img",2,"display","block","width","100%","height","50px",3,"src","alt"],[1,"col-md-2"],["data-toggle","tooltip",1,"btn","btn-default","btn-sm",2,"width","100%","margin-right","5px","padding","10px 0","border","0",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"hollat-generic-input",3),e.qZA(),e.YNc(4,Kt,9,5,"div",4),e.YNc(5,zt,2,6,"div",4),e.YNc(6,ai,2,1,"ng-container",5),e.TgZ(7,"div",6),e.YNc(8,ci,6,4,"div",7),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"span",9),e.TgZ(11,"button",10),e.NdJ("click",function(){return i.updateProfile()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",i.profileForm),e.xp6(3),e.Q6J("required",i.required("name"))("label","GLOBAL.NAME")("inputId","ClientName")("inputType",i.inputType.TEXT)("control",i.getControl("name")),e.xp6(1),e.Q6J("ngIf",i.showField("national_id_type_id")),e.xp6(1),e.Q6J("ngIf",i.showField("national_id")),e.xp6(1),e.Q6J("ngForOf",i.fieldToBeAdded),e.xp6(2),e.Q6J("ngIf",i.capatchaResponse),e.xp6(3),e.Q6J("disabled",i.profileForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(13,12,"GLOBAL.SEND")," "))},directives:[r._Y,r.JL,r.sg,R.V,f.O5,f.sg,ge.Lt,r.JJ,r.u,he.J,me.T,r.oH,le,r.Fj,r.nD],pipes:[Z.X$],styles:[""]}),n})();function _i(n,s){if(1&n&&(e.TgZ(0,"ul"),e.TgZ(1,"li",3),e.TgZ(2,"a",37),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("href",t.mainSite,e.LSH),e.xp6(1),e.hij(" ",e.lcZ(4,2,"BackToMainSite")," ")}}function ui(n,s){if(1&n&&(e.TgZ(0,"span",38),e._UZ(1,"img",39),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.getSmallImage,e.LSH)}}function pi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",40),e.TgZ(1,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().openUserData()}),e._UZ(2,"img",42),e.qZA(),e.TgZ(3,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().logout()}),e._UZ(4,"img",43),e.qZA(),e.qZA()}}const be=function(n){return{field:n}};function mi(n,s){1&n&&(e.TgZ(0,"div",44),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,be,e.lcZ(3,4,"GLOBAL.TICKET_NUMBER")))," "))}function gi(n,s){1&n&&(e.TgZ(0,"div",44),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.NUMBER_ONLY",e.VKq(6,be,e.lcZ(3,4,"GLOBAL.TICKET_NUMBER")))," "))}function hi(n,s){if(1&n&&(e.TgZ(0,"div",45),e._UZ(1,"hollat-generic-input",46),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("resetField",t.resetMobileForm)("mobileValue",t.mobileValue)("disabled",t.mobileVerified)("control",t.phoneNoFormControl)("label","GLOBAL.PHONE_NUMBER")("inputId","phoneNo")("inputType",t.inputType.PHONE)("requiredPattern","5XXXXXXXX")}}function fi(n,s){1&n&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User_Profile")))}function vi(n,s){if(1&n&&e._UZ(0,"hollat-generic-input",61),2&n){const t=e.oxw(3);e.Q6J("label","GLOBAL.NAME")("inputId","ClientName")("inputType",t.inputType.TEXT)("control",t.getControl("name"))}}function Ti(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.NAME")))}function xi(n,s){if(1&n&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getControl("name").value)}}function bi(n,s){if(1&n&&(e._UZ(0,"islamic-calendar",63),e.ALo(1,"translate")),2&n){const t=e.oxw(3);e.s9C("label",e.lcZ(1,3,"GLOBAL.BIRTHDATE")),e.Q6J("hijri",!1)("formControl",t.getControl("birthdate"))}}function Ci(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.BIRTHDATE")))}function ki(n,s){if(1&n&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getControl("birthdate").value)}}function yi(n,s){if(1&n&&e._UZ(0,"phone-input",64),2&n){const t=e.oxw(3);e.Q6J("parentForm",t.profileForm)("fieldName","mobile")("label","GLOBAL.PHONE_NUMBER")("disabled",t.mobileVerified)("formControl",t.getControl("mobile"))}}function Zi(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.PHONE_NUMBER")))}function Ai(n,s){if(1&n&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.getControl("mobile").value)}}function Si(n,s){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"hollat-generic-input",65),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label","GLOBAL.COUNTRY")("inputId","countryId")("inputType",t.inputType.SELECT)("control",t.getControl("country_id"))("sourceObs$",t.countries$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!1)}}function wi(n,s){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"hollat-generic-input",65),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label","GLOBAL.REGION")("inputId","regionId")("inputType",t.inputType.SELECT)("control",t.getControl("region_id"))("sourceObs$",t.regions$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!1)}}function Li(n,s){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"hollat-generic-input",65),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("label","GLOBAL.CITY")("inputId","cityId")("inputType",t.inputType.SELECT)("control",t.getControl("city_id"))("sourceObs$",t.cities$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!1)}}function Fi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",70),e.TgZ(1,"div",21),e.TgZ(2,"div",71),e._UZ(3,"img",72),e.qZA(),e.TgZ(4,"div",73),e.TgZ(5,"a",74),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).reloadCapatcha()}),e._UZ(6,"i",75),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(4);e.xp6(3),e.Q6J("src",t.capatchaResponse,e.LSH)("alt",t.capatchaResponse)}}const Ii=function(){return{standalone:!0}};function Oi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",66),e.TgZ(1,"div",21),e.TgZ(2,"div",67),e.TgZ(3,"input",68),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).capatchaCode=o}),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.YNc(5,Fi,7,2,"div",69),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(3),e.s9C("placeholder",e.lcZ(4,4,"CAPATCHA_CODE")),e.Q6J("ngModel",t.capatchaCode)("ngModelOptions",e.DdM(6,Ii)),e.xp6(2),e.Q6J("ngIf",t.capatchaResponse)}}function Ei(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"form",48),e.TgZ(1,"div",21),e.TgZ(2,"div",49),e.YNc(3,vi,1,4,"hollat-generic-input",50),e.YNc(4,Ti,3,3,"div",6),e.YNc(5,xi,2,1,"div",51),e.qZA(),e.TgZ(6,"div",49),e.YNc(7,bi,2,5,"islamic-calendar",52),e.YNc(8,Ci,3,3,"div",6),e.YNc(9,ki,2,1,"div",51),e.qZA(),e.TgZ(10,"div",49),e._UZ(11,"hollat-generic-input",53),e.qZA(),e.TgZ(12,"div",49),e.YNc(13,yi,1,5,"phone-input",54),e.YNc(14,Zi,3,3,"div",6),e.YNc(15,Ai,2,1,"div",51),e.qZA(),e.YNc(16,Si,2,8,"div",55),e.YNc(17,wi,2,8,"div",55),e.YNc(18,Li,2,8,"div",55),e.TgZ(19,"div",56),e.YNc(20,Oi,6,7,"div",57),e.qZA(),e.qZA(),e.TgZ(21,"div",58),e.TgZ(22,"span",59),e.TgZ(23,"button",60),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateProfile()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(2),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(2),e.Q6J("mobileValue",t.profileMobile)("required",!1)("label","GLOBAL.EMAIL")("inputId","email")("inputType",t.inputType.TEXT)("control",t.getControl("email")),e.xp6(2),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(2),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED&&t.capatchaResponse),e.xp6(3),e.Q6J("disabled",!t.capatchaCode&&t.capatchaResponse&&!t.themeService.NAFATH_ENABLED||t.profileForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(25,21,"GLOBAL.SEND")," ")}}function Ni(n,s){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",19),e.YNc(2,Ei,26,23,"form",47),e.ALo(3,"async"),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,t.otpService.loggedUser))}}function qi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",19),e.TgZ(2,"app-profile",76),e.NdJ("finishEditProfile",function(){return e.CHM(t),e.oxw().showProfile=!1}),e.qZA(),e.qZA(),e.qZA()}}function Mi(n,s){}const Di=function(n){return{"background-image":n}},Ji=function(){return["/"]},Ui=function(){return{height:"75vh"}},Qi=function(){return{"70vw":"75vw","80vw":"100vw"}};let Vi=(()=>{class n{constructor(t,i,o,l,a,d,u,c,m,h,_,v){this.translateService=t,this.ticketService=i,this.themeService=o,this.lookupService=l,this.otpService=a,this.activatedRoute=d,this.router=u,this.messageService=c,this.ref=m,this.amplitudeService=h,this.chacheService=_,this.santianzer=v,this.inputType=q.n,this.showLoader=!1,this.resetSearch=!1,this.searchTickets=new e.vpe,this.resetTicketDetails=new e.vpe,this.updateOtpStatus=new e.vpe,this.showDialog=!1,this.OTP_Enabled=!1,this.mobileVerified=!1,this.mobileValue="",this.mainSite="",this.Logo_2030=!1,this.resetMobileForm=!1,this.showProfile=!1,this.profileForm=new r.cw({name:new r.NI,country_id:new r.NI,region_id:new r.NI,city_id:new r.NI,mobile:new r.NI,birthdate:new r.NI,email:new r.NI}),this.profileMobile="",this.configs={},this.capatchaResponse="",this.capatchIdentificationCode="",this.capatchaCode="",this.clientName=w.N.client,this.countries$=new C.y,this.regions$=new C.y,this.cities$=new C.y,this.idTypes$=new C.y,this.nationalIdRequiredPattern="",this.nationalIdFieldType="",this.OTP_Enabled=this.themeService.OTPEnabled,this.themeService.selfServiceConfigs.subscribe(p=>{var T,x,y;this.configs=p,+(null===(y=null===(x=null===(T=this.configs)||void 0===T?void 0:T.LOGIN)||void 0===x?void 0:x.NAFATH_ENABLED)||void 0===y?void 0:y.value)||this.reloadCapatcha()}),a.loggedUser.subscribe(p=>{p&&(this.initLookups(),this.currentUser=p,this.otpService.userInfo.next(p),this.profileForm.patchValue(p),this.mobileValue=p.mobile)}),this.searchForm=new r.cw({ticket_id:new r.NI("",[r.kI.required,de.NumberOnlyValidation]),mobile_number:new r.NI("",this.currentUser?[]:[r.kI.required])})}reloadCapatcha(){+this.themeService.NAFATH_ENABLED||this.otpService.createCaptcha().subscribe(t=>{this.capatchaResponse=this.santianzer.bypassSecurityTrustResourceUrl(t.img),this.capatchIdentificationCode=t.key,this.capatchaCode=""})}ngAfterViewInit(){const{ticket:t,mobile:i}=this.activatedRoute.snapshot.queryParams;t&&i&&(this.mobileValue=i,this.searchForm.patchValue({ticket_id:t,mobile_number:i}),this.searchTickets.emit(this.searchForm.value),setTimeout(()=>{this.searchForm.patchValue({ticket_id:t,mobile_number:i})},1e3))}get ticketNoFormControl(){return this.searchForm.get("ticket_id")}get phoneNoFormControl(){return this.searchForm.get("mobile_number")}get switchToLang(){return"ar"===this.translateService.currentLang?"English":"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}ngOnInit(){var t;this.mainSite=this.themeService.selfService_Main_site,this.Logo_2030=null!==(t=this.themeService.selfService_Small_Image)&&void 0!==t&&t,this.ticketNoFormControl.valueChanges.subscribe(i=>{isNaN(Number(i))||this.ticketNoFormControl.setErrors(null)})}ngOnChanges(t){t.resetSearch&&t.resetSearch.currentValue&&t.resetSearch.currentValue&&(this.searchForm=new r.cw({ticket_id:new r.NI("",[r.kI.required,de.NumberOnlyValidation]),mobile_number:new r.NI("",this.currentUser?[]:[r.kI.required])}),this.resetSearch=!1),t.searchCriteria&&t.searchCriteria.currentValue&&(this.mobileValue=t.searchCriteria.currentValue.mobile_number,this.searchForm.patchValue(t.searchCriteria.currentValue)),this.otpService.OTBUserActivated.subscribe(i=>{var o;i&&(this.mobileVerified=!0,this.mobileValue=i,null===(o=this.searchForm.get("mobile_number"))||void 0===o||o.setValue(i),this.ref.detectChanges())})}changeLang(){const t=this.translateService.currentLang;localStorage.setItem("lang","ar"===t?"en":"ar"),this.translateService.use("ar"===t?"en":"ar")}search(){this.amplitudeService.logEvent("SELF_SERVICE_SEARCH_FOR_TICKET",{ticket_id:this.searchForm.value.ticket_id,mobile_number:this.searchForm.value.mobile_number}),this.OTP_Enabled?this.mobileVerified?this.searchTickets.emit({ticket_id:this.searchForm.value.ticket_id,mobile_number:this.searchForm.value.mobile_number}):this.showDialog=!0:this.searchTickets.emit({ticket_id:this.searchForm.value.ticket_id,mobile_number:this.searchForm.value.mobile_number})}reset(){var t,i,o;this.mobileVerified?null===(o=this.searchForm.get("ticket_id"))||void 0===o||o.setValue(null):(this.mobileValue=null,this.resetMobileForm=!0,this.searchForm.reset(),null===(t=this.searchForm.get("ticket_id"))||void 0===t||t.setErrors({required:!0}),null===(i=this.searchForm.get("ticket_id"))||void 0===i||i.markAsUntouched(),this.searchForm.updateValueAndValidity(),setTimeout(()=>{this.resetMobileForm=!1},1e3)),this.resetTicketDetails.emit(!0)}getData(t){t&&t.mobileVerified?(this.mobileVerified=!0,this.search(),this.updateOtpStatus.emit(t)):this.showDialog=!1}get headerBackgroundImage(){return this.themeService.backGroundImage}get logoImage(){return this.themeService.logoImage}get getSmallImage(){return this.themeService.SMALL_IMAGE||null}logout(){this.otpService.logout().subscribe(t=>{var i;localStorage.removeItem("otp_token"),localStorage.removeItem("userData"),this.otpService.loggedUser.next(null),(null===(i=this.themeService)||void 0===i?void 0:i.NAFATH_ENABLED)?this.router.navigate(["/","iamlogin"]):this.router.navigate(["/","login"]),this.amplitudeService.logEvent("SELF_SERVICE_LOGOUT")})}shiwOtpPopUp(){}openUserData(){const t=this.chacheService.getItem("userData");this.profileForm.patchValue(t),this.showProfile=!0,this.amplitudeService.logEvent("SELF_SERVICE_SHOW_USER_PROFILE")}getControl(t){return this.profileForm.get(t)}get currentLang(){return this.translateService.currentLang}getSelectLabel(t){return`${t}${this.currentLang}`}initLookups(t){var i,o;this.idTypes$=this.lookupService.getNationalIDTypes().pipe((0,b.U)(l=>l.data)),this.countries$=this.lookupService.getCountries().pipe((0,b.U)(l=>l.data)),null===(i=this.profileForm.get("country_id"))||void 0===i||i.valueChanges.subscribe(l=>{var a,d;null===(a=this.profileForm.get("region_id"))||void 0===a||a.reset(),null===(d=this.profileForm.get("city_id"))||void 0===d||d.reset(),this.regions$=this.lookupService.getRegionsByCountryID(l).pipe()}),null===(o=this.profileForm.get("region_id"))||void 0===o||o.valueChanges.subscribe(l=>{var a;null===(a=this.profileForm.get("city_id"))||void 0===a||a.reset(),this.cities$=this.lookupService.getCities(l).pipe()}),this.regions$=this.lookupService.getRegionsByCountryID(),this.cities$=this.lookupService.getCities()}updateProfile(){this.profileForm.invalid||(this.amplitudeService.logEvent("SELF_SERVICE_UPDATE_USER_PROFILE"),this.otpService.updateProfile(this.ticketService.cleanObject(Object.assign(Object.assign({},this.profileForm.value),{captcha_code:this.capatchaCode,key:this.capatchIdentificationCode}))).subscribe(t=>{this.otpService.loggedUser.next(t),this.chacheService.setItem("userData",t),this.showProfile=!1,this.profileForm.patchValue(t),this.messageService.add({severity:"success",summary:this.translateService.instant("updated_Successfully")}),this.reloadCapatcha()},t=>{this.reloadCapatcha(),this.messageService.add({severity:"error",summary:this.displayErrors(t.error.errors)})}))}displayErrors(t){let i="";return t&&Object.keys(t).forEach(o=>{t[o]instanceof Array&&t[o].forEach(l=>{i=i+" "+l})}),i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.sK),e.Y36(M.d),e.Y36(O.f),e.Y36(te.W),e.Y36(N.j),e.Y36(B.gz),e.Y36(B.F0),e.Y36(L.ez),e.Y36(e.sBO),e.Y36(K.Q),e.Y36(Y.Q),e.Y36(ee.H7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-search-box"]],inputs:{showLoader:"showLoader",resetSearch:"resetSearch",searchCriteria:"searchCriteria"},outputs:{searchTickets:"searchTickets",resetTicketDetails:"resetTicketDetails",updateOtpStatus:"updateOtpStatus"},features:[e.TTD],decls:53,vars:53,consts:[[1,"wrapper"],[1,"TopLine"],[1,"container","d-flex","justify-content-between"],[2,"cursor","pointer"],[2,"color","#fff",3,"click"],[1,"fal","fa-globe-americas"],[4,"ngIf"],[1,"header-container",3,"ngStyle"],[1,"container"],[1,"row","center"],[1,"header-link",3,"routerLink"],["alt","logo",1,"logo",3,"src"],["class","hidden-xs margin-l-15 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"search-box-container"],[1,"search-box-wrapper"],[1,"row","card-heading"],[1,"col-lg-3","col-12","add-ticket-btn","main-themed"],[1,"card"],["class","card-action align-self-end",4,"ngIf"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-12"],["for","ticketNo"],[1,"fa","fa-asterisk","required"],["id","ticketNo",3,"placeholder","formControl"],["class","invalid-feedback",4,"ngIf"],["class","col-lg-4 col-12",4,"ngIf"],[1,"col-md-4","col-12","card-actions"],[1,"col-md-5","col-xs-5","btn","btn-success","main-themed",3,"disabled","click"],[1,"col-md-5","col-xs-5","btn","btn-secondary",3,"click"],[3,"mobile","showDialog","mobileForm"],["header","Title",3,"draggable","resizable","responsive","visible","breakpoints","visibleChange"],["pTemplate","header"],[4,"ngIf","ngIfElse"],["normalProfile",""],["pTemplate","footer"],[1,"text-decoration-none",3,"href"],[1,"hidden-xs","margin-l-15","d-flex","justify-content-center","align-items-center"],["alt","logo",3,"src"],[1,"card-action","align-self-end"],[1,"btn","lang-btn","rounded-pill","main-themed",3,"click"],["src","assets/user.svg","alt","","width","25"],["src","assets/logout.svg","alt","","width","25"],[1,"invalid-feedback"],[1,"col-lg-4","col-12"],[3,"resetField","mobileValue","disabled","control","label","inputId","inputType","requiredPattern"],["class","form-horizontal",4,"ngIf"],[1,"form-horizontal"],[1,"col-md-6"],[3,"label","inputId","inputType","control",4,"ngIf"],["class","mb-3",4,"ngIf"],["lang","ar",3,"label","hijri","formControl",4,"ngIf"],[3,"mobileValue","required","label","inputId","inputType","control"],[3,"parentForm","fieldName","label","disabled","formControl",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"col-md-6","mt-3"],["class","form-group",4,"ngIf"],[1,"row","mt-5"],[1,"col-xs-12","d-flex","justify-content-end"],[1,"btn","btn-success","margin-r-10","mx-1","main-themed",3,"disabled","click"],[3,"label","inputId","inputType","control"],[1,"mb-3"],["lang","ar",3,"label","hijri","formControl"],[3,"parentForm","fieldName","label","disabled","formControl"],[3,"label","inputId","inputType","control","sourceObs$","optionLabel","optionValue","required"],[1,"form-group"],[1,"col-md-4"],["type","text","maxlength","6",1,"form-control",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[1,"col-md-10"],["id","diab_img",2,"display","block","width","100%","height","50px",3,"src","alt"],[1,"col-md-2"],["data-toggle","tooltip",1,"btn","btn-default","btn-sm",2,"width","100%","margin-right","5px","padding","10px 0","border","0",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[3,"finishEditProfile"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"ul"),e.TgZ(4,"li",3),e.TgZ(5,"a",4),e.NdJ("click",function(){return i.changeLang()}),e._UZ(6,"i",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,_i,5,4,"ul",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"header",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"a",10),e._UZ(13,"img",11),e.YNc(14,ui,2,1,"span",12),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"div",15),e.TgZ(18,"span",16),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div",17),e.YNc(22,pi,5,0,"div",18),e.ALo(23,"async"),e.TgZ(24,"div",19),e.TgZ(25,"form",20),e.TgZ(26,"div",21),e.TgZ(27,"div",22),e.TgZ(28,"label",23),e._uU(29),e.ALo(30,"translate"),e.TgZ(31,"sup"),e._UZ(32,"i",24),e.qZA(),e.qZA(),e._UZ(33,"input",25),e.ALo(34,"translate"),e.YNc(35,mi,4,8,"div",26),e.YNc(36,gi,4,8,"div",26),e.qZA(),e.YNc(37,hi,2,8,"div",27),e.TgZ(38,"div",28),e.TgZ(39,"button",29),e.NdJ("click",function(){return i.search()}),e.TgZ(40,"span"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.qZA(),e.TgZ(43,"button",30),e.NdJ("click",function(){return i.reset()}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"app-otp-verify",31),e.NdJ("mobileForm",function(l){return i.getData(l)}),e.qZA(),e.TgZ(47,"p-dialog",32),e.NdJ("visibleChange",function(l){return i.showProfile=l}),e.YNc(48,fi,3,3,"ng-template",33),e.YNc(49,Ni,4,3,"div",34),e.YNc(50,qi,3,0,"ng-template",null,35,e.W1O),e.YNc(52,Mi,0,0,"ng-template",36),e.qZA()),2&t){const o=e.MAs(51);e.xp6(7),e.hij(" ",i.switchToLang," "),e.xp6(1),e.Q6J("ngIf",i.mainSite),e.xp6(1),e.Q6J("ngStyle",e.VKq(48,Di,"url("+i.headerBackgroundImage+")")),e.xp6(3),e.Q6J("routerLink",e.DdM(50,Ji)),e.xp6(1),e.Q6J("src",i.logoImage,e.LSH),e.xp6(1),e.Q6J("ngIf",i.getSmallImage),e.xp6(5),e.hij(" ",e.lcZ(20,36,"TICKET_SEARCH.TITLE"),""),e.xp6(3),e.Q6J("ngIf",e.lcZ(23,38,i.otpService.loggedUser)),e.xp6(3),e.Q6J("formGroup",i.searchForm),e.xp6(2),e.ekj("col-lg-4",!i.currentUser)("col-lg-8",i.currentUser),e.xp6(2),e.hij(" ",e.lcZ(30,40,"GLOBAL.TICKET_NUMBER")," "),e.xp6(4),e.Gre("form-control ",i.ticketNoFormControl.touched&&i.ticketNoFormControl.dirty&&i.ticketNoFormControl.errors?"is-invalid":"",""),e.s9C("placeholder",e.lcZ(34,42,"GLOBAL.TICKET_NUMBER")),e.Q6J("formControl",i.ticketNoFormControl),e.xp6(2),e.Q6J("ngIf",i.ticketNoFormControl.touched&&i.ticketNoFormControl.dirty&&(null==i.ticketNoFormControl.errors?null:i.ticketNoFormControl.errors.required)),e.xp6(1),e.Q6J("ngIf",i.ticketNoFormControl.touched&&i.ticketNoFormControl.dirty&&(null==i.ticketNoFormControl.errors?null:i.ticketNoFormControl.errors.numberOnly)),e.xp6(1),e.Q6J("ngIf",!i.currentUser),e.xp6(2),e.Q6J("disabled",!i.searchForm.valid),e.xp6(2),e.Oqu(e.lcZ(42,44,"GLOBAL.Follow_Ticket")),e.xp6(3),e.Oqu(e.lcZ(45,46,"GLOBAL.RESET")),e.xp6(2),e.Q6J("mobile",i.phoneNoFormControl.value)("showDialog",i.showDialog),e.xp6(1),e.Akn(e.DdM(51,Ui)),e.Q6J("draggable",!1)("resizable",!1)("responsive",!0)("visible",i.showProfile)("breakpoints",e.DdM(52,Qi)),e.xp6(2),e.Q6J("ngIf","sama"===i.clientName)("ngIfElse",o)}},directives:[f.O5,f.PC,B.yS,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.oH,$e,$.V,L.jx,R.V,r.F,pe.Z,me.T,r.nD,r.On,di],pipes:[Z.X$,f.Ov],styles:[".search-box-container[_ngcontent-%COMP%]{position:relative}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]{z-index:2;width:100%}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card-heading[_ngcontent-%COMP%]{position:relative;top:1.5rem;margin:unset}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:.25rem}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .add-ticket-btn[_ngcontent-%COMP%]{padding:.5rem .5rem 2rem;border-radius:20px;position:relative}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:30px;background-color:transparent;width:100%;border:unset;box-shadow:unset}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-action[_ngcontent-%COMP%]{position:absolute;top:-2.5rem;color:#fff;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-action.lang-btn[_ngcontent-%COMP%]{background-color:#c2a327}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 .25rem}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:20px;background:#ffffff;border:1px solid #DBDADA;box-shadow:0 3px 6px #0003}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:row;justify-content:space-around;align-items:center}@media (max-width: 768px){.card-action[_ngcontent-%COMP%]{border:2px solid;background-color:unset}.card-action.lang-btn[_ngcontent-%COMP%]{border-color:#fff!important;background-color:unset!important}}.header-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:flex-start;margin-bottom:30px;background-size:cover;padding:30px;background-position:center;max-height:400px;min-height:200px;border-radius:0 0 25px 25px;margin-top:40px}.header-container[_ngcontent-%COMP%]   .header-link[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.logo[_ngcontent-%COMP%]{max-width:400px}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{max-width:100px}}"],changeDetection:0}),n})();var J=g(3342),Ce=g(5304);let ke=(()=>{class n{constructor(t,i){this.httpClient=t,this.localStorage=i}deleteFile(t){return this.httpClient.delete(`${w.N.baseAPIURL}/api/tickets/delete_file/${t}`)}downloadFromServer(t){const i=document.createElement("a"),o=`${w.N.baseAPIURL}/api/self_service/downloadFile`;i.setAttribute("target","_blank"),fetch(o,{method:"post",body:JSON.stringify({path:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.localStorage.getItem("otp_token")}}).then(l=>l.blob()).then(l=>{i.href=window.URL.createObjectURL(l),i.download=t,i.click()})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ie.eN),e.LFG(Y.Q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var X=g(5396),ye=g(5498),Ri=g(6543),Pi=g(8015);const Bi=function(){return{color:"#FF912C"}},Yi=function(n){return{"fit-container":n}};let Ze=(()=>{class n{constructor(){this.starNo=5,this.value=0,this.readonly=!1,this.disabled=!1,this.showCancel=!1,this.fitContainer=!1,this.ratingSelected=new e.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["hollat-star-rating"]],inputs:{starNo:"starNo",value:"value",readonly:"readonly",disabled:"disabled",showCancel:"showCancel",fitContainer:"fitContainer"},outputs:{ratingSelected:"ratingSelected"},decls:1,vars:9,consts:[[3,"iconOnStyle","ngClass","stars","ngModel","readonly","cancel","onRate"]],template:function(t,i){1&t&&(e.TgZ(0,"p-rating",0),e.NdJ("onRate",function(l){return i.ratingSelected.emit(l.value)}),e.qZA()),2&t&&e.Q6J("iconOnStyle",e.DdM(6,Bi))("ngClass",e.VKq(7,Yi,i.fitContainer))("stars",i.starNo)("ngModel",i.value)("readonly",i.readonly)("cancel",i.showCancel)},directives:[Pi.iG,f.mk,r.JJ,r.On],styles:["[_nghost-%COMP%]     .p-rating .p-rating-icon{margin-left:unset!important}[_nghost-%COMP%]     .p-rating.p-readonly .p-rating-icon{cursor:default}[_nghost-%COMP%]     p-rating.fit-container .p-rating{display:flex;flex-direction:row;justify-content:space-between}"]}),n})();function Hi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-radioButton",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2).$implicit;return e.oxw(4).checkValue(o,l)})("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2).$implicit;return e.oxw(4).evaluationResult[l.id].value=o}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2).$implicit,o=e.oxw(2).index,l=e.oxw(2);e.MGl("name","section",o,""),e.s9C("label",e.lcZ(1,4,"yes"===t.option?"GLOBAL.YES":"GLOBAL.NO")),e.Q6J("value",t.id)("ngModel",l.evaluationResult[i.id].value)}}function $i(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"textarea",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw(2).$implicit;return e.oxw(4).evaluationResult[l.id].details=o}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.MGl("name","details_",t.id,""),e.s9C("placeholder",e.lcZ(1,3,"GLOBAL.DETAILS")),e.Q6J("ngModel",i.evaluationResult[t.id].details)}}function ji(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"div",10),e.YNc(4,Hi,2,6,"p-radioButton",11),e.YNc(5,$i,2,5,"textarea",12),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(2),e.Oqu(t[i.getLabeledData("title_")]),e.xp6(2),e.Q6J("ngForOf",t.closed_endeds),e.xp6(1),e.Q6J("ngIf",i.showDetailsArea)}}function Gi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"div",16),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",17),e.TgZ(6,"hollat-star-rating",18),e.NdJ("ratingSelected",function(o){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).mapValue(o,l,l.closed_endeds)}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(4),e.Oqu(t[i.getLabeledData("title_")]),e.xp6(2),e.Q6J("fitContainer",!0)("value",i.getRatingValue(t))}}const Ki=function(){return{standalone:!0}};function zi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"div",19),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",20),e.TgZ(6,"textarea",21),e.NdJ("keyup",function(o){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(4).setValue(o,l)}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(4),e.Oqu(t[i.getLabeledData("title_")]),e.xp6(2),e.Q6J("ngModelOptions",e.DdM(3,Ki))("ngModel",null==i.evaluationResult[t.id]?null:i.evaluationResult[t.id].details)}}function Xi(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ji,6,3,"ng-container",1),e.YNc(2,Gi,7,3,"ng-container",1),e.YNc(3,zi,7,4,"ng-container",1),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf","mcq"===t.type),e.xp6(1),e.Q6J("ngIf","rate"===t.type),e.xp6(1),e.Q6J("ngIf","open_ended"===t.type)}}function Wi(n,s){if(1&n&&(e.TgZ(0,"p-accordionTab",9),e.YNc(1,Xi,4,3,"ng-container",3),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,o=t.index,l=e.oxw(2);e.s9C("header",i[l.getLabeledData("title_")]),e.Q6J("selected",0===o),e.xp6(1),e.Q6J("ngForOf",i.questions)}}function en(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Wi,2,3,"p-accordionTab",8),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.questions.length)}}function tn(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}function nn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"form"),e.TgZ(1,"p-accordion",2),e.YNc(2,en,2,1,"ng-container",3),e.qZA(),e.TgZ(3,"div",4),e.TgZ(4,"button",5),e.NdJ("click",function(){const l=e.CHM(t).ngIf;return e.oxw().submitRating(l)}),e.YNc(5,tn,3,3,"span",1),e._UZ(6,"hollat-spinner",6),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().reset()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.ngIf,i=e.oxw();e.xp6(1),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(2),e.Q6J("disabled",!i.checkRatingForm()),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("showSpinner",i.isLoading),e.xp6(2),e.Oqu(e.lcZ(9,6,"GLOBAL.RESET"))}}const on=function(){return{width:"75vw"}};let ln=(()=>{class n{constructor(t,i,o){this.ticketService=t,this.translateService=i,this.toastService=o,this.ticketId=0,this.showDialog=!1,this.ratingSubmitted=new e.vpe,this.rateForm=new r.cw({}),this.rating=0,this.evaluations$=new C.y,this.evaluationResult={},this.showDetailsArea=!1,this.isLoading=!1}ngOnInit(){this.evaluations$=this.ticketService.getRatingQuestions().pipe((0,b.U)(t=>t.data),(0,J.b)(t=>this.buildRatingForm(t)))}buildRatingForm(t){t.forEach(i=>{i.questions.forEach(o=>{this.evaluationResult[o.id]={value:0,details:""}})})}submitRating(t){this.isLoading=!0;let i=[];for(const l in this.evaluationResult)if(this.evaluationResult[l].value){const a={ticket_id:this.ticketId,question_id:l,closed_ended_id:this.evaluationResult[l].value,details:this.evaluationResult[l].details};""!==this.evaluationResult[l].details&&(a.details=this.evaluationResult[l].details),i.push(a)}else i.push({ticket_id:this.ticketId,question_id:l,closed_ended_id:null,details:this.evaluationResult[l].details});this.ticketService.submitRating({ticket_id:this.ticketId,questions:i}).subscribe(l=>{this.isLoading=!1,this.showDialog=!1,this.ratingSubmitted.emit(!0),this.toastService.showSuccessMessage("TOAST.SUCCESS.RATING.MESSAGE")},l=>{this.isLoading=!1,this.toastService.showErrorMessage("TOAST.ERROR.RATING.MESSAGE",l.error.errors)})}getLabeledData(t){return`${t}${this.translateService.currentLang}`}mapValue(t,i,o){this.evaluationResult[i.id].value=o.filter(l=>l.option===t.toString())[0].id}getRatingValue(t){const i=t.closed_endeds.filter(o=>o.id===this.evaluationResult[t.id].value)[0];return i?parseInt(i.option):0}checkValue(t,i){"mcq"===i.type&&(t===i.closed_endeds.find(o=>"no"===o.option).id?(this.showDetailsArea=!0,this.evaluationResult[i.id].details=""):this.evaluationResult[i.id].details="\u062a\u0645\u062a")}checkRatingForm(){if(this.showDetailsArea)return this.rateForm.valid;for(const t in this.evaluationResult)if(!this.evaluationResult[t].value&&!this.evaluationResult[t].details)return!1;return!0}reset(){for(let t in this.evaluationResult)this.evaluationResult[t]={value:0,details:""}}setValue(t,i){this.evaluationResult[i.id].details=t.target.value}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.d),e.Y36(Z.sK),e.Y36(Q.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hollat-rating-dialog"]],inputs:{ticketId:"ticketId",showDialog:"showDialog"},outputs:{ratingSubmitted:"ratingSubmitted"},decls:4,vars:10,consts:[[3,"header","visible","visibleChange","onHide"],[4,"ngIf"],[3,"multiple"],[4,"ngFor","ngForOf"],[1,"actions","d-flex","justify-content-end"],[1,"btn","btn-success","main-themed",3,"disabled","click"],[3,"showSpinner"],[1,"btn","btn-secondary",3,"click"],[3,"selected","header",4,"ngIf"],[3,"selected","header"],[1,"d-flex","flex-row"],[3,"name","value","ngModel","label","ngModelChange",4,"ngFor","ngForOf"],["style","width: 100%;","pInputTextarea","",3,"name","placeholder","ngModel","ngModelChange",4,"ngIf"],[3,"name","value","ngModel","label","ngModelChange"],["pInputTextarea","",2,"width","100%",3,"name","placeholder","ngModel","ngModelChange"],[1,"row","question-row"],[1,"col-md-9","col-12"],[1,"col-md-3","col-12"],[3,"fitContainer","value","ratingSelected"],[1,"col-md-12","col-12"],[1,"col-md-12"],[2,"width","100%","height","138px",3,"ngModelOptions","ngModel","keyup"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(l){return i.showDialog=l})("onHide",function(){return i.ratingSubmitted.emit(!1)}),e.ALo(1,"translate"),e.YNc(2,nn,10,8,"form",1),e.ALo(3,"async"),e.qZA()),2&t&&(e.Akn(e.DdM(9,on)),e.s9C("header",e.lcZ(1,5,"GLOBAL.RATING")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,7,i.evaluations$)))},directives:[$.V,f.O5,r._Y,r.JL,r.F,X.UQ,f.sg,V.P,X.US,ye.EU,r.JJ,r.On,r.Fj,Ri.g,Ze],pipes:[Z.X$,f.Ov],styles:[".actions[_ngcontent-%COMP%]{margin-top:.5rem}.actions[_ngcontent-%COMP%]   button.btn-success[_ngcontent-%COMP%]{margin-inline-end:5px}.question-row[_ngcontent-%COMP%]{border-bottom:1px solid #f4f4f4;border-width:80%;padding:0 0 1rem;margin:1rem 0}  .p-radiobutton-label{margin:0 7px}"]}),n})();var se=g(1727);const sn=["attachments"];function an(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"input",10,11),e.NdJ("change",function(o){return e.CHM(t),e.oxw(2).onFileSelect(o)}),e.qZA()}}const rn=function(n){return{disabled:n}};function cn(n,s){if(1&n&&(e.TgZ(0,"label",12),e.O4$(),e.TgZ(1,"svg",13),e._UZ(2,"path",14),e.qZA(),e.kcU(),e.TgZ(3,"span",15),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,rn,t.countError||t.maxReached)),e.xp6(4),e.Oqu(e.lcZ(5,2,"GLOBAL.ATTACHMENTS_PLACEHOLDER"))}}function dn(n,s){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.countError)}}function _n(n,s){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.invalidError)}}function un(n,s){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.sizeError)}}function pn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"i",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),l=o.index,a=o.$implicit;return e.oxw(3).removeAttachment(l,a)}),e.O4$(),e.TgZ(1,"svg",22),e._UZ(2,"path",23),e.qZA(),e.qZA()}}const mn=function(n){return{"cursor-pointer":n}};function gn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"span",19),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw(3);return a.allowDownload?a.download(l):""}),e._uU(2),e.qZA(),e.YNc(3,pn,3,0,"i",20),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,mn,i.allowDownload)),e.xp6(1),e.Oqu(i.getFileName(t)),e.xp6(1),e.Q6J("ngIf",!i.viewOnly)}}function hn(n,s){if(1&n&&(e.TgZ(0,"div",16),e.YNc(1,gn,4,5,"div",17),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.attachmentsList)}}function fn(n,s){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.YNc(2,an,2,0,"input",4),e.YNc(3,cn,6,6,"label",5),e.TgZ(4,"div"),e.TgZ(5,"span",6),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,dn,2,1,"div",8),e.YNc(10,_n,2,1,"div",8),e.YNc(11,un,2,1,"div",8),e.qZA(),e.YNc(12,hn,2,1,"div",9),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.viewOnly&&!t.countError&&!t.maxReached),e.xp6(1),e.Q6J("ngIf",!t.viewOnly),e.xp6(3),e.hij(" ",e.lcZ(7,7,"GLOBAL.ATTACHMENTS_HINT")," "),e.xp6(3),e.Q6J("ngIf",t.countError),e.xp6(1),e.Q6J("ngIf",t.invalidError),e.xp6(1),e.Q6J("ngIf",t.sizeError),e.xp6(1),e.Q6J("ngIf",t.attachmentsList&&t.attachmentsList.length)}}let ae=(()=>{class n{constructor(t,i){this.fileUploadService=t,this.themeService=i,this.resetFiles=!1,this.savedFiles=[],this.viewOnly=!1,this.deleteFromServer=!1,this.allowDownload=!1,this.onAttachmentsChange=new e.vpe,this.sizeError="",this.countError="",this.invalidError="",this.formData=new FormData,this.tempFiles=[],this.attachmentsList=[],this.maxReached=!1}ngOnInit(){}ngOnChanges(t){t&&t.resetFiles&&!0===t.resetFiles.currentValue&&this.reset(),t&&t.savedFiles&&t.savedFiles.currentValue&&(this.attachmentsList=[...t.savedFiles.currentValue])}onFileSelect(t){this.tempFiles=t.target.files;for(let i=0;this.tempFiles&&i<this.tempFiles.length;i++){let o=this.tempFiles[i];if(o.size>1024*w.N.maxAllowedSizeIn_MB*1024)return void(this.sizeError=`\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u062a\u0639\u062f\u064a ${w.N.maxAllowedSizeIn_MB} \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a`);if(this.sizeError="",!this.isValidFile(o.name))return void(this.invalidError=`\u0635\u064a\u0641\u0629 \u0627\u0644\u0645\u0644\u0641 \u064a\u062c\u0628 \u0627\u0646 \u062a\u0643\u0648\u0646 ${w.N.allowedExtensions.join(" , ")}`);if(this.invalidError="",5===this.attachmentsList.length)return this.countError="\u0627\u0642\u0635\u0649 \u0639\u062f\u062f \u0645\u0644\u0641\u0627\u062a \u0647\u0648 5",void(this.maxReached=!0);this.maxReached=!1,this.countError="",o.size<=1024*w.N.maxAllowedSizeIn_MB*1024&&this.isValidFile(o.name)&&this.attachmentsList.length<5&&(this.attachmentsList.push(this.tempFiles[i]),this.onAttachmentsChange.emit(this.attachmentsList),5===this.attachmentsList.length&&(this.maxReached=!0))}}isValidFile(t){var i,o;const l=w.N.allowedExtensions,a=null===(o=null===(i=this.attachments)||void 0===i?void 0:i.nativeElement)||void 0===o?void 0:o.value.split("."),d=a[a.length-1].toLowerCase();return-1!==l.lastIndexOf(d)}removeAttachment(t,i){this.countError="",this.maxReached=!1,this.tempFiles=[];for(let o=0;o<this.attachmentsList.length;o++)o!==t&&this.tempFiles.push(this.attachmentsList[o]);this.attachmentsList=[...this.tempFiles],this.tempFiles=[],this.attachments&&!this.attachmentsList.length&&(this.attachments.nativeElement.value=""),this.onAttachmentsChange.emit(this.attachmentsList),this.deleteFromServer&&this.fileUploadService.deleteFile(i.id).subscribe(o=>{})}getFileName(t){return t.name?t.name:t.file_name?(t.displayName=t.file_name.split("/"),t.displayName=t.displayName[t.displayName.length-1],t.displayName||"file"):"file"}download(t){this.fileUploadService.downloadFromServer(t.file_name)}reset(){this.attachmentsList=[],this.invalidError="",this.attachments&&(this.attachments.nativeElement.value="")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ke),e.Y36(O.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-multipe-file-upload"]],viewQuery:function(t,i){if(1&t&&e.Gf(sn,5,e.SBq),2&t){let o;e.iGM(o=e.CRH())&&(i.attachments=o.first)}},inputs:{resetFiles:"resetFiles",savedFiles:"savedFiles",viewOnly:"viewOnly",deleteFromServer:"deleteFromServer",allowDownload:"allowDownload"},outputs:{onAttachmentsChange:"onAttachmentsChange"},features:[e.TTD],decls:2,vars:1,consts:[["class","multiple-file-upload-wrapper",4,"ngIf"],["id","download",2,"display","none"],[1,"multiple-file-upload-wrapper"],[1,"file-input-wrapper"],["accept","image/x-png,image/jpeg,application/pdf","id","attachments","max","5","multiple","","name","attachments","type","file",3,"change",4,"ngIf"],["class","file-representation","for","attachments",3,"ngClass",4,"ngIf"],[1,"hint"],[1,"errors"],[4,"ngIf"],["class","attachments-list",4,"ngIf"],["accept","image/x-png,image/jpeg,application/pdf","id","attachments","max","5","multiple","","name","attachments","type","file",3,"change"],["attachments",""],["for","attachments",1,"file-representation",3,"ngClass"],["fill","#9c9c9c","viewBox","0 0 640 512","width","20","xmlns","http://www.w3.org/2000/svg"],["d","M144 480C64.47 480 0 415.5 0 336C0 273.2 40.17 219.8 96.2 200.1C96.07 197.4 96 194.7 96 192C96 103.6 167.6 32 256 32C315.3 32 367 64.25 394.7 112.2C409.9 101.1 428.3 96 448 96C501 96 544 138.1 544 192C544 204.2 541.7 215.8 537.6 226.6C596 238.4 640 290.1 640 352C640 422.7 582.7 480 512 480H144zM223 263C213.7 272.4 213.7 287.6 223 296.1C232.4 306.3 247.6 306.3 256.1 296.1L296 257.9V392C296 405.3 306.7 416 320 416C333.3 416 344 405.3 344 392V257.9L383 296.1C392.4 306.3 407.6 306.3 416.1 296.1C426.3 287.6 426.3 272.4 416.1 263L336.1 183C327.6 173.7 312.4 173.7 303 183L223 263z"],[1,"font-weight-bold"],[1,"attachments-list"],["class","attachment-name",4,"ngFor","ngForOf"],[1,"attachment-name"],[1,"text",3,"ngClass","click"],[3,"click",4,"ngIf"],[3,"click"],["fill","#9c9c9c","viewBox","0 0 512 512","width","15","xmlns","http://www.w3.org/2000/svg"],["d","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"]],template:function(t,i){1&t&&(e.YNc(0,fn,13,9,"div",0),e._UZ(1,"a",1)),2&t&&e.Q6J("ngIf",null==i.themeService?null:i.themeService.uploadFilesEnabled)},directives:[f.O5,f.mk,f.sg],pipes:[Z.X$],styles:[".file-input-wrapper[_ngcontent-%COMP%]{overflow:hidden}.attachment-value[_ngcontent-%COMP%]{padding:15px;border-radius:30px;max-width:380px}.file-representation[_ngcontent-%COMP%]{width:99%;height:100%;background-color:#fff;color:#9c9c9c;border-radius:6px;border:1px solid #d2d6de;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:120px;font-size:17px;margin-top:10px;margin-bottom:10px}.file-representation.disabled[_ngcontent-%COMP%]{cursor:not-allowed}input[type=file][_ngcontent-%COMP%]{position:absolute;width:0;height:0;opacity:0}.errors[_ngcontent-%COMP%]{color:red;font-size:14px}.errors[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:5px 0}.attachments-list[_ngcontent-%COMP%]{margin-bottom:20px}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]{border-radius:20px;background-color:#fff;border:1px solid #9c9c9c;color:#9c9c9c;margin-bottom:8px;display:flex;align-items:center;cursor:pointer;justify-content:space-between;font-size:16px;padding-inline-end:8px}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:8px 10px;transition:all .3s;cursor:default;line-break:anywhere}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   .text.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{z-index:9;cursor:pointer;transition:all .3s}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#1e7b37!important}.hint[_ngcontent-%COMP%]{color:#aaa;font-size:10px;position:relative;top:-10px}"]}),n})();function vn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"label",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-multipe-file-upload",12),e.NdJ("onAttachmentsChange",function(o){return e.CHM(t),e.oxw(2).onAttachmentsChange(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"GLOBAL.ATTACHMENTS")," "),e.xp6(2),e.Q6J("resetFiles",t.resetFiles)}}function Tn(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.REPLY")))}function xn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"form",2),e.TgZ(1,"div",3),e._UZ(2,"hollat-generic-input",4),e.qZA(),e.YNc(3,vn,5,4,"div",5),e.TgZ(4,"div",6),e.TgZ(5,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitReply()}),e.YNc(6,Tn,3,3,"span",8),e._UZ(7,"hollat-spinner",9),e.qZA(),e.TgZ(8,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().clearForm(!1)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.replyForm),e.xp6(2),e.Q6J("label","GLOBAL.MESSAGE")("inputId","message")("inputType",t.inputType.TEXTAREA)("control",t.getControl("details")),e.xp6(1),e.Q6J("ngIf",null==t.themeService?null:t.themeService.uploadFilesEnabled),e.xp6(2),e.Q6J("disabled",!t.replyForm.valid||t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("showSpinner",t.isLoading),e.xp6(2),e.Oqu(e.lcZ(10,10,"GLOBAL.RESET"))}}const bn=function(){return{width:"50vw"}};let Cn=(()=>{class n{constructor(t,i,o,l,a){this.ticketService=t,this.toastService=i,this.defaultsService=o,this.themeService=l,this.ref=a,this.showDialog=!1,this.resetFiles=!1,this.ticketId=0,this.replySubmitted=new e.vpe,this.inputType=q.n,this.replyForm=new r.cw({details:new r.NI("",[r.kI.required,r.kI.minLength(this.defaultsService.detailsMinLength),r.kI.maxLength(this.defaultsService.defaultMaxLength)]),files:new r.NI([]),ticket_id:new r.NI("")}),this.isLoading=!1}ngOnChanges(t){var i;t.ticketId&&t.ticketId.currentValue&&(null===(i=this.replyForm.get("ticket_id"))||void 0===i||i.patchValue(t.ticketId.currentValue))}getControl(t){return this.replyForm.get(t)}onAttachmentsChange(t){var i;null===(i=this.replyForm.get("files"))||void 0===i||i.patchValue([...t])}submitReply(){const t=Object.assign({},this.replyForm.value),i=new FormData;Object.keys(t).forEach(o=>{"files"===o?t.files&&t.files.forEach(l=>{i.append("files[]",l)}):i.append(o,t[o])}),this.ticketService.submitReply(i).subscribe(o=>{this.isLoading=!1,this.showDialog=!1,this.replySubmitted.emit(!0),this.toastService.showSuccessMessage("TOAST.SUCCESS.REPLY.MESSAGE")},o=>{var l;this.isLoading=!1,this.toastService.showErrorMessage("TOAST.ERROR.REPLY.MESSAGE",null===(l=null==o?void 0:o.error)||void 0===l?void 0:l.errors)})}clearForm(t){t&&this.replySubmitted.emit(!1),this.replyForm.reset({ticket_id:this.ticketId}),this.replyForm.markAsUntouched(),Object.keys(this.replyForm.controls).forEach(i=>{var o,l;null===(o=this.replyForm.get(i))||void 0===o||o.markAsUntouched(),null===(l=this.replyForm.get(i))||void 0===l||l.updateValueAndValidity()}),this.resetFiles=!0,setTimeout(()=>{this.resetFiles=!1,this.ref.detectChanges()},0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.d),e.Y36(Q.D),e.Y36(se.p),e.Y36(O.f),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hollat-reply-dialog"]],inputs:{showDialog:"showDialog",ticketId:"ticketId"},outputs:{replySubmitted:"replySubmitted"},features:[e.TTD],decls:3,vars:8,consts:[[3,"header","visible","visibleChange","onHide"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"col-md-12"],[3,"label","inputId","inputType","control"],["class","col-md-12",4,"ngIf"],[1,"actions","d-flex","justify-content-end"],[1,"btn","btn-success","main-themed",3,"disabled","click"],[4,"ngIf"],[3,"showSpinner"],[1,"btn","btn-secondary","mx-2",3,"click"],[1,"control-label"],[3,"resetFiles","onAttachmentsChange"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(l){return i.showDialog=l})("onHide",function(){return i.clearForm(!0)}),e.ALo(1,"translate"),e.YNc(2,xn,11,12,"form",1),e.qZA()),2&t&&(e.Akn(e.DdM(7,bn)),e.s9C("header",e.lcZ(1,5,"GLOBAL.REPLY")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("ngIf",!i.resetFiles))},directives:[$.V,f.O5,r._Y,r.JL,r.sg,R.V,V.P,ae],pipes:[Z.X$],styles:[".actions[_ngcontent-%COMP%]{margin-top:.5rem}"]}),n})();function kn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-multipe-file-upload",10),e.NdJ("onAttachmentsChange",function(o){return e.CHM(t),e.oxw().onAttachmentsChange(o)}),e.qZA(),e.qZA()}2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"GLOBAL.ATTACHMENTS")))}function yn(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}const Zn=function(){return{width:"50vw"}};let An=(()=>{class n{constructor(t,i,o,l,a){this.ticketService=t,this.toastService=i,this.defaultsService=o,this.otpService=l,this.themeService=a,this.showDialog=!1,this.ticketId=0,this.status="",this.replySubmitted=new e.vpe,this.inputType=q.n,this.replyForm=new r.cw({change_status_comment:new r.NI("",[r.kI.required]),status:new r.NI(""),ticket_id:new r.NI(""),files:new r.NI("")}),this.isLoading=!1,this.savedFiles=[]}ngOnChanges(t){var i,o;t.ticketId&&t.ticketId.currentValue&&(null===(i=this.replyForm.get("ticket_id"))||void 0===i||i.patchValue(t.ticketId.currentValue)),t.status&&t.status.currentValue&&(null===(o=this.replyForm.get("status"))||void 0===o||o.patchValue(t.status.currentValue))}getControl(t){return this.replyForm.get(t)}onAttachmentsChange(t){var i;null===(i=this.replyForm.get("files"))||void 0===i||i.patchValue([...t])}submitReply(){this.isLoading=!0;const t=Object.assign({},this.replyForm.value),i=new FormData;Object.keys(t).forEach(o=>{var l;"files"===o&&t.files&&(null===(l=t.files)||void 0===l?void 0:l.length)?t.files.forEach(a=>{a&&a.name&&i.append("files[]",a)}):i.append(o,t[o])}),this.ticketService.changeStatus(i).subscribe(o=>{this.isLoading=!1,this.showDialog=!1,this.otpService.updateUserTickets.next(t.ticket_id),this.toastService.showSuccessMessage("TOAST.SUCCESS.CHANGE_STATUS.MESSAGE")},o=>{var l;this.isLoading=!1,this.toastService.showErrorMessage("TOAST.ERROR.CHANGE_STATUS.MESSAGE",null===(l=null==o?void 0:o.error)||void 0===l?void 0:l.errors)})}clear(){var t,i;this.replySubmitted.emit(!1),this.showDialog=!1,null===(t=this.replyForm.get("change_status_comment"))||void 0===t||t.patchValue(""),null===(i=this.replyForm.get("files"))||void 0===i||i.reset()}get statusEsclated(){var t,i;return"escalated"===(null===(i=null===(t=this.replyForm)||void 0===t?void 0:t.get("status"))||void 0===i?void 0:i.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.d),e.Y36(Q.D),e.Y36(se.p),e.Y36(N.j),e.Y36(O.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-status-dialog"]],inputs:{showDialog:"showDialog",ticketId:"ticketId",status:"status"},outputs:{replySubmitted:"replySubmitted"},features:[e.TTD],decls:10,vars:16,consts:[[3,"header","visible","visibleChange","onHide"],[3,"formGroup"],[1,"col-md-12","mb-3"],[3,"label","inputId","inputType","control"],["class","col-sm-12",4,"ngIf"],[1,"actions","d-flex","justify-content-end"],[1,"btn","btn-success","main-themed",3,"disabled","click"],[4,"ngIf"],[3,"showSpinner"],[1,"col-sm-12"],[3,"onAttachmentsChange"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(l){return i.showDialog=l})("onHide",function(){return i.clear()}),e.ALo(1,"translate"),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e._UZ(4,"hollat-generic-input",3),e.qZA(),e.YNc(5,kn,5,3,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.submitReply()}),e.YNc(8,yn,3,3,"span",7),e._UZ(9,"hollat-spinner",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Akn(e.DdM(15,Zn)),e.s9C("header",e.lcZ(1,13,"GLOBAL.CHANGE_STATUS")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("formGroup",i.replyForm),e.xp6(2),e.Q6J("label","GLOBAL.COMMENT")("inputId","message")("inputType",i.inputType.TEXTAREA)("control",i.getControl("change_status_comment")),e.xp6(1),e.Q6J("ngIf",i.statusEsclated&&(null==i.themeService?null:i.themeService.uploadFilesEnabled)),e.xp6(2),e.Q6J("disabled",!i.replyForm.valid||i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("showSpinner",i.isLoading))},directives:[$.V,r._Y,r.JL,r.sg,R.V,f.O5,V.P,ae],pipes:[Z.X$],styles:[""]}),n})();var Ae=g(9411),W=g(4748),Se=g(946);const P=function(n){return{background:n}};function Sn(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.Q6J("ngStyle",e.VKq(2,P,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null==t?null:t.status[i.mapValueToLang("title")]," ")}}function wn(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.Q6J("ngStyle",e.VKq(2,P,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null!=t&&null!=t.status&&t.status.show_status_text?null==t?null:t.status[i.mapReplacementStatusValueToLang("replacement_status_text")]:null==t||null==t.status?null:t.status.replacement_status[i.mapValueToLang("title")]," ")}}function Ln(n,s){if(1&n&&e._UZ(0,"hollat-star-rating",35),2&n){const t=e.oxw().ngIf;e.Q6J("value",t.rate)("readonly",!0)}}function Fn(n,s){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("ticket_type"))}}function In(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.ticket_type?null==t?null:t.ticket_type[i.mapValueToLang("title")]:"")}}function On(n,s){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("main_reason_id"))}}function En(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.main_reason?null==t?null:t.main_reason[i.mapValueToLang("title")]:"")}}function Nn(n,s){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("sub_reason_id"))}}function qn(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.sub_reason?null==t?null:t.sub_reason[i.mapValueToLang("title")]:"")}}function Mn(n,s){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("hospital_id"))}}function Dn(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.hospital?null==t?null:t.hospital[i.mapValueToLang("title")]:"")}}function Jn(n,s){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("details"))}}function Un(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Oqu(null==t?null:t.details)}}function Qn(n,s){1&n&&(e.TgZ(0,"div",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"GLOBAL.SECTOR_REPLY"),": "))}function Vn(n,s){if(1&n&&e._UZ(0,"div",38),2&n){const t=e.oxw().ngIf;e.Q6J("innerHtml",null==t?null:t.sector_reply,e.oJD)}}function Rn(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",41),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(3).download(null==l?null:l.file_name)}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=s.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",i.getFileName(null==t?null:t.file_name)," ")}}function Pn(n,s){if(1&n&&(e.TgZ(0,"div",39),e.TgZ(1,"div"),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.YNc(5,Rn,3,1,"ng-container",40),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(3),e.hij(" ",e.lcZ(4,2,"GLOBAL.ATTACHMENTS")," "),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.files)}}function Bn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openReplyForm()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.REPLY")))}function Yn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickStatus("escalated")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ESCALATE")))}function Hn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickStatus("closed")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CLOSE")))}function $n(n,s){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,Yn,3,3,"button",44),e.YNc(2,Hn,3,3,"button",45),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.showEscalateButton()),e.xp6(1),e.Q6J("ngIf",t.showCloseButton())}}function jn(n,s){1&n&&(e.TgZ(0,"div",49),e.TgZ(1,"h3",50),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TICKET_DETAILS.REPLIES.TITLE")," "))}function Gn(n,s){if(1&n&&(e.TgZ(0,"p",58),e.TgZ(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"span",59),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"TICKET_DETAILS.REPLIES.REPLY.MESSAGE")," \xa0"),e.xp6(2),e.Q6J("innerHTML",null==t?null:t.details,e.oJD)}}function Kn(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",41),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(5).download(null!=l&&l.media_file?null==l?null:l.media_file:null==l?null:l.file_name)}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=s.$implicit,i=e.oxw(5);e.xp6(2),e.hij(" ",i.getFileName(null!=t&&t.media_file?null==t?null:t.media_file:null==t?null:t.file_name)," ")}}function zn(n,s){if(1&n&&(e.TgZ(0,"p",54),e.TgZ(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Kn,3,1,"ng-container",40),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"GLOBAL.ATTACHMENTS"),":"),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.files)}}function Xn(n,s){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",51),e.TgZ(2,"div",52),e.TgZ(3,"div",53),e.TgZ(4,"p",54),e.TgZ(5,"strong"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",53),e.TgZ(12,"span",55),e._uU(13),e.ALo(14,"date"),e.qZA(),e.qZA(),e.qZA(),e.YNc(15,Gn,5,4,"p",56),e.YNc(16,zn,5,4,"p",57),e.qZA(),e.qZA()),2&n){const t=s.$implicit;e.xp6(6),e.hij("",e.lcZ(7,5,"TICKET_DETAILS.REPLIES.REPLY.SENT_BY")," \xa0"),e.xp6(3),e.hij(" ",null!=t&&t.added_by_customer?e.lcZ(10,7,"CLIENT"):null==t||null==t.user?null:t.user.name,""),e.xp6(4),e.Oqu(e.xi3(14,9,null==t?null:t.created_at,"d/M/yyyy hh:mm a")),e.xp6(2),e.Q6J("ngIf",null==t?null:t.details),e.xp6(1),e.Q6J("ngIf",null==t?null:t.files.length)}}function Wn(n,s){if(1&n&&(e.ynx(0),e.YNc(1,jn,4,3,"div",48),e.YNc(2,Xn,17,12,"div",40),e.BQk()),2&n){const t=s.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0),e.xp6(1),e.Q6J("ngForOf",t)}}const eo=function(){return[5,10,15]};function to(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-paginator",60),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw(2).onRepliesPageChange(o)}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("alwaysShow",t.totalReplies>t.perPage)("currentPageReportTemplate",t.perPage+" of "+t.totalReplies)("rowsPerPageOptions",e.DdM(8,eo))("rows",t.perPage)("showCurrentPageReport",!0)("showJumpToPageDropdown",!1)("totalRecords",t.totalReplies)("styleClass","ltr")}}function io(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",61),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"auto_close_msg")," "))}const we=function(){return{standalone:!0}};function no(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-radioButton",68),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).ticketRate=o})("ngModelChange",function(){return e.CHM(t),e.oxw(3).toggleTicketQuestionaire(!1)}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("ngModel",t.ticketRate)("label",e.lcZ(1,4,"GLOBAL.NO"))("ngModelOptions",e.DdM(6,we))("value",!1)}}const oo=function(n){return{field:n}};function lo(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",62),e.TgZ(2,"h4",63),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",52),e.TgZ(7,"div",64),e.TgZ(8,"p-radioButton",65),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).ticketRate=o})("ngModelChange",function(){return e.CHM(t),e.oxw(2).toggleTicketQuestionaire(!0)}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"div",64),e.YNc(11,no,2,7,"p-radioButton",66),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div"),e.TgZ(13,"span",67),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(3),e.AsE(" ",e.lcZ(4,8,"GLOBAL.RATING")," : ",e.lcZ(5,10,"GLOBAL.TICKET_QUESTION.TITLE")," "),e.xp6(5),e.Q6J("ngModel",t.ticketRate)("ngModelOptions",e.DdM(17,we))("label",e.lcZ(9,12,t.showNoOption?"GLOBAL.YES":"GLOBAL.START_RATING"))("value",!0),e.xp6(3),e.Q6J("ngIf",t.showNoOption),e.xp6(3),e.hij(" ",e.xi3(15,14,"feedbackHint",e.VKq(18,oo,t.daysCountForFeedback))," ")}}function so(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.TgZ(3,"h3",7),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",8),e.TgZ(7,"a",9),e._UZ(8,"i",10),e.qZA(),e.TgZ(9,"a",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().resetTicketSearch()}),e._UZ(10,"i",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",13),e.TgZ(12,"div",14),e.TgZ(13,"div",15),e.TgZ(14,"h6",16),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",17),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.ynx(21),e.YNc(22,Sn,2,4,"span",18),e.YNc(23,wn,2,4,"ng-template",null,19,e.W1O),e.BQk(),e.YNc(25,Ln,1,2,"hollat-star-rating",20),e.qZA(),e.qZA(),e.TgZ(26,"div",21),e.TgZ(27,"div",22),e.YNc(28,Fn,2,1,"div",23),e.YNc(29,In,2,1,"div",24),e.YNc(30,On,2,1,"div",23),e.YNc(31,En,2,1,"div",24),e.YNc(32,Nn,2,1,"div",23),e.YNc(33,qn,2,1,"div",24),e.YNc(34,Mn,2,1,"div",23),e.YNc(35,Dn,2,1,"div",24),e.YNc(36,Jn,2,1,"div",23),e.YNc(37,Un,2,1,"div",24),e.YNc(38,Qn,3,3,"div",23),e.YNc(39,Vn,1,1,"div",25),e.qZA(),e.YNc(40,Pn,6,4,"div",26),e.YNc(41,Bn,3,3,"button",27),e.TgZ(42,"hollat-rating-dialog",28),e.NdJ("ratingSubmitted",function(o){return e.CHM(t),e.oxw().submitRating(o)}),e.qZA(),e.qZA(),e.YNc(43,$n,3,2,"div",29),e.qZA(),e.qZA(),e.YNc(44,Wn,3,2,"ng-container",30),e.ALo(45,"async"),e.YNc(46,to,1,9,"p-paginator",31),e.YNc(47,io,4,3,"ng-container",30),e.YNc(48,lo,16,20,"ng-container",30),e.TgZ(49,"hollat-reply-dialog",32),e.NdJ("replySubmitted",function(o){return e.CHM(t),e.oxw().submitReply(o)}),e.qZA(),e.TgZ(50,"app-change-status-dialog",33),e.NdJ("replySubmitted",function(o){return e.CHM(t),e.oxw().submitReply(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.ngIf,i=e.MAs(24),o=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,33,"TICKET_DETAILS.TITLE")),e.xp6(11),e.AsE(" ",e.lcZ(16,35,"GLOBAL.TICKET_NUMBER")," #",null==t?null:t.sequence_number," "),e.xp6(4),e.Oqu(e.xi3(20,37,null==t?null:t.created_at,"d/M/yyyy hh:mm a")),e.xp6(3),e.Q6J("ngIf",(null==t||null==t.status?null:t.status.display_to_customers)&&!(null!=t&&null!=t.status&&t.status.use_replacement))("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",o.themeService.RATE_CONFIG_ID&&t.rate),e.xp6(3),e.Q6J("ngIf",o.showField("ticket_type")),e.xp6(1),e.Q6J("ngIf",o.showField("ticket_type")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.main_reason)&&o.showField("main_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.main_reason)&&o.showField("main_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.sub_reason)&&o.showField("sub_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.sub_reason)&&o.showField("sub_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.hospital)&&o.showField("hospital_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.hospital)&&o.showField("hospital_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.details)&&o.showField("details")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.details)&&o.showField("details")),e.xp6(1),e.Q6J("ngIf",null==t?null:t.sector_reply),e.xp6(1),e.Q6J("ngIf",null==t?null:t.sector_reply),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.files.length)>0),e.xp6(1),e.Q6J("ngIf",9===t.status.main_status_id),e.xp6(1),e.Q6J("ticketId",t.id)("showDialog",o.displayRating),e.xp6(1),e.Q6J("ngIf",o.themeService.SELF_SERVICE_CLIENT_CAN_CHANGE_STATUS),e.xp6(1),e.Q6J("ngIf",e.lcZ(45,40,o.replies$)),e.xp6(2),e.Q6J("ngIf",o.totalReplies>o.perPage),e.xp6(1),e.Q6J("ngIf",null==t?null:t.auto_closed),e.xp6(1),e.Q6J("ngIf",o.SelfServiceFeedbackQuestionnaire&&t.status.main_status_id==o.themeService.RATE_CONFIG_ID&&!(null!=t&&t.rate)&&o.checkRating(t)&&!(null!=t&&t.auto_closed)),e.xp6(1),e.Q6J("ticketId",null==t?null:t.id)("showDialog",o.displayReply),e.xp6(1),e.Q6J("ticketId",null==t?null:t.id)("showDialog",o.showStatusDialog)("status",o.status)}}function ao(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.Q6J("ngStyle",e.VKq(2,P,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null==t?null:t.status[i.mapValueToLang("title")]," ")}}function ro(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.Q6J("ngStyle",e.VKq(2,P,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null!=t&&null!=t.status&&t.status.show_status_text?null==t?null:t.status[i.mapReplacementStatusValueToLang("replacement_status_text")]:null==t||null==t.status?null:t.status.replacement_status[i.mapValueToLang("title")]," ")}}function co(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",79),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(4).setSelectedTicket(l)}),e.TgZ(1,"h6",80),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",55),e.TgZ(5,"small"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.qZA(),e.ynx(8),e.YNc(9,ao,2,4,"span",81),e.YNc(10,ro,2,4,"ng-template",null,82,e.W1O),e.BQk(),e.qZA()}if(2&n){const t=s.$implicit,i=e.MAs(11);e.xp6(2),e.AsE("",e.lcZ(3,5,"GLOBAL.TICKET_NUMBER"),":",t.sequence_number,""),e.xp6(4),e.Oqu(e.xi3(7,7,null==t?null:t.created_at,"d/M/yyyy hh:mma")),e.xp6(3),e.Q6J("ngIf",(null==t||null==t.status?null:t.status.display_to_customers)&&!(null!=t&&null!=t.status&&t.status.use_replacement))("ngIfElse",i)}}function _o(n,s){if(1&n&&(e.ynx(0),e.YNc(1,co,12,10,"div",78),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.userTickets$)}}function uo(n,s){1&n&&(e.TgZ(0,"div",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NO_TICKETS"),""))}function po(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-tabPanel",76),e.ALo(1,"translate"),e.YNc(2,_o,2,1,"ng-container",30),e.YNc(3,uo,3,3,"div",77),e.TgZ(4,"p-paginator",74,75),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw(2).userTicketsChangePage(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.s9C("header",e.lcZ(1,7,"TICKET_DETAILS.MY_TICKETS.TITLE")),e.xp6(2),e.Q6J("ngIf",t.userTickets$),e.xp6(1),e.Q6J("ngIf",0==(null==t.userTickets$?null:t.userTickets$.length)),e.xp6(1),e.Q6J("dir","ltr")("rows",t.similarTicketPageCount)("totalRecords",t.userTicketsTotal)("alwaysShow",!1)}}function mo(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngStyle",e.VKq(2,P,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null==t?null:t.status[i.mapValueToLang("title")]," ")}}function go(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngStyle",e.VKq(2,P,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null!=t&&null!=t.status&&t.status.show_status_text?null==t?null:t.status[i.mapReplacementStatusValueToLang("replacement_status_text")]:null==t||null==t.status?null:t.status.replacement_status[i.mapValueToLang("title")]," ")}}function ho(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",79),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(3).setSelectedTicket(l)}),e.TgZ(1,"h6",80),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",55),e.TgZ(5,"small"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.qZA(),e.ynx(8),e.YNc(9,mo,2,4,"span",81),e.YNc(10,go,2,4,"ng-template",null,84,e.W1O),e.BQk(),e.qZA()}if(2&n){const t=s.$implicit,i=e.MAs(11);e.xp6(2),e.AsE("",e.lcZ(3,5,"GLOBAL.TICKET_NUMBER"),":",t.sequence_number,""),e.xp6(4),e.Oqu(e.xi3(7,7,null==t?null:t.created_at,"d/M/yyyy hh:mma")),e.xp6(3),e.Q6J("ngIf",(null==t||null==t.status?null:t.status.display_to_customers)&&!(null!=t&&null!=t.status&&t.status.use_replacement))("ngIfElse",i)}}function fo(n,s){1&n&&(e.TgZ(0,"div",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NO_TICKETS"),""))}function vo(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ho,12,10,"div",78),e.YNc(2,fo,3,3,"div",77),e.BQk()),2&n){const t=s.ngIf;e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function To(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",69),e.TgZ(1,"div",4),e.TgZ(2,"div",70),e.TgZ(3,"p-tabView",71),e.NdJ("onChange",function(o){return e.CHM(t),e.oxw().setActivetab(o)})("activeIndexChange",function(o){return e.CHM(t),e.oxw().activeTab=o}),e.YNc(4,po,6,9,"p-tabPanel",72),e.TgZ(5,"p-tabPanel",73),e.ALo(6,"translate"),e.YNc(7,vo,3,2,"ng-container",30),e.ALo(8,"async"),e.TgZ(9,"p-paginator",74,75),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw().changePage(o)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("styleClass","default-font")("activeIndex",t.activeTab),e.xp6(1),e.Q6J("ngIf",t.isAuthorizedUser),e.xp6(1),e.s9C("header",e.lcZ(6,9,"TICKET_DETAILS.MY_TICKETS.TAB2")),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,11,t.clientTickets$)),e.xp6(2),e.Q6J("dir","ltr")("rows",t.similarTicketPageCount)("totalRecords",t.totalSimilarTickets)("alwaysShow",!1)}}let xo=(()=>{class n{constructor(t,i,o,l,a,d,u,c,m,h){this.ticketService=t,this.translateService=i,this.toastService=o,this.themeService=l,this.ref=a,this.otbService=d,this.amplitudeService=u,this.downloadService=c,this.cahceService=m,this.fieldsService=h,this.clientTickets={},this.resetTicket=!1,this.toggleSpinner=new e.vpe,this.resetSearch=new e.vpe,this.isAuthorizedUser=!1,this.ticketRate=void 0,this.ticketDetails$=new C.y,this.replies$=new C.y,this.now=new Date,this.displayRating=!1,this.displayReply=!1,this.totalSimilarTickets=0,this.similarTicketPageCount=10,this.currentPage=1,this.clientTickets$=new C.y,this.userTickets$=null,this.lang="ar",this.daysCountForFeedback="",this.requested=!1,this.userTicketsCurrentPage=1,this.userTicketsTotal=0,this.activeTab=0,this.canChangeStatus=!1,this.fields=[],this.showNoOption=!1,this.selectedTicketId=0,this.repliesPage=1,this.perPage=5,this.totalReplies=0,this.mobileValue="",this.status="",this.showStatusDialog=!1,d.loggedUser.subscribe(_=>{_&&(this.currentUser=_,this.otbService.userInfo.next(_),this.mobileValue=_.mobile)}),this.fieldsService.getConfiguredFields().pipe((0,b.U)(_=>(this.fields=_.fields,_.fields))).subscribe(),this.lang=this.translateService.currentLang,d.loggedUser.subscribe(_=>{_&&!this.requested&&(this.currentUser=_,this.getUserLoggedTickets(),this.requested=!0)}),this.daysCountForFeedback=this.cahceService.getItem("FeedbackExpiredTimeInDays"),this.otbService.userInfo.subscribe(_=>{this.otpUser=_}),this.themeService.selfServiceConfigs.subscribe(_=>{var v;this.showNoOption=!!+(null===(v=null==_?void 0:_.SHOW_NO_CASE_AT_RATING)||void 0===v?void 0:v.value),this.canChangeStatus=!!+_.SELF_SERVICE_CLIENT_CAN_CHANGE_STATUS.value}),this.currentUser&&this.otbService.updateUserTickets.subscribe(_=>{this.getUserLoggedTickets()})}set tabIndex(t){}ngOnDestroy(){this.status="",this.showStatusDialog=!1}getUserLoggedTickets(){this.ticketRate=void 0,this.isAuthorizedUser=!0,this.ticketDetails$=(0,A.of)(null),this.ticketDetails=void 0,this.userTickets$=[],this.ticketService.getClientTickets({}).subscribe(t=>{this.userTickets$=t.data,this.userTicketsTotal=t.meta.total,this.userTicketsCurrentPage=t.meta.current_page,this.ticketDetails&&this.userTickets$.forEach(i=>{i.id==this.ticketDetails.id&&(this.ticketDetails=i,this.ticketDetails$=(0,A.of)(i))}),this.ref.detectChanges()})}get SelfServiceFeedbackQuestionnaire(){return this.themeService.SelfServiceFeedbackQuestionnaire}ngOnInit(){this.otbService.activeTabIndex.subscribe(t=>{this.activeTab=t,this.ref.detectChanges()})}ngOnChanges(t){var i,o,l,a,d,u,c;this.otbService.OTBUserActivated.subscribe(m=>{m&&(this.isAuthorizedUser=!0,this.otbService.last10Tickets(m).subscribe(h=>{this.userTickets$=h.data,this.ref.detectChanges()}))}),t.resetTicket&&t.resetTicket.currentValue&&t.resetTicket.currentValue&&(this.ticketDetails$=(0,A.of)(null),this.resetTicket=!1),t.searchCriteria&&t.searchCriteria.currentValue&&(this.currentCriteria=t.searchCriteria.currentValue,this.search(t.searchCriteria.currentValue),this.showStatusDialog=!1),t.clientTickets&&(this.clientTickets$=(0,A.of)((null===(o=null===(i=null==t?void 0:t.clientTickets)||void 0===i?void 0:i.currentValue)||void 0===o?void 0:o.data)?[...t.clientTickets.currentValue.data]:[]),this.totalSimilarTickets=null===(d=null===(a=null===(l=null==t?void 0:t.clientTickets)||void 0===l?void 0:l.currentValue)||void 0===a?void 0:a.meta)||void 0===d?void 0:d.total,(null===(c=null===(u=t.clientTickets.currentValue)||void 0===u?void 0:u.data)||void 0===c?void 0:c.length)&&(this.tabIndex=1,this.ticketDetails$=(0,A.of)(this.clientTickets.data[0]).pipe((0,b.U)(m=>(m.avg_rate=Math.floor(m.avg_rate),m)),(0,J.b)(m=>{this.selectedTicketId=m.id,this.totalReplies=0,this.repliesPage=1,this.getTicketReplies()})))),this.ref.detectChanges()}changePage(t){let i=sessionStorage.getItem("SimilarTickets"),o={};null!=i&&(o=JSON.parse(i),o.page=t.page+1),this.currentPage=t.page+1,this.similarTicketPageCount=t.rows,this.clientTickets$=this.ticketService.getClientTickets(o).pipe((0,b.U)(l=>l.data))}search(t){var i,o,l,a,d;this.toggleSpinner.emit(!0),this.ticketDetails$.subscribe(c=>{this.ticketDetails=c,this.toggleSpinner.emit(!1)}).unsubscribe();let u={ticket_id:null!==(i=null==t?void 0:t.ticket_id)&&void 0!==i?i:null===(o=null==this?void 0:this.ticketDetails)||void 0===o?void 0:o.id,mobile_number:null!==(l=null==t?void 0:t.mobile_number)&&void 0!==l?l:null===(d=null===(a=this.ticketDetails)||void 0===a?void 0:a.client)||void 0===d?void 0:d.mobile};this.ticketDetails$=this.ticketService.searchTickets(u).pipe((0,b.U)(c=>this.currentUser?(c.data.avg_rate=Math.floor(c.data.avg_rate),c.data):(c.avg_rate=Math.floor(c.avg_rate),c)),(0,J.b)(c=>{if(this.ticketDetails=c,this.selectedTicketId=c.id,this.totalReplies=0,this.repliesPage=1,this.getTicketReplies(),t.formList){this.ticketDetails$=(0,A.of)(this.ticketDetails);const m=this.userTickets$.indexOf(this.userTickets$.filter(h=>{var _;return h.id===(null===(_=this.ticketDetails)||void 0===_?void 0:_.id)})[0]);this.userTickets$[m]=this.ticketDetails,this.selectedTicketId=this.ticketDetails.id,this.showStatusDialog=!1}}),(0,Ce.K)(c=>(this.toggleSpinner.emit(!1),this.toastService.showErrorMessage("TOAST.ERROR.SEARCH.MESSAGE",c.error.errors),(0,A.of)(null))))}download(t){this.amplitudeService.logEvent("SELF_SERVICE_DOWNLOAD_ATTACHMENT"),this.downloadService.downloadFromServer(t)}getFileName(t){const i=t.split("/");return i[i.length-1]}mapValueToLang(t){return`${t}_${this.translateService.currentLang}`}mapReplacementStatusValueToLang(t){return"ar"===this.translateService.currentLang?`${t}_${this.translateService.currentLang}`:`${t}`}checkRating(t){return!t.feedback_link_expired_at||(new Date).valueOf()<new Date(t.feedback_link_expired_at).valueOf()}submitRating(t){var i;const o=Object.assign({},this.ticketDetails);this.amplitudeService.logEvent("SELF_SERVICE_SEND_FEEDBACK"),this.displayRating=!1,this.search({ticket_id:null==o?void 0:o.id,mobile_number:null===(i=this.currentUser)||void 0===i?void 0:i.mobile}),t&&this.currentUser?this.getUserLoggedTickets():this.otbService.last10Tickets(this.otpUser.mobile).subscribe(l=>{this.userTickets$=l.data,this.ref.detectChanges()})}submitReply(t){this.amplitudeService.logEvent("SELF_SERVICE_SEND_REPLAY"),this.displayReply=!1,this.showStatusDialog=!1,t&&this.currentUser&&this.getUserLoggedTickets(),t&&(this.currentUser||this.search(this.currentCriteria),this.otbService.last10Tickets(this.otpUser.mobile).subscribe(i=>{this.userTickets$=i.data,this.ref.detectChanges()}))}openReplyForm(){this.displayReply=!0}setSelectedTicket(t){var i;this.search({ticket_id:t.id,mobile_number:null!==(i=this.mobileValue)&&void 0!==i?i:"",formList:!0})}getTicketReplies(){this.amplitudeService.logEvent("SELF_SERVICE_GET_TICKET_REPLIES"),this.replies$=this.ticketService.getTicketReplies(`${this.selectedTicketId}`,this.repliesPage,this.perPage).pipe((0,b.U)(t=>(this.totalReplies=t.meta.total,t.data)))}resetTicketSearch(){this.resetSearch.emit(!0),this.ticketDetails$=(0,A.of)(null),this.showStatusDialog=!1,this.ticketDetails=null,this.showStatusDialog=!1}resetUserTickets(){this.clientTickets$=(0,A.of)([])}toggleTicketQuestionaire(t){this.displayRating=!1,this.displayReply=!1,t?this.displayRating=!0:this.displayReply=!0}checkFeedback(t){return!(t&&new Date>new Date(t))}userTicketsChangePage(t){const i=document.getElementsByClassName("p-tabview-panel")[0].offsetTop;document.getElementsByClassName("p-tabview-panel")[0].scrollTop=i-50,this.ticketService.getClientTickets({page:t.page+1}).subscribe(o=>{this.userTickets$=o.data,this.currentPage=t.page+1,this.userTicketsTotal=o.meta.total,this.userTicketsCurrentPage=o.meta.current_page,this.ref.detectChanges()})}setActivetab(t){this.activeTab=t.index}showCancelButton(){var t,i;return-1===[11,8,4,3].indexOf(null===(i=null===(t=this.ticketDetails)||void 0===t?void 0:t.status)||void 0===i?void 0:i.main_status_id)}showEscalateButton(){return!(!this.ticketDetails||3!==this.ticketDetails.status.main_status_id&&8!==this.ticketDetails.status.main_status_id||this.ticketDetails.already_escalated)}showCloseButton(){return!(!this.ticketDetails||3!==this.ticketDetails.status.main_status_id&&8!==this.ticketDetails.status.main_status_id||this.ticketDetails.already_escalated)}onClickStatus(t){this.status=t,this.showStatusDialog=!0}showField(t){const i=this.fields.filter(o=>o.field===t)[0];if((null==i?void 0:i.show_on_self_service)&&i.required_if){this.fields.find(l=>l.id===i.constrain_field_id)}return null==i?void 0:i.show_on_self_service}fieldsFilter(t){var i;let l=null===(i=this.fields)||void 0===i?void 0:i.filter(a=>a.field===t)[0];return"ar"===this.lang?null==l?void 0:l.display_name_ar:null==l?void 0:l.display_name_en}onRepliesPageChange(t){this.repliesPage=t.page+1,this.perPage=t.rows,this.getTicketReplies()}getStatusText(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.d),e.Y36(Z.sK),e.Y36(Q.D),e.Y36(O.f),e.Y36(e.sBO),e.Y36(N.j),e.Y36(K.Q),e.Y36(ke),e.Y36(Y.Q),e.Y36(ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-ticket-details"]],inputs:{ticketDetails:"ticketDetails",searchCriteria:"searchCriteria",clientTickets:"clientTickets",resetTicket:"resetTicket",tabIndex:"tabIndex"},outputs:{toggleSpinner:"toggleSpinner",resetSearch:"resetSearch"},features:[e.TTD],decls:6,vars:6,consts:[[1,"row","ticket-info"],[1,"col"],["class","card",4,"ngIf"],["class","col-md-4 col-12",4,"ngIf"],[1,"card"],[1,"card-body","d-flex","flex-column"],[1,"collabsable-header","with-border","w-100"],[1,"text-green"],[1,"box-tools","pull-right"],["data-bs-toggle","collapse","href","#ticketDetailsCollapse",1,"btn"],[1,"fa","fa-minus"],[1,"btn",3,"click"],[1,"fa","fa-times"],["id","ticketDetailsCollapse",1,"container","collapse","show"],[1,"row","round","bordered"],[1,"col-md-3","col-12","mb-2"],[2,"font-weight","bold"],[1,"text-gray"],["class","ticket-status",3,"ngStyle",4,"ngIf","ngIfElse"],["replacment",""],[3,"value","readonly",4,"ngIf"],[1,"col-md-7","col-12","history-info"],[1,"row","w-100"],["class","col-md-3 col-12 p-0 bold-text",4,"ngIf"],["class","col-md-9 col-12 p-0",4,"ngIf"],["class","col-md-9 col-12 p-0 bold-text",3,"innerHtml",4,"ngIf"],["class","col-sm-12",4,"ngIf"],["class","btn main-themed pull-right",3,"click",4,"ngIf"],[3,"ticketId","showDialog","ratingSubmitted"],["class","col-md-2 col-12 history-info",4,"ngIf"],[4,"ngIf"],[3,"alwaysShow","currentPageReportTemplate","rowsPerPageOptions","rows","showCurrentPageReport","showJumpToPageDropdown","totalRecords","styleClass","onPageChange",4,"ngIf"],[3,"ticketId","showDialog","replySubmitted"],[3,"ticketId","showDialog","status","replySubmitted"],[1,"ticket-status",3,"ngStyle"],[3,"value","readonly"],[1,"col-md-3","col-12","p-0","bold-text"],[1,"col-md-9","col-12","p-0"],[1,"col-md-9","col-12","p-0","bold-text",3,"innerHtml"],[1,"col-sm-12"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[1,"btn","main-themed","pull-right",3,"click"],[1,"col-md-2","col-12","history-info"],["class","btn btn-danger mb-2 text-white w-100",3,"click",4,"ngIf"],["class","btn btn-success mb-2 text-white w-100",3,"click",4,"ngIf"],[1,"btn","btn-danger","mb-2","text-white","w-100",3,"click"],[1,"btn","btn-success","mb-2","text-white","w-100",3,"click"],["class","card-header",4,"ngIf"],[1,"card-header"],[1,"card-title","line","text-green"],[1,"m-3","row","round","bordered"],[1,"row"],[1,"col-6"],[1,"m-0"],[1,"d-flex","justify-content-end"],["class","m-0 reply-details",4,"ngIf"],["class","m-0",4,"ngIf"],[1,"m-0","reply-details"],[3,"innerHTML"],[3,"alwaysShow","currentPageReportTemplate","rowsPerPageOptions","rows","showCurrentPageReport","showJumpToPageDropdown","totalRecords","styleClass","onPageChange"],[1,"alert","alert-info",2,"margin","15px 10px"],[1,"ticket-questionaire"],[1,"main-themed-color"],[1,"col-3"],[3,"ngModel","ngModelOptions","label","value","ngModelChange"],[3,"ngModel","label","ngModelOptions","value","ngModelChange",4,"ngIf"],[1,"right-float",2,"display","inline-block","margin","0px 10px","color","#b8b8b8","font-size","10px"],[3,"ngModel","label","ngModelOptions","value","ngModelChange"],[1,"col-md-4","col-12"],[1,"card-body"],["id","self-service-user-tickets",3,"styleClass","activeIndex","onChange","activeIndexChange"],[3,"header",4,"ngIf"],[1,"scroll-tickets",3,"header"],[3,"dir","rows","totalRecords","alwaysShow","onPageChange"],["paginator",""],[3,"header"],["class","text-center mt-2",4,"ngIf"],["class","block-card",3,"click",4,"ngFor","ngForOf"],[1,"block-card",3,"click"],[1,"bold"],["class","ticket-status ",3,"ngStyle",4,"ngIf","ngIfElse"],["replacmentstate",""],[1,"text-center","mt-2"],["replacmentstateBlock",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,so,51,42,"div",2),e.ALo(3,"async"),e.qZA(),e.YNc(4,To,11,13,"div",3),e.ALo(5,"async"),e.qZA()),2&t){let o;e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,i.ticketDetails$)),e.xp6(2),e.Q6J("ngIf",i.isAuthorizedUser||(null==(o=e.lcZ(5,4,i.clientTickets$))?null:o.length))}},directives:[f.O5,ln,Cn,An,f.PC,Ze,f.sg,Ae.D,ye.EU,r.JJ,r.On,W.xf,W.x4,Se.Lv],pipes:[f.Ov,Z.X$,f.uU],styles:[".ticket-info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:20px}.ticket-info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;border-radius:20px;border-bottom:1px solid #f4f4f4;background-color:#fff}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.5rem}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .row.round[_ngcontent-%COMP%]{padding:.4rem;margin:.2rem .3rem!important}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]{border-right:1px solid #999;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .collabsable-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:.5rem 1rem;margin-bottom:.5rem}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .collabsable-header.with-border[_ngcontent-%COMP%]{border-bottom:1px solid #f4f4f4}.ticket-info[_ngcontent-%COMP%]   .card-body.collapse[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box-tools[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#97a0b3}.block-card[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #999;display:grid;grid-template-columns:1fr 1fr;margin-bottom:.5rem;border-radius:5px;cursor:pointer}@media (max-width: 768px){.history-info[_ngcontent-%COMP%]{border:unset!important}}.text-gray[_ngcontent-%COMP%]{color:#aaa;font-size:12px}.ticket-status[_ngcontent-%COMP%]{border:1px solid #aaa;padding:1px 10px;font-size:14px;border-radius:8px;box-shadow:0 3px 6px #0003;color:#fff!important;display:inline-block;margin-bottom:10px;text-align:center;word-break:break-all}.ticket-questionaire[_ngcontent-%COMP%]{padding:.5rem 1rem}  p-tabView .p-tabview-nav-container .p-tabview-nav-content ul li[role=presentation].p-highlight a{border-top-left-radius:20px;border-top-right-radius:20px;background-color:#f4f4f4;color:#000;border-color:#f4f4f4!important}  p-tabView#self-service-user-tickets p-tabpanel .p-tabview-panel{max-height:250px!important;overflow:scroll!important}#self-service-user-tickets[_ngcontent-%COMP%]   .p-tabview-nav-container[_ngcontent-%COMP%]   .p-tabview-nav-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{border-color:#f4f4f4!important}#self-service-user-tickets[_ngcontent-%COMP%]   .p-tabview-nav-container[_ngcontent-%COMP%]   .p-tabview-nav-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[role=presentation][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;background-color:#f4f4f4;color:#000;border-color:#f4f4f4!important}#self-service-user-tickets[_ngcontent-%COMP%]   .bold-text[_ngcontent-%COMP%]{font-weight:bolder!important}.reply-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0!important}"],changeDetection:0}),n})();var bo=g(6287);function Co(n,s){if(1&n&&(e.TgZ(0,"div",20),e.TgZ(1,"div",3),e.TgZ(2,"h3",21),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"div",22),e.TgZ(6,"table",23),e.TgZ(7,"tbody"),e.TgZ(8,"tr"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"tr"),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"div",15),e.qZA(),e.qZA(),e.TgZ(20,"tr"),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"td"),e.TgZ(25,"a",24),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"tr"),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,10,"CONTACT_US.TITLE")),e.xp6(7),e.Oqu(e.lcZ(11,12,"CONTACT_US.CODE")),e.xp6(3),e.Oqu(t.themeService.unifiedNumber),e.xp6(3),e.Oqu(e.lcZ(17,14,"CONTACT_US.WORK_TIME")),e.xp6(3),e.Q6J("innerHTML",t.themeService.workingHours,e.oJD),e.xp6(3),e.Oqu(e.lcZ(23,16,"GLOBAL.EMAIL")),e.xp6(3),e.MGl("href","mailto:",t.themeService.publicEmail,"",e.LSH),e.xp6(1),e.Oqu(t.themeService.publicEmail),e.xp6(3),e.Oqu(e.lcZ(30,18,"CONTACT_US.RESPONSE_TIME")),e.xp6(3),e.Oqu(t.themeService.solvingTime)}}function ko(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("Form",t.ticketForm)("label","GLOBAL.NAME")("inputId","ClientName")("inputType",t.inputType.TEXT)("control",t.getControl("name"))}}function yo(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.OTB_Send")))}function Zo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getOtpCode()}),e.YNc(1,yo,3,3,"span",14),e._UZ(2,"hollat-spinner",18),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.isOTBLoading||!t.getControl("mobile").valid),e.xp6(1),e.Q6J("ngIf",!t.isOTBLoading),e.xp6(1),e.Q6J("showSpinner",t.isOTBLoading)}}function Ao(n,s){if(1&n&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"code_will_expire_after")," ",t.countDown," ",e.lcZ(3,5,"second")," ")}}function So(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.validate")))}function wo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).verifyOtp()}),e.YNc(1,So,3,3,"span",14),e._UZ(2,"hollat-spinner",18),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("disabled",!t.getControl("OTP_Code").value),e.xp6(1),e.Q6J("ngIf",!t.isOTBLoading),e.xp6(1),e.Q6J("showSpinner",t.isOTBLoading)}}function Lo(n,s){if(1&n&&(e.TgZ(0,"div",33),e.TgZ(1,"div",34),e._UZ(2,"input",35),e.qZA(),e.TgZ(3,"div",36),e.YNc(4,wo,3,3,"button",37),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.OTP_Enabled)}}function Fo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",27),e.YNc(2,Zo,3,3,"button",28),e.YNc(3,Ao,4,7,"div",29),e.YNc(4,Lo,5,1,"div",30),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("mobileValue",t.mobileValue)("disabled",t.mobileVerified)("label","GLOBAL.PHONE_NUMBER")("inputId","phoneNum")("inputType",t.inputType.PHONE)("control",t.getControl("mobile"))("requiredPattern","5XXXXXXXXX"),e.xp6(1),e.Q6J("ngIf",t.OTP_Enabled&&!t.mobileVerified&&!t.countDown),e.xp6(1),e.Q6J("ngIf",t.countDown&&!t.mobileVerified),e.xp6(1),e.Q6J("ngIf",t.countDown&&!t.mobileVerified)}}function Io(n,s){if(1&n&&(e._UZ(0,"p-dropdown",43),e.ALo(1,"translate")),2&n){const t=s.ngIf,i=e.oxw(2);e.s9C("optionLabel",i.getSelectLabel("title_")),e.Q6J("filter",!0)("options",t)("styleClass","w-100")("placeholder",e.lcZ(1,6,"GLOBAL.CHOOSE"))("disabled",!t.length)}}function Oo(n,s){1&n&&e._UZ(0,"hollat-loading-skeleton")}function Eo(n,s){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",39),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"sup"),e._UZ(5,"i",40),e.qZA(),e.qZA(),e.YNc(6,Io,2,8,"p-dropdown",41),e.ALo(7,"async"),e.YNc(8,Oo,1,0,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=e.MAs(9),i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"GLOBAL.ID.TYPE")," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(7,5,i.idTypes$))("ngIfElse",t)}}function No(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",44),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.getControl("national_id_type_id").valid)("label","GLOBAL.ID.NUMBER")("inputId","idNum")("inputType",t.inputType.TEXT)("control",t.getControl("national_id"))("requiredPattern",t.nationalIdRequiredPattern)("placeholder",t.nationalIdRequiredPattern)("fieldType",t.nationalIdFieldType)}}function qo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"islamic-calendar",45),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("id_endDate"))||!i.required))("label","ar"===t.currentLang?null==(o=t.fieldsFilter("id_endDate"))?null:o.display_name_ar:null==(o=t.fieldsFilter("id_endDate"))?null:o.display_name_en)("hijri",!1)("formControl",t.getControl("id_endDate"))}}function Mo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"islamic-calendar",45),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.s9C("label",e.lcZ(2,4,"GLOBAL.BIRTHDATE")),e.Q6J("required",!(null==(i=t.fieldsFilter("birthdate"))||!i.required))("hijri",!1)("formControl",t.getControl("birthdate"))}}function Do(n,s){1&n&&(e.ynx(0),e._UZ(1,"i",51),e.BQk())}function Jo(n,s){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",46),e._uU(2),e.ALo(3,"translate"),e.YNc(4,Do,2,0,"ng-container",14),e.qZA(),e.TgZ(5,"div",47),e.TgZ(6,"div",48),e.TgZ(7,"label"),e._UZ(8,"input",49),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",48),e.TgZ(12,"label"),e._UZ(13,"input",50),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,4,"GENDER")," "),e.xp6(2),e.Q6J("ngIf",t.required("gender")),e.xp6(5),e.hij(" ",e.lcZ(10,6,"MALE")," "),e.xp6(5),e.hij(" ",e.lcZ(15,8,"FEMALE")," ")}}function Uo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("country_id"))||!i.required))("label","GLOBAL.COUNTRY")("inputId","countryId")("inputType",t.inputType.SELECT)("control",t.getControl("country_id"))("sourceObs$",t.countries$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function Qo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("region_id"))||!i.required))("label","GLOBAL.REGION")("inputId","regionId")("inputType",t.inputType.SELECT)("control",t.getControl("region_id"))("sourceObs$",t.regions$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function Vo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("city_id"))||!i.required))("label","GLOBAL.CITY")("inputId","cityId")("inputType",t.inputType.SELECT)("control",t.getControl("city_id"))("sourceObs$",t.cities$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function Ro(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",53),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("label","ar"==t.currentLang?null==(i=t.fieldsFilter("ticket_type_id"))?null:i.display_name_ar:null==(i=t.fieldsFilter("ticket_type_id"))?null:i.display_name_en)("inputId","ticketType")("inputType",t.inputType.SELECT)("control",t.getControl("ticket_type_id"))("sourceObs$",t.ticketTypes$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!(null==(o=t.fieldsFilter("ticket_type_id"))||!o.required))}}const E=function(n){return{field:n}};function Po(n,s){1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,E,e.lcZ(3,4,"GLOBAL.FINE")))," "))}function Bo(n,s){1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,E,e.lcZ(3,4,"GLOBAL.ID.NUMBER")))," "))}function Yo(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}function Ho(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"label"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"sup"),e._UZ(5,"i",40),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",54),e._UZ(8,"input",55),e.ALo(9,"translate"),e.YNc(10,Po,4,8,"div",56),e.YNc(11,Bo,4,8,"div",56),e.qZA(),e.TgZ(12,"div",57),e.TgZ(13,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().searchViolations()}),e.YNc(14,Yo,3,3,"span",14),e._UZ(15,"hollat-spinner",18),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let i,o,l;e.xp6(2),e.hij("",e.lcZ(3,10,"GLOBAL.FINE")," "),e.xp6(6),e.Gre("form-control ",null!=(i=t.ticketForm.get("fine_number"))&&i.touched&&null!=(i=t.ticketForm.get("fine_number"))&&i.dirty&&(null!=(i=t.ticketForm.get("fine_number"))&&i.errors||null==(i=t.ticketForm.get("national_id"))||!i.valid)?"is-invalid":"",""),e.Q6J("placeholder",e.lcZ(9,12,"GLOBAL.FINE")),e.xp6(2),e.Q6J("ngIf",(null==(o=t.ticketForm.get("fine_number"))?null:o.touched)&&(null==(o=t.ticketForm.get("fine_number"))?null:o.dirty)&&(null==(o=t.ticketForm.get("fine_number"))||null==o.errors?null:o.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(l=t.ticketForm.get("fine_number"))?null:l.touched)&&(null==(l=t.ticketForm.get("fine_number"))?null:l.dirty)&&(null==(l=t.ticketForm.get("national_id"))||null==l.errors?null:l.errors.required)),e.xp6(2),e.Q6J("disabled",!t.getControl("fine_number").value||!t.getControl("national_id").value||t.isViolationLoading),e.xp6(1),e.Q6J("ngIf",!t.isViolationLoading),e.xp6(1),e.Q6J("showSpinner",t.isViolationLoading)}}function $o(n,s){if(1&n&&e._UZ(0,"div",60),2&n){const t=s.ngIf,i=e.oxw();e.ekj("text-red",i.violationError),e.Q6J("innerHTML",t,e.oJD)}}function jo(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",53),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("label","ar"==t.currentLang?null==(i=t.fieldsFilter("main_reason_id"))?null:i.display_name_ar:null==(i=t.fieldsFilter("main_reason_id"))?null:i.display_name_en)("inputId","mainReason")("inputType",t.inputType.SELECT)("control",t.getControl("main_reason_id"))("sourceObs$",t.mainReasons$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!!+(null==(o=t.fieldsFilter("main_reason_id"))?null:o.required))}}function Go(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",61),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("required",!1)("label","GLOBAL.main_reason_other")("inputId","main_reason_other")("inputType",t.inputType.TEXT)("control",t.getControl("main_reason_other"))}}function Ko(n,s){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("sub_reason_id"))||!i.required))("label","ar"==t.currentLang?null==(o=t.fieldsFilter("sub_reason_id"))?null:o.display_name_ar:null==(o=t.fieldsFilter("sub_reason_id"))?null:o.display_name_en)("inputId","subReason")("inputType",t.inputType.SELECT)("control",t.getControl("sub_reason_id"))("sourceObs$",t.subReasons$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function zo(n,s){1&n&&(e.TgZ(0,"sup"),e._UZ(1,"i",40),e.qZA())}function Xo(n,s){if(1&n&&(e._UZ(0,"p-dropdown",64),e.ALo(1,"translate")),2&n){const t=s.ngIf,i=e.oxw(2);e.s9C("optionLabel",i.getSelectLabel("title_")),e.Q6J("filter",!0)("options",t)("styleClass","w-100")("placeholder",e.lcZ(1,5,"GLOBAL.CHOOSE"))}}function Wo(n,s){1&n&&e._UZ(0,"hollat-loading-skeleton")}function el(n,s){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",62),e._uU(2),e.YNc(3,zo,2,0,"sup",14),e.qZA(),e.YNc(4,Xo,2,7,"p-dropdown",63),e.ALo(5,"async"),e.YNc(6,Wo,1,0,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=e.MAs(7),i=e.oxw();let o,l;e.xp6(2),e.hij(" ","ar"==i.currentLang?null==(o=i.fieldsFilter("sub_sub_reason_id"))?null:o.display_name_ar:null==(o=i.fieldsFilter("sub_sub_reason_id"))?null:o.display_name_en," "),e.xp6(1),e.Q6J("ngIf",!(null==(l=i.fieldsFilter("sub_sub_reason_id"))||!l.required)),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,4,i.subSubReasons))("ngIfElse",t)}}function tl(n,s){1&n&&(e.TgZ(0,"sup"),e._UZ(1,"i",40),e.qZA())}function il(n,s){if(1&n&&(e._UZ(0,"p-dropdown",66),e.ALo(1,"translate")),2&n){const t=s.ngIf,i=e.oxw(2);e.s9C("optionLabel",i.getSelectLabel("title_")),e.Q6J("filter",!0)("options",t)("styleClass","w-100")("placeholder",e.lcZ(1,5,"GLOBAL.CHOOSE"))}}function nl(n,s){1&n&&e._UZ(0,"hollat-loading-skeleton")}function ol(n,s){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",62),e._uU(2),e.YNc(3,tl,2,0,"sup",14),e.qZA(),e.YNc(4,il,2,7,"p-dropdown",65),e.ALo(5,"async"),e.YNc(6,nl,1,0,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=e.MAs(7),i=e.oxw();let o,l;e.xp6(2),e.hij(" ","ar"==i.currentLang?null==(o=i.fieldsFilter("sub_sub_sub_reason_id"))?null:o.display_name_ar:null==(o=i.fieldsFilter("sub_sub_sub_reason_id"))?null:o.display_name_en," "),e.xp6(1),e.Q6J("ngIf",!(null==(l=i.fieldsFilter("sub_sub_sub_reason_id"))||!l.required)),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,4,i.subSubSubReasons))("ngIfElse",t)}}function ll(n,s){if(1&n&&(e.TgZ(0,"div",25),e.ynx(1),e._UZ(2,"hollat-generic-input",67),e.BQk(),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(2),e.Q6J("label","ar"===t.currentLang?null==(i=t.fieldsFilter("hospital_id"))?null:i.display_name_ar:null==(i=t.fieldsFilter("hospital_id"))?null:i.display_name_en)("ignoreTranslation",!0)("inputId","sectors")("inputType",t.inputType.SELECT)("control",t.getControl("hospital_id"))("sourceObs$",t.sectors$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!!+(null==(o=t.fieldsFilter("hospital_id"))?null:o.required))}}function sl(n,s){if(1&n&&(e.TgZ(0,"div",25),e.ynx(1),e._UZ(2,"hollat-generic-input",11),e.BQk(),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(2),e.Q6J("label","ar"===t.currentLang?null==(i=t.fieldsFilter("email"))?null:i.display_name_ar:null==(i=t.fieldsFilter("email"))?null:i.display_name_en)("inputId","email")("inputType",t.inputType.TEXT)("control",t.getControl("email"))("required",!!+(null==(o=t.fieldsFilter("email"))?null:o.required))}}function al(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",70),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.TEXT)("control",i.getControl(t.field))("optionLabel",t.details)}}function rl(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",70),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.PASSWORD)("control",i.getControl(t.field))("optionLabel",t.details)}}function cl(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",70),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.TEXTAREA)("control",i.getControl(t.field))("optionLabel",t.details)}}function dl(n,s){1&n&&e._UZ(0,"i",40)}function _l(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,E,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en)))," ")}}function ul(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.STRING_ONLY",e.VKq(6,E,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en)))," ")}}function pl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.NUMBER_ONLY",e.VKq(6,E,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en)))," ")}}const Le=function(n,s,t){return{field:n,minLength:s,fieldType:t}};function ml(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();let o;e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.MIN_LENGTH",e.kEZ(8,Le,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en),null==(o=i.ticketForm.get(t.field))||null==o.errors||null==o.errors.minlength?null:o.errors.minlength.requiredLength,e.lcZ(4,6,"")))," ")}}const Fe=function(n,s,t){return{field:n,maxLength:s,fieldType:t}};function gl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();let o;e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.MAX_LENGTH",e.kEZ(8,Fe,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en),null==(o=i.ticketForm.get(t.field))||null==o.errors||null==o.errors.maxlength?null:o.errors.maxlength.requiredLength,e.lcZ(4,6,"")))," ")}}const Ie=function(){return[]};function hl(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"label"),e._uU(2),e.YNc(3,dl,1,0,"i",71),e.qZA(),e._UZ(4,"p-dropdown",72),e.ALo(5,"translate"),e.ALo(6,"translate"),e.ALo(7,"translate"),e.YNc(8,_l,4,8,"div",56),e.YNc(9,ul,4,8,"div",56),e.YNc(10,pl,4,8,"div",56),e.YNc(11,ml,5,12,"div",56),e.YNc(12,gl,5,12,"div",56),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();let o,l,a,d,u;e.xp6(2),e.hij("","ar"===i.currentLang?t.display_name_ar:t.display_name_en," "),e.xp6(1),e.Q6J("ngIf",i.required(t.field)),e.xp6(1),e.s9C("emptyFilterMessage",e.lcZ(5,15,"emptyFilterMessage")),e.s9C("emptyMessage",e.lcZ(6,17,"emptyFilterMessage")),e.s9C("formControlName",t.field),e.s9C("optionLabel","ar"===i.currentLang?"title_ar":"title_en"),e.s9C("placeholder",e.lcZ(7,19,"Choose")),e.Q6J("filter",!0)("options",i.customLookups[t.field]?i.customLookups[t.field]:e.DdM(21,Ie))("styleClass","w-100"),e.xp6(4),e.Q6J("ngIf",(null==(o=i.ticketForm.get(t.field))?null:o.touched)&&(null==(o=i.ticketForm.get(t.field))||null==o.errors?null:o.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(l=i.ticketForm.get(t.field))?null:l.touched)&&(null==(l=i.ticketForm.get(t.field))?null:l.dirty)&&(null==(l=i.ticketForm.get(t.field))||null==l.errors?null:l.errors.stringOnly)),e.xp6(1),e.Q6J("ngIf",(null==(a=i.ticketForm.get(t.field))?null:a.touched)&&(null==(a=i.ticketForm.get(t.field))?null:a.dirty)&&(null==(a=i.ticketForm.get(t.field))||null==a.errors?null:a.errors.numberOnly)),e.xp6(1),e.Q6J("ngIf",(null==(d=i.ticketForm.get(t.field))?null:d.touched)&&(null==(d=i.ticketForm.get(t.field))?null:d.dirty)&&(null==(d=i.ticketForm.get(t.field))||null==d.errors?null:d.errors.minlength)),e.xp6(1),e.Q6J("ngIf",(null==(u=i.ticketForm.get(t.field))?null:u.touched)&&(null==(u=i.ticketForm.get(t.field))?null:u.dirty)&&(null==(u=i.ticketForm.get(t.field))||null==u.errors?null:u.errors.maxlength))}}function fl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,E,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en)))," ")}}function vl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.STRING_ONLY",e.VKq(6,E,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en)))," ")}}function Tl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.NUMBER_ONLY",e.VKq(6,E,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en)))," ")}}function xl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();let o;e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.MIN_LENGTH",e.kEZ(8,Le,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en),null==(o=i.ticketForm.get(t.field))||null==o.errors||null==o.errors.minlength?null:o.errors.minlength.requiredLength,e.lcZ(4,6,"")))," ")}}function bl(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();let o;e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.MAX_LENGTH",e.kEZ(8,Fe,e.lcZ(3,4,"ar"===i.currentLang?t.display_name_ar:t.display_name_en),null==(o=i.ticketForm.get(t.field))||null==o.errors||null==o.errors.maxlength?null:o.errors.maxlength.requiredLength,e.lcZ(4,6,"")))," ")}}function Cl(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"p-multiSelect",72),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,fl,4,8,"div",56),e.YNc(6,vl,4,8,"div",56),e.YNc(7,Tl,4,8,"div",56),e.YNc(8,xl,5,12,"div",56),e.YNc(9,bl,5,12,"div",56),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();let o,l,a,d,u,c;e.xp6(1),e.s9C("emptyFilterMessage",e.lcZ(2,13,"emptyFilterMessage")),e.s9C("emptyMessage",e.lcZ(3,15,"emptyFilterMessage")),e.s9C("formControlName",t.field),e.s9C("optionLabel","ar"===i.currentLang?"title_ar":"title_en"),e.s9C("placeholder",e.lcZ(4,17,"Choose")),e.Q6J("filter",!0)("options",null!==(o=i.customLookups[t.field])&&void 0!==o?o:e.DdM(19,Ie))("styleClass","form-control"),e.xp6(4),e.Q6J("ngIf",(null==(l=i.ticketForm.get(t.field))?null:l.touched)&&(null==(l=i.ticketForm.get(t.field))||null==l.errors?null:l.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(a=i.ticketForm.get(t.field))?null:a.touched)&&(null==(a=i.ticketForm.get(t.field))?null:a.dirty)&&(null==(a=i.ticketForm.get(t.field))||null==a.errors?null:a.errors.stringOnly)),e.xp6(1),e.Q6J("ngIf",(null==(d=i.ticketForm.get(t.field))?null:d.touched)&&(null==(d=i.ticketForm.get(t.field))?null:d.dirty)&&(null==(d=i.ticketForm.get(t.field))||null==d.errors?null:d.errors.numberOnly)),e.xp6(1),e.Q6J("ngIf",(null==(u=i.ticketForm.get(t.field))?null:u.touched)&&(null==(u=i.ticketForm.get(t.field))?null:u.dirty)&&(null==(u=i.ticketForm.get(t.field))||null==u.errors?null:u.errors.minlength)),e.xp6(1),e.Q6J("ngIf",(null==(c=i.ticketForm.get(t.field))?null:c.touched)&&(null==(c=i.ticketForm.get(t.field))?null:c.dirty)&&(null==(c=i.ticketForm.get(t.field))||null==c.errors?null:c.errors.maxlength))}}function kl(n,s){if(1&n&&(e.TgZ(0,"div",69),e.TgZ(1,"div",10),e.YNc(2,al,2,6,"ng-container",14),e.YNc(3,rl,2,6,"ng-container",14),e.YNc(4,cl,2,6,"ng-container",14),e.YNc(5,hl,13,22,"ng-container",14),e.YNc(6,Cl,10,20,"ng-container",14),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",!t.validation_json||"text"===(null==t.validation_json?null:t.validation_json.type)||"email"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","password"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","multipleTextField"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","dropdown"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","multiselect"===(null==t.validation_json?null:t.validation_json.type))}}function yl(n,s){if(1&n&&(e.ynx(0),e.YNc(1,kl,7,5,"div",68),e.BQk()),2&n){const t=s.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.showField(null==t?null:t.field))}}function Zl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-multipe-file-upload",73),e.NdJ("onAttachmentsChange",function(o){return e.CHM(t),e.oxw().onAttachmentsChange(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"GLOBAL.ATTACHMENTS")),e.xp6(2),e.Q6J("resetFiles",t.resetFiles)}}function Al(n,s){1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,E,e.lcZ(3,4,"GLOBAL.TERMS")))," "))}function Sl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",74),e.TgZ(1,"input",75),e.NdJ("change",function(o){return e.CHM(t),e.oxw().checkValue(o)}),e.qZA(),e.TgZ(2,"a",76),e.TgZ(3,"label",77),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"sup"),e._UZ(7,"i",40),e.qZA(),e.YNc(8,Al,4,8,"div",56),e.qZA()}if(2&n){const t=e.oxw();let i;e.xp6(2),e.s9C("href",t.themeService.SELF_SERVICE_TERMS_CONTENT,e.LSH),e.xp6(2),e.Oqu(e.lcZ(5,3,"GLOBAL.TERMS")),e.xp6(4),e.Q6J("ngIf",(null==(i=t.ticketForm.get("terms"))?null:i.touched)&&(null==(i=t.ticketForm.get("terms"))||null==i.errors?null:i.errors.required))}}function wl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-message",79),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf;return e.oxw().emitUserTickets(o)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.s9C("text",e.lcZ(1,1,"GLOBAL.USER_DUPLICATE_TICKETS"))}function Ll(n,s){if(1&n&&(e.ynx(0),e.YNc(1,wl,2,3,"p-message",78),e.BQk()),2&n){const t=s.ngIf;e.xp6(1),e.Q6J("ngIf",null==t||null==t.data?null:t.data.length)}}function Fl(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}let Il=(()=>{class n{constructor(t,i,o,l,a,d,u,c,m,h,_){this.configuredFieldsService=t,this.lookupService=i,this.translateService=o,this.defaultsService=l,this.themeService=a,this.ticketService=d,this.otpService=u,this.datePipe=c,this.ref=m,this.toastMessageService=h,this.amplitudeService=_,this.minDateAllowed=new Date("1900-1-1"),this.ticketForm=new r.cw({}),this.countries$=new C.y,this.regions$=new C.y,this.cities$=new C.y,this.ticketTypes$=new C.y,this.ticketTypes=[],this.idTypes$=new C.y,this.mainReasons$=new C.y,this.sectors$=new C.y,this.subReasons$=new C.y,this.userTickets$=new C.y,this.violationContent$=new C.y,this.hospitalField=null,this.birthDateField=null,this.resetFiles=!1,this.customLookups={},this.inputType=q.n,this.isLoading=!1,this.showViolation=!1,this.isViolationLoading=!1,this.nationalIdRequiredPattern="",this.nationalIdFieldType="",this.resetDOB=!1,this.OTP_Enabled=!1,this.isOTBLoading=!1,this.ticketAdded=new e.vpe,this.userTickets=new e.vpe,this.OTP$=new C.y,this.showMainReasonOthers=!1,this.timerInterval$=(0,ue.F)(1e3),this.times=60*Number(this.themeService.OTPExpirationTime),this.mobileVerified=!1,this.mobileValue="",this.violationError=!1,this.activeTicketTab=new e.vpe,this.filedsToBeAdded=[],this.subSubReasons=new C.y,this.subSubSubReasons=new C.y,this.showTermsPopup=!1,u.loggedUser.subscribe(v=>{this.currentUser=v}),this.initForm(),this.configuredFieldsService.getConfiguredFields().pipe((0,b.U)(v=>v.fields),(0,b.U)(v=>{this.ticketFields=v,v.forEach(p=>{var T,x,y;if(p.validation_json=p.validation_json?JSON.parse(p.validation_json):p.validation_json,this.ticketForm.controls[p.field]&&p.show_on_self_service)this.ticketForm.get(p.field).setValidators(p.required?r.kI.required:null),this.ticketForm.get(p.field).updateValueAndValidity();else{let k=[];p.is_migrated&&(this.filedsToBeAdded.push(p),this.ticketForm.contains(p.field)||this.ticketForm.addControl(p.field,new r.NI),p.validation_json&&(k=this.buildValidations(p.validation_json))),p.required&&p.show_on_self_service&&!!p.is_migrated&&k.push(r.kI.required),p.is_migrated&&(null===(T=this.ticketForm.get(p.field))||void 0===T||T.setValidators(k))}("dropdown"===(null===(x=null==p?void 0:p.validation_json)||void 0===x?void 0:x.type)||"multiselect"===(null===(y=null==p?void 0:p.validation_json)||void 0===y?void 0:y.type))&&p.show_on_self_service&&(p.is_system_lookup?this.configuredFieldsService.getSystemOptions(p.system_lookup_id).subscribe(k=>{this.customLookups[p.field]=k.data,this.customLookups[p.field].forEach(S=>(S.disabled=!S.active,S.id=`${S.id}`,S)),this.customLookups[p.field]=[...this.customLookups[p.field]]}):this.configuredFieldsService.getNewOptions(p.new_lookup_id).subscribe(k=>{this.customLookups[p.field]=k,this.customLookups[p.field].forEach(S=>(S.disabled=!S.active,S.id=`${S.id}`,S)),this.customLookups[p.field]=[...this.customLookups[p.field]]}))})})).subscribe(),this.initForm()}ngOnChanges(t){var i,o;if(t.otpFromSearch.currentValue){let l=t.otpFromSearch.currentValue;this.mobileVerified=l.mobileVerified,this.mobileValue.replace("966",""),this.mobileValue=l.mobile_number,null===(i=this.ticketForm.get("mobile"))||void 0===i||i.patchValue(l.mobile_number),null===(o=this.ticketForm.get("mobile"))||void 0===o||o.updateValueAndValidity(),this.ref.detectChanges()}}get currentLang(){return this.translateService.currentLang}ngOnInit(){this.initLookups(),this.registerFormControlListeners()}initForm(){var t,i,o,l,a,d;this.OTP_Enabled=this.themeService.OTPEnabled,this.ticketForm=new r.cw({ticket_type_id:new r.NI("",[r.kI.required]),main_reason_id:new r.NI("",[r.kI.required]),hospital_id:new r.NI(""),sub_reason_id:new r.NI(""),sub_sub_reason_id:new r.NI(""),sub_sub_sub_reason_id:new r.NI(""),details:new r.NI("",[r.kI.required,r.kI.minLength(this.defaultsService.detailsMinLength),r.kI.maxLength(this.themeService.MIN_CHARS_ON_DETAILS)]),main_reason_other:new r.NI(""),files:new r.NI([]),OTP_Code:new r.NI("")}),this.themeService.SELF_SERVICE_SHOW_TERMS&&this.ticketForm.addControl("terms",new r.NI("",[r.kI.required])),this.ticketForm.addControl("name",new r.NI(null!==(i=null===(t=this.currentUser)||void 0===t?void 0:t.name)&&void 0!==i?i:"",this.currentUser?null:r.kI.required)),this.ticketForm.addControl("national_id_type_id",new r.NI("",this.currentUser?null:r.kI.required)),this.ticketForm.addControl("national_id",new r.NI(null!==(l=null===(o=this.currentUser)||void 0===o?void 0:o.national_id)&&void 0!==l?l:"",this.currentUser?null:r.kI.required)),this.ticketForm.addControl("country_id",new r.NI),this.ticketForm.addControl("region_id",new r.NI),this.ticketForm.addControl("city_id",new r.NI),this.ticketForm.addControl("gender",new r.NI),this.ticketForm.addControl("email",new r.NI),this.ticketForm.addControl("mobile",new r.NI(null!==(d=null===(a=this.currentUser)||void 0===a?void 0:a.mobile)&&void 0!==d?d:"",this.currentUser?null:[r.kI.required])),this.otpService.userInfo.subscribe(u=>{u&&(this.ticketForm.patchValue({birthdate:u.birthdate,national_id_type_id:u.national_id_type_id,national_id:u.national_id,country_id:u.country_id,region_id:u.region_id,city_id:u.city_id,name:u.name,id_endDate:u.id_endDate}),this.ticketForm.updateValueAndValidity(),this.ref.detectChanges())})}initLookups(t){this.ticketForm.reset(),this.ticketForm.markAsUntouched(),this.idTypes$=this.lookupService.getNationalIDTypes().pipe((0,b.U)(i=>i.data)),this.countries$=this.lookupService.getCountries().pipe((0,b.U)(i=>i.data),(0,J.b)(i=>{var o,l;if(!t){const a=i.find(d=>d.is_default);a?null===(o=this.ticketForm.get("country_id"))||void 0===o||o.patchValue(a.id):null===(l=this.ticketForm.get("country_id"))||void 0===l||l.patchValue(i[0].id)}})),this.ticketTypes$=this.lookupService.getTicketTypes().pipe((0,b.U)(i=>i.data),(0,J.b)(i=>{var o,l,a,d;const u=null===(o=i.filter(c=>!!c.default)[0])||void 0===o?void 0:o.id;return this.ticketTypes=i,null===(l=this.ticketForm.get("ticket_type_id"))||void 0===l||l.setValue(u?null===(a=i.filter(c=>!!c.default)[0])||void 0===a?void 0:a.id:null===(d=i[0])||void 0===d?void 0:d.id),i})),this.ticketTypes$.subscribe(),this.regions$=this.lookupService.getRegionsByCountryID(),this.cities$=this.lookupService.getCities()}registerFormControlListeners(){var t,i,o,l,a,d,u;this.fillForm(this.currentUser),null===(t=this.ticketForm.get("national_id_type_id"))||void 0===t||t.valueChanges.subscribe(c=>{var m,h,_;const v=this.themeService.NAFATH_ENABLED?[]:z.NF[c];null===(m=this.ticketForm.get("national_id"))||void 0===m||m.setValidators(v),this.nationalIdRequiredPattern=z.NT[c],this.nationalIdFieldType=z.mE[c],null===(h=this.ticketForm.get("national_id"))||void 0===h||h.updateValueAndValidity(),this.currentUser||null===(_=this.ticketForm.get("national_id"))||void 0===_||_.patchValue("")}),null===(i=this.ticketForm.get("country_id"))||void 0===i||i.valueChanges.subscribe(c=>{var m,h;null===(m=this.ticketForm.get("region_id"))||void 0===m||m.reset(),null===(h=this.ticketForm.get("city_id"))||void 0===h||h.reset(),this.regions$=this.lookupService.getRegionsByCountryID(c).pipe()}),null===(o=this.ticketForm.get("region_id"))||void 0===o||o.valueChanges.subscribe(c=>{var m;null===(m=this.ticketForm.get("city_id"))||void 0===m||m.reset(),this.cities$=this.lookupService.getCities(c).pipe()}),this.ticketForm.get("ticket_type_id").valueChanges.subscribe(c=>{var m,h,_,v,p;null===(m=this.ticketForm.get("main_reason_id"))||void 0===m||m.reset(),null===(h=this.ticketForm.get("sub_reason_id"))||void 0===h||h.reset(),null===(_=this.ticketForm.get("hospital_id"))||void 0===_||_.reset(),null===(v=this.ticketForm.get("sub_sub_reason_id"))||void 0===v||v.reset(),null===(p=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===p||p.reset(),this.ref.detectChanges();const T=this.ticketTypes.filter(x=>x.has_integration)[0];T&&(c===T.id?(this.ticketForm.addControl("fine_number",new r.NI("",[r.kI.required])),this.showViolation=!0):(this.ticketForm.removeControl("fine_number"),this.showViolation=!1)),c&&(this.mainReasons$=this.lookupService.getMainReasons(c).pipe())}),this.ticketForm.get("main_reason_id").valueChanges.subscribe(c=>{this.mainReasons$.subscribe(m=>{var h,_,v,p;if(c){const T=m.filter(x=>x.id==c);this.showMainReasonOthers=!!T[0].required_other,null===(h=this.ticketForm.get("sub_reason_id"))||void 0===h||h.reset(),null===(_=this.ticketForm.get("hospital_id"))||void 0===_||_.reset(),null===(v=this.ticketForm.get("sub_sub_reason_id"))||void 0===v||v.reset(),null===(p=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===p||p.reset(),this.ref.detectChanges(),this.getSmimilarTickets(),this.subReasons$=this.lookupService.getSubReasons(c).pipe(),this.sectors$=this.lookupService.getSectors(c).pipe((0,b.U)(x=>x.data),(0,J.b)(x=>{}))}})}),null===(l=this.ticketForm.get("sub_reason_id"))||void 0===l||l.valueChanges.subscribe(c=>{var m,h;this.getSmimilarTickets(),sessionStorage.setItem("SimilarTickets",JSON.stringify({"main_reason_ids[]":this.ticketForm.value.main_reason_id,"main_sub_reason_ids[]":c,ticket_type_id:this.ticketForm.value.ticket_type_id,national_id:this.ticketForm.value.national_id,mobile_number:this.ticketForm.value.mobile})),c&&(this.subSubReasons=this.lookupService.getAllWithoutPaging(c).pipe()),null===(m=this.ticketForm.get("sub_sub_reason_id"))||void 0===m||m.reset(),null===(h=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===h||h.reset()}),null===(a=this.ticketForm.get("sub_sub_reason_id"))||void 0===a||a.valueChanges.subscribe(c=>{var m;c&&(null===(m=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===m||m.reset(),this.subSubSubReasons=this.lookupService.getAllSubSubSubReasonsWithoutPaging(c).pipe())}),null===(d=this.ticketForm.get("national_id"))||void 0===d||d.valueChanges.subscribe(c=>{this.getSmimilarTickets()}),null===(u=this.ticketForm.get("mobile"))||void 0===u||u.valueChanges.subscribe(c=>{this.getSmimilarTickets()})}getSmimilarTickets(){this.currentUser?this.ticketForm.value.main_reason_id&&(this.userTickets$=this.ticketService.getClientTickets({"main_reason_ids[]":this.ticketForm.value.main_reason_id,ticket_type_id:this.ticketForm.value.ticket_type_id,national_id:this.ticketForm.value.national_id,mobile_number:this.ticketForm.value.mobile}).pipe((0,b.U)(t=>t))):this.ticketForm.value.national_id&&this.ticketForm.value.mobile&&this.ticketForm.value.main_reason_id&&(this.OTP_Enabled&&this.mobileVerified||!this.OTP_Enabled)&&(this.userTickets$=this.ticketService.getClientTickets({"main_reason_ids[]":this.ticketForm.value.main_reason_id,ticket_type_id:this.ticketForm.value.ticket_type_id,national_id:this.ticketForm.value.national_id,mobile_number:this.ticketForm.value.mobile}).pipe((0,b.U)(t=>t)))}getControl(t){return this.ticketForm.get(t)}getSelectLabel(t){return`${t}${this.currentLang}`}getHospitalDisplayName(){return this.hospitalField[`display_name_${this.currentLang}`]}onAttachmentsChange(t){var i;null===(i=this.ticketForm.get("files"))||void 0===i||i.patchValue([...t])}validateFrom(){return!this.ticketForm.valid||this.isLoading}submitTicket(){if(this.ticketForm.valid){this.isLoading=!0;const t=this.cleanObject(this.ticketForm.value);t.birthdate&&(t.birthdate=`${this.datePipe.transform(new Date(t.birthdate),"yyyy-MM-dd")}`);const i=new FormData;Object.keys(t).forEach(o=>{"files"===o?t.files&&t.files.forEach(l=>{i.append("files[]",l)}):(""!=t[o]||null!=t[o])&&i.append(o,t[o])}),setTimeout(()=>{this.resetFiles=!0,setTimeout(()=>{this.resetFiles=!1},0)},0),this.ticketService.addTicket(i).subscribe(o=>{var l,a,d,u;this.amplitudeService.logEvent("SELF_SERVICE_ADD_NEW_TICKET"),this.resetAddForm({country_id:t.country_id,region_id:t.region_id,city_id:t.city_id,name:t.name,id_endDate:t.id_endDate,mobile:t.mobile,national_id_type_id:t.national_id_type_id,national_id:t.national_id,birthdate:t.birthdate,email:t.email,ticket_type_id:(null===(l=this.ticketTypes.filter(c=>!!c.default)[0])||void 0===l?void 0:l.id)?null===(a=this.ticketTypes.filter(c=>!!c.default)[0])||void 0===a?void 0:a.id:null===(d=this.ticketTypes[0])||void 0===d?void 0:d.id}),localStorage.setItem("authData",JSON.stringify({mobile:t.mobile,national_id_type_id:t.national_id_type_id,national_id:t.national_id})),this.isLoading=!1,this.toastMessageService.showSuccessMessage("TOAST.SUCCESS.TICKET_SUBMIT.MESSAGE"),this.ticketAdded.emit({ticket_id:o.sequence_number,mobile_number:null===(u=null==o?void 0:o.client)||void 0===u?void 0:u.mobile}),this.userTickets$=new C.y,this.currentUser&&this.otpService.updateUserTickets.next(o.id)},o=>{this.isLoading=!1;let l="";o.error.errors?"object"==typeof o.error.errors?o.error.errors[0]&&"string"==typeof o.error.errors[0]?o.errors.forEach(a=>{l+=a+"\n"}):"object"==typeof o.error.errors&&!o.error.errors[0]&&Object.keys(o.error.errors).forEach(a=>{o.error.errors[a]instanceof Array&&o.error.errors[a].forEach(d=>{l=l+" "+d})}):o.error.errors?l=o.error.message:Object.keys(o.error).forEach(a=>{o[a]instanceof Array&&o[a].forEach(d=>{l=l+" "+d})}):l=o.error.message,this.toastMessageService.showErrorMessage("TOAST.ERROR.TICKET_SUBMIT.MESSAGE",[l])})}else Object.keys(this.ticketForm.controls).forEach(t=>{var i,o,l,a;null===(i=this.ticketForm.get(t))||void 0===i||i.markAllAsTouched(),null===(o=this.ticketForm.get(t))||void 0===o||o.markAsDirty(),null===(l=this.ticketForm.get(t))||void 0===l||l.markAsPristine(),(null===(a=this.ticketForm.get(t))||void 0===a?void 0:a.valid)||console.log(t)}),window.scrollTo({top:0,behavior:"smooth"})}resetAddForm(t){var i,o,l,a,d;this.amplitudeService.logEvent("SELF_SERVICE_RESET_ADD_TICKET_FORM"),null===(i=this.ticketForm.get("main_reason_id"))||void 0===i||i.reset(),null===(o=this.ticketForm.get("sub_reason_id"))||void 0===o||o.reset(),null===(l=this.ticketForm.get("sub_sub_reason_id"))||void 0===l||l.reset(),null===(a=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===a||a.reset(),null===(d=this.ticketForm.get("hospital_id"))||void 0===d||d.reset(),this.mainReasons$=(0,A.of)([]),this.sectors$=(0,A.of)([]),this.subReasons$=(0,A.of)([]),this.showMainReasonOthers=!1,this.initLookups(!0),t?this.fillForm(t):this.mobileVerified?(this.ticketForm.reset({mobile:this.otpUserInfo.mobile,name:this.otpUserInfo.name,national_id:this.otpUserInfo.national_id,national_id_type_id:this.otpUserInfo.national_id_type_id}),this.mobileValue=this.otpUserInfo.mobile):(this.ticketForm.reset(),this.ref.detectChanges()),this.ref.detectChanges(),this.resetDOB=!0}emitUserTickets(t){this.userTickets.emit(t),this.amplitudeService.logEvent("SELF_SERVICE_SHOW_SIMILAR_TICKET"),this.otpService.activeTabIndex.next(1),window.scroll({top:0})}searchViolations(){this.violationError=!1,this.isViolationLoading=!0,this.amplitudeService.logEvent("SELF_SERVICE_SEARCH_FOR_VIOLATIONS"),this.violationContent$=this.ticketService.getViolations(this.ticketForm.value.national_id?this.ticketForm.value.national_id:this.currentUser.national_id,this.ticketForm.value.fine_number).pipe((0,b.U)(t=>t.data),(0,Ce.K)(t=>(this.isViolationLoading=!1,this.violationError=!0,(0,A.of)(t.error.errors[0][0]))),(0,H.x)(()=>{this.isViolationLoading=!1}))}getOtpCode(){var t;this.isOTBLoading=!0,this.amplitudeService.logEvent("SELF_SERVICE_GET_MOBILE_OTP_CODE"),this.otpService.sendOtp({mobile_number:null===(t=this.ticketForm.get("mobile"))||void 0===t?void 0:t.value,section:"create-ticket"}).pipe((0,b.U)(i=>i.data),(0,H.x)(()=>{this.isOTBLoading=!1})).subscribe(i=>{this.timerInterval$.pipe((0,_e.q)(this.times)).subscribe(o=>{this.countDown=this.times-o,1===this.countDown&&(this.countDown=null)})},i=>{this.isOTBLoading=!1,this.toastMessageService.showErrorMessage("error",i.error.errors[0])})}verifyOtp(){var t,i;this.amplitudeService.logEvent("SELF_SERVICE_VERIFY_MOBILE_OTP_CODE"),this.isOTBLoading=!0,this.otpService.verifyOtp({mobile_number:null===(t=this.ticketForm.get("mobile"))||void 0===t?void 0:t.value,otp_code:null===(i=this.ticketForm.get("OTP_Code"))||void 0===i?void 0:i.value}).pipe((0,H.x)(()=>{this.isOTBLoading=!1})).subscribe(o=>{var l;this.otpService.userInfo.next(o.data),localStorage.setItem("auth",o.auth),this.otpUserInfo=o.data,this.otpService.OTBUserActivated.next(null===(l=this.ticketForm.get("mobile"))||void 0===l?void 0:l.value),this.toastMessageService.showSuccessMessage("Mobile_Verified"),this.mobileVerified=!0},o=>{var l;return this.isOTBLoading=!1,null===(l=this.ticketForm.get("OTP_Code"))||void 0===l||l.patchValue(""),this.toastMessageService.showErrorMessage("error",o.error.errors[0]),(0,A.of)(o)})}fillForm(t){var i,o,l,a,d,u;this.ticketForm.reset(),null===(i=this.ticketForm.get("ticket_type_id"))||void 0===i||i.setValue((null===(o=this.ticketTypes.filter(c=>!!c.default)[0])||void 0===o?void 0:o.id)?null===(l=this.ticketTypes.filter(c=>!!c.default)[0])||void 0===l?void 0:l.id:null===(a=this.ticketTypes[0])||void 0===a?void 0:a.id),null===(d=this.ticketForm.get("mobile"))||void 0===d||d.patchValue(null==t?void 0:t.mobile),null===(u=this.ticketForm.get("mobile"))||void 0===u||u.updateValueAndValidity(),this.mobileValue=null==t?void 0:t.mobile,setTimeout(()=>{var c,m,h;t&&this.ticketForm.patchValue({birthdate:t.birthdate,national_id_type_id:t.national_id_type_id,national_id:t.national_id,country_id:t.country_id,region_id:t.region_id,city_id:t.city_id,name:t.name,id_endDate:t.id_endDate,ticket_type_id:(null===(c=this.ticketTypes.filter(_=>!!_.default)[0])||void 0===c?void 0:c.id)?null===(m=this.ticketTypes.filter(_=>!!_.default)[0])||void 0===m?void 0:m.id:null===(h=this.ticketTypes[0])||void 0===h?void 0:h.id,main_reason_id:"",sub_reason_id:"",sub_sub_reason_id:"",sub_sub_sub_reason_id:"",details:"",main_reason_other:"",files:"",OTP_Code:"",email:t.email}),this.ticketForm.updateValueAndValidity(),this.ref.detectChanges()},300),this.ref.detectChanges()}buildValidations(t){const i=[];if(t)switch(t.type){case"email":t.max_length&&i.push(r.kI.maxLength(t.max_length)),t.min_length&&i.push(r.kI.minLength(t.min_length)),i.push(this.EmailValidation);break;case"password":t.max_length&&i.push(r.kI.maxLength(t.max_length)),t.min_length&&i.push(r.kI.minLength(t.min_length)),i.push(this.passwordPattern);break;case"text":case"multipleTextField":t.max_length&&i.push(r.kI.maxLength(t.max_length)),t.min_length&&i.push(r.kI.minLength(t.min_length))}return i}EmailValidation(t){const i=t.value;return!/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(i)&&i?{email:!0}:null}passwordPattern(t){return/(?=(.*[0-9]))(?=.*[\!@#$%^&*()\\[\]{}\-_+=~`|:;"'<>,./?])(?=.*[a-z])(?=(.*[A-Z]))(?=(.*)).{8,}/gm.test(t.value)?null:{notValidPassword:!0}}required(t){var i;return!!this.ticketForm.get(t)&&(null===(i=this.ticketForm.get(t))||void 0===i?void 0:i.hasValidator(r.kI.required))}showField(t){var i,o,l,a,d,u,c,m,h;const _=this.ticketFields.filter(v=>v.field===t)[0];if((null==_?void 0:_.show_on_self_service)&&_.required_if){const v=this.ticketFields.find(p=>p.id===_.constrain_field_id);if(v){const p=null===(i=this.ticketForm.get(v.field))||void 0===i?void 0:i.value,T=[],x=(k,S)=>{let U=!1;for(let re of k)if(U=S.indexOf(re)>-1,U)break;return U};null===(o=_.constrain_field_option_ids)||void 0===o||o.forEach(k=>T.push(+k));const y=_.constrain_field_option_ids.indexOf(p)>-1||p&&p[0]&&x(T,p)||p&&!p[0]&&x(T,[p]);if(y){const k=this.buildValidations(_.validation_json);_.required_with_constrain&&k.push(r.kI.required),null===(l=this.ticketForm.get(_.field))||void 0===l||l.setValidators(k),"color"===_.validation_json.type&&!(null===(a=this.ticketForm.get(_.field))||void 0===a?void 0:a.value)&&(null===(d=this.ticketForm.get(_.field))||void 0===d||d.setValue("#ffffff")),null===(u=this.ticketForm.get(_.field))||void 0===u||u.updateValueAndValidity()}else null===(c=this.ticketForm.get(_.field))||void 0===c||c.clearValidators(),null===(m=this.ticketForm.get(_.field))||void 0===m||m.setValue(null),null===(h=this.ticketForm.get(_.field))||void 0===h||h.updateValueAndValidity();return y}}return null==_?void 0:_.show_on_self_service}cleanObject(t){const i=Object.getOwnPropertyNames(t);for(let o=0;o<i.length;o++){const l=i[o];(""===t[l]||null===t[l]||"null"===t[l]||t[l]==={}||void 0===t[l])&&delete t[l]}return t}fieldsFilter(t){var i;return null===(i=this.ticketFields)||void 0===i?void 0:i.filter(o=>o.field===t)[0]}checkValue(t){var i,o;t.target.checked?null===(i=this.ticketForm.get("terms"))||void 0===i||i.setValue("1"):null===(o=this.ticketForm.get("terms"))||void 0===o||o.setValue(null)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne),e.Y36(te.W),e.Y36(Z.sK),e.Y36(se.p),e.Y36(O.f),e.Y36(M.d),e.Y36(N.j),e.Y36(f.uU),e.Y36(e.sBO),e.Y36(Q.D),e.Y36(K.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-contact-form"]],inputs:{otpFromSearch:"otpFromSearch"},outputs:{ticketAdded:"ticketAdded",userTickets:"userTickets",activeTicketTab:"activeTicketTab"},features:[e.TTD],decls:45,vars:47,consts:[[1,"card","tab-card"],[1,"row","mt-3"],["class","col-md-4",4,"ngIf"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup"],[1,"row"],["class","col-md-6",4,"ngIf"],["class","col-md-12",3,"text-red","innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[3,"label","inputId","inputType","control","required"],["class","col-sm-12",4,"ngIf"],["class","col-sm-12 form-group",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],[1,"col-xs-12","d-flex","justify-content-end"],[1,"btn","btn-success","margin-r-10","mx-1","main-themed",3,"click"],[3,"showSpinner"],[1,"btn","btn-secondary",3,"click"],[1,"col-md-4"],[1,"card-title","line","main-themed-color"],[1,"card-body","line"],[1,"table","contact-table"],[1,"main-themed-color",3,"href"],[1,"col-md-6"],[3,"Form","label","inputId","inputType","control"],[3,"mobileValue","disabled","label","inputId","inputType","control","requiredPattern"],["type","button","class","btn btn-link float-start mt-1",3,"disabled","click",4,"ngIf"],["class","row p-2",4,"ngIf"],["class","row d-flex justify-content-center align-items-center","style","clear: both",4,"ngIf"],["type","button",1,"btn","btn-link","float-start","mt-1",3,"disabled","click"],[1,"row","p-2"],[1,"row","d-flex","justify-content-center","align-items-center",2,"clear","both"],[1,"col-8"],["placeholder","X X X X X X","id","otp_code","formControlName","OTP_Code",1,"form-control"],[1,"col-4"],["type","button","class","btn w-100 btn-success float-start main-themed mt-1",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","w-100","btn-success","float-start","main-themed","mt-1",3,"disabled","click"],["for","nationalIdType"],[1,"fa","fa-asterisk","required"],["formControlName","national_id_type_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder","disabled",4,"ngIf","ngIfElse"],["showSkeleton",""],["formControlName","national_id_type_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder","disabled"],[3,"disabled","label","inputId","inputType","control","requiredPattern","placeholder","fieldType"],["lang","ar",3,"required","label","hijri","formControl"],["for","inputGender",1,"col-sm-4","control-label"],[2,"display","flex","justify-content","space-around"],[1,"radio","radio-inline"],["formControlName","gender","type","radio","value","male"],["formControlName","gender","type","radio","value","female"],[1,"text-red","fa","fa-asterisk","text-xs"],[3,"required","label","inputId","inputType","control","sourceObs$","optionLabel","optionValue"],[3,"label","inputId","inputType","control","sourceObs$","optionLabel","optionValue","required"],[1,"col-md-8","mx-0","ps-md-0"],["id","'fine_number'","formControlName","fine_number",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"col-md-4","justify-content-center"],[1,"btn","btn-success","margin-r-10","main-themed","w-100",3,"disabled","click"],[1,"invalid-feedback"],[1,"col-md-12",3,"innerHTML"],[3,"required","label","inputId","inputType","control"],["for","nationalIdswType"],["formControlName","sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder",4,"ngIf","ngIfElse"],["formControlName","sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder"],["formControlName","sub_sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder",4,"ngIf","ngIfElse"],["formControlName","sub_sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder"],[3,"label","ignoreTranslation","inputId","inputType","control","sourceObs$","optionLabel","optionValue","required"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[3,"required","label","inputId","inputType","control","optionLabel"],["class","fa fa-asterisk required",4,"ngIf"],["optionValue","id","optionDisabled","disabled",3,"emptyFilterMessage","emptyMessage","filter","options","styleClass","formControlName","optionLabel","placeholder"],[3,"resetFiles","onAttachmentsChange"],[1,"col-sm-12","form-group"],["type","checkbox","formControlName","terms",1,"form-check-input",2,"margin-inline-end","10px",3,"change"],["target","_blank",3,"href"],[2,"cursor","pointer"],["closable","false","severity","info",3,"text","click",4,"ngIf"],["closable","false","severity","info",3,"text","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,Co,33,20,"div",2),e.TgZ(3,"div"),e._UZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"form",5),e.TgZ(7,"div",6),e.YNc(8,ko,2,5,"div",7),e.YNc(9,Fo,5,10,"div",7),e.YNc(10,Eo,10,7,"div",7),e.YNc(11,No,2,8,"div",7),e.YNc(12,qo,2,4,"div",7),e.YNc(13,Mo,3,6,"div",7),e.YNc(14,Jo,16,10,"div",7),e.YNc(15,Uo,2,8,"div",7),e.YNc(16,Qo,2,8,"div",7),e.YNc(17,Vo,2,8,"div",7),e.YNc(18,Ro,2,8,"div",7),e.YNc(19,Ho,16,14,"div",7),e.YNc(20,$o,1,3,"div",8),e.ALo(21,"async"),e.YNc(22,jo,2,8,"div",7),e.YNc(23,Go,2,5,"div",7),e.YNc(24,Ko,2,8,"div",7),e.YNc(25,el,8,6,"div",7),e.YNc(26,ol,8,6,"div",7),e.YNc(27,ll,3,9,"div",7),e.YNc(28,sl,3,5,"div",7),e.YNc(29,yl,2,1,"ng-container",9),e.TgZ(30,"div",10),e._UZ(31,"hollat-generic-input",11),e.qZA(),e.YNc(32,Zl,5,4,"div",12),e.YNc(33,Sl,9,5,"div",13),e.YNc(34,Ll,2,1,"ng-container",14),e.ALo(35,"async"),e._UZ(36,"div",15),e.ALo(37,"translate"),e.TgZ(38,"span",16),e.TgZ(39,"button",17),e.NdJ("click",function(){return i.submitTicket()}),e.YNc(40,Fl,3,3,"span",14),e._UZ(41,"hollat-spinner",18),e.qZA(),e.TgZ(42,"button",19),e.NdJ("click",function(){return i.resetAddForm()}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let o,l,a,d,u,c,m,h,_,v,p,T,x,y;e.xp6(2),e.Q6J("ngIf",i.themeService.ContactUs_Display),e.xp6(1),e.ekj("col-auto",!i.themeService.ContactUs_Display)("col-md-8",i.themeService.ContactUs_Display),e.xp6(3),e.Q6J("formGroup",i.ticketForm),e.xp6(2),e.Q6J("ngIf",!i.currentUser),e.xp6(1),e.Q6J("ngIf",!i.currentUser&&i.getControl("mobile")),e.xp6(1),e.Q6J("ngIf",!i.currentUser&&i.getControl("national_id_type_id")),e.xp6(1),e.Q6J("ngIf",!i.currentUser&&i.getControl("national_id_type_id")),e.xp6(1),e.Q6J("ngIf",i.getControl("id_endDate")&&(null==(o=i.fieldsFilter("id_endDate"))?null:o.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("birthdate")&&(null==(l=i.fieldsFilter("birthdate"))?null:l.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("gender")&&(null==(a=i.fieldsFilter("gender"))?null:a.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("country_id")&&(null==(d=i.fieldsFilter("country_id"))?null:d.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("region_id")&&(null==(u=i.fieldsFilter("region_id"))?null:u.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("city_id")&&(null==(c=i.fieldsFilter("city_id"))?null:c.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("ticket_type_id")&&(null==(m=i.fieldsFilter("ticket_type_id"))?null:m.show_on_self_service)),e.xp6(1),e.Q6J("ngIf",i.showViolation),e.xp6(1),e.Q6J("ngIf",e.lcZ(21,39,i.violationContent$)),e.xp6(2),e.Q6J("ngIf",null==(h=i.fieldsFilter("main_reason_id"))?null:h.show_on_self_service),e.xp6(1),e.Q6J("ngIf",i.showMainReasonOthers),e.xp6(1),e.Q6J("ngIf",null==(_=i.fieldsFilter("sub_reason_id"))?null:_.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(v=i.fieldsFilter("sub_sub_reason_id"))?null:v.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(p=i.fieldsFilter("sub_sub_sub_reason_id"))?null:p.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(T=i.fieldsFilter("hospital_id"))?null:T.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(x=i.fieldsFilter("email"))?null:x.show_on_self_service),e.xp6(1),e.Q6J("ngForOf",i.filedsToBeAdded),e.xp6(2),e.Q6J("label","GLOBAL.DETAILS")("inputId","details")("inputType",i.inputType.TEXTAREA)("control",i.getControl("details"))("required",!!+(null==(y=i.fieldsFilter("details"))?null:y.required)),e.xp6(1),e.Q6J("ngIf",i.themeService.uploadFilesEnabled),e.xp6(1),e.Q6J("ngIf",i.themeService.SELF_SERVICE_SHOW_TERMS),e.xp6(1),e.Q6J("ngIf",e.lcZ(35,41,i.userTickets$)),e.xp6(2),e.Q6J("innerHTML",e.lcZ(37,43,"GLOBAL.REQUIRED_HINT"),e.oJD),e.xp6(4),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("showSpinner",i.isLoading),e.xp6(2),e.Oqu(e.lcZ(44,45,"GLOBAL.RESET"))}},directives:[f.O5,r._Y,r.JL,r.sg,f.sg,R.V,V.P,r.Fj,r.JJ,r.u,ge.Lt,he.J,pe.Z,r.Q7,r.oH,r._,le,ae,r.Wl,bo.q],pipes:[f.Ov,Z.X$],styles:[".tab-card[_ngcontent-%COMP%]{background-color:#f7f7f7}.tab-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border:unset;border-radius:20px;border-bottom:1px solid #f4f4f4;background-color:transparent}.text-red[_ngcontent-%COMP%]{color:red}[class*=col-][_ngcontent-%COMP%]{margin-bottom:.25rem}p-message[_ngcontent-%COMP%]{cursor:pointer}.contact-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;min-width:100px}"]}),n})(),Ol=(()=>{class n{constructor(t){this.httpClient=t}getKnowledgeBase(t,i){return this.httpClient.get(""==i?`${w.N.baseAPIURL}/api/knowledge-base-without-auth?page=${t}`:`${w.N.baseAPIURL}/api/knowledge-base-without-auth?page=${t}&knowledge_base_title=${i}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ie.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const El=["paginator"];function Nl(n,s){if(1&n&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Oqu(t[i.getLocalizedTitle("title")])}}function ql(n,s){if(1&n&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Oqu(t[i.getLocalizedTitle("title")])}}function Ml(n,s){if(1&n&&(e.TgZ(0,"p-accordionTab",22),e.YNc(1,ql,2,1,"ng-template",23),e._UZ(2,"span",24),e.qZA()),2&n){const t=s.$implicit,i=e.oxw(4);e.MGl("id","toggle-",t.id,""),e.xp6(2),e.Q6J("innerHTML",t[i.getLocalizedTitle("details")],e.oJD)}}function Dl(n,s){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,Nl,2,1,"div",18),e.TgZ(2,"p-accordion",19),e.YNc(3,Ml,3,2,"p-accordionTab",20),e.qZA(),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.knowledge_bases.length),e.xp6(1),e.Q6J("expandIcon","")("collapseIcon",""),e.xp6(1),e.Q6J("ngForOf",t.knowledge_bases)}}function Jl(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Dl,4,4,"div",16),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t.data)}}function Ul(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Jl,2,1,"ng-container",12),e.qZA()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(20);e.xp6(1),e.Q6J("ngIf",t.data.length)("ngIfElse",i)}}function Ql(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-paginator",26,27),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw().changePage(o.page+1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("dir","ltr")("rows",10)("totalRecords",t.totalItems)}}function Vl(n,s){1&n&&(e.TgZ(0,"div",4),e.TgZ(1,"div",28),e.TgZ(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"EMPTY_STATE.KNOWLEDGE_BASE")))}function Rl(n,s){1&n&&(e.TgZ(0,"div",29),e._UZ(1,"hollat-spinner",30),e.qZA()),2&n&&(e.xp6(1),e.Q6J("showSpinner",!0)("spinnerWidth",150)("spinnerHeight",150)("customSpinner",!0))}let Pl=(()=>{class n{constructor(t,i,o){this.translateService=t,this.knowledgeBaseService=i,this.amplitudeService=o,this.keyWord="",this.inputType=q.n,this.searchForm=new r.cw({keyword:new r.NI("")}),this.totalItems=0,this.knowledgeBase$=new C.y}ngOnInit(){this.load(1,"")}getControl(t){return this.searchForm.get(t)}search(){this.load(1,this.searchForm.value.keyword)}getLocale(){return this.translateService.currentLang}load(t,i){this.amplitudeService.logEvent("SELF_SERVICE_SHOW_KNOWLEDGE_BASE",{search:i}),this.knowledgeBase$=this.knowledgeBaseService.getKnowledgeBase(t,i).pipe((0,J.b)(o=>{var l;null===(l=this.paginator)||void 0===l||l.changePage(o.meta.current_page),this.totalItems=o.meta.total}))}changePage(t){this.load(t,this.searchForm.value.keyword)}getLocalizedTitle(t){return`${t}_${this.translateService.currentLang}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.sK),e.Y36(Ol),e.Y36(K.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-knowledge-base"]],viewQuery:function(t,i){if(1&t&&e.Gf(El,7),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first)}},decls:23,vars:16,consts:[[1,"card","tab-card","bg-gray"],[1,"form-horizontal","pt-3"],[1,"form-group","px-4","py-1"],[1,"col-sm-12"],[1,"row"],[1,"col-md-3","col-12","d-flex","align-items-center"],[1,"m-0","main-themed-color"],[1,"col-md-6","col-9"],[3,"hideLabel","label","inputId","inputType","control"],[1,"col-3"],["type","submit",1,"btn","btn-success","w-100","main-themed",3,"click"],[1,"header-break"],[4,"ngIf","ngIfElse"],[3,"dir","rows","totalRecords","onPageChange",4,"ngIf"],["showEmptyState",""],["loading",""],["class","knBase w-100",4,"ngFor","ngForOf"],[1,"knBase","w-100"],["class","page-header",4,"ngIf"],[3,"expandIcon","collapseIcon"],[3,"id",4,"ngFor","ngForOf"],[1,"page-header"],[3,"id"],["pTemplate","header"],[1,"text-break",3,"innerHTML"],[1,"main-themed-color"],[3,"dir","rows","totalRecords","onPageChange"],["paginator",""],[1,"col-xs-12","no-results","centeralize"],[1,"w-100","d-flex","justify-content-center"],[3,"showSpinner","spinnerWidth","spinnerHeight","customSpinner"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h5",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"hollat-generic-input",8),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return i.search()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"hr",11),e.YNc(16,Ul,2,2,"div",12),e.ALo(17,"async"),e.YNc(18,Ql,2,3,"p-paginator",13),e.YNc(19,Vl,5,3,"ng-template",null,14,e.W1O),e.YNc(21,Rl,2,4,"ng-template",null,15,e.W1O),e.qZA()),2&t){const o=e.MAs(22);e.xp6(7),e.Oqu(e.lcZ(8,10,"KNOWLEDGE_BASE.SUBTITLE")),e.xp6(3),e.Q6J("hideLabel",!0)("label","GLOBAL.SEARCH")("inputId","keyword")("inputType",i.inputType.TEXT)("control",i.getControl("keyword")),e.xp6(3),e.hij(" ",e.lcZ(14,12,"GLOBAL.SEARCH")," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(17,14,i.knowledgeBase$))("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",i.totalItems)}},directives:[r._Y,r.JL,r.F,R.V,f.O5,f.sg,X.UQ,X.US,L.jx,Ae.D,Se.Lv,V.P],pipes:[Z.X$,f.Ov],styles:[".bg-gray[_ngcontent-%COMP%]{background-color:#f7f7f7}.page-header[_ngcontent-%COMP%]{margin:10px 30px;font-size:18px;border-bottom:none;padding-bottom:10px;color:#000!important}  .p-accordion{padding:0 2rem}  .p-accordion p-accordiontab .p-accordion-tab{margin-bottom:1rem}  .p-accordion p-accordiontab .p-accordion-tab .p-accordion-header .p-accordion-header-link{font-weight:normal;border:unset;background:white}  .p-accordion p-accordiontab .p-accordion-tab .p-accordion-header .p-accordion-header-link:focus{outline:none;box-shadow:none}  .p-accordion p-accordiontab .p-accordion-content{padding-inline:45px}.header-break[_ngcontent-%COMP%]{width:95%;margin:1rem auto}.text-break[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:500px}"]}),n})();function Bl(n,s){1&n&&(e.TgZ(0,"p-tabPanel",10),e.ALo(1,"translate"),e._UZ(2,"self-service-knowledge-base"),e.qZA()),2&n&&e.s9C("header",e.lcZ(1,1,"COMMON_QUESTIONS.TITLE"))}function Yl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"self-service-search-box",4),e.NdJ("resetTicketDetails",function(o){return e.CHM(t),e.oxw().resetTicketDetails(o)})("searchTickets",function(o){return e.CHM(t),e.oxw().setSearchCriteria(o)})("updateOtpStatus",function(o){return e.CHM(t),e.oxw().otpStatus(o)}),e.qZA(),e.TgZ(2,"section",5),e.TgZ(3,"div",6),e.TgZ(4,"self-service-ticket-details",7),e.NdJ("toggleSpinner",function(o){return e.CHM(t),e.oxw().toggleSpinner(o)})("resetSearch",function(o){return e.CHM(t),e.oxw().resetSearchbox(o)}),e.qZA(),e.TgZ(5,"div",8),e.TgZ(6,"p-tabView",9),e.TgZ(7,"p-tabPanel",10),e.ALo(8,"translate"),e.TgZ(9,"self-service-contact-form",11),e.NdJ("activeTicketTab",function(o){return e.CHM(t),e.oxw().setActiveTab(o)})("ticketAdded",function(o){return e.CHM(t),e.oxw().setSearchCriteria(o)})("userTickets",function(o){return e.CHM(t),e.oxw().setUserTickets(o)}),e.qZA(),e.qZA(),e.YNc(10,Bl,3,3,"p-tabPanel",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("showLoader",t.showLoader)("searchCriteria",t.searchCriteria)("resetSearch",t.resetSearchBox),e.xp6(3),e.Q6J("tabIndex",t.tabIndex)("searchCriteria",t.searchCriteria)("resetTicket",t.resetTicket)("clientTickets",t.userTickets),e.xp6(2),e.Q6J("styleClass","default-font"),e.xp6(1),e.s9C("header",e.lcZ(8,11,"CONTACT_US.COMMUNICATE")),e.xp6(2),e.Q6J("otpFromSearch",t.otpData),e.xp6(1),e.Q6J("ngIf",t.themeService.KB_Display)}}function Hl(n,s){1&n&&(e.TgZ(0,"div",13),e._UZ(1,"img",14),e.TgZ(2,"h1",15),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"maintenance"),""))}function $l(n,s){1&n&&e._UZ(0,"div",16)}let Oe=(()=>{class n{constructor(t,i,o,l,a,d,u,c){this.themeService=t,this.renderer=i,this.elRef=o,this.otpService=l,this.router=a,this.titleService=d,this.translate=u,this.cacheService=c,this.showLoader=!1,this.userTickets=[],this.resetSearchBox=!1,this.resetTicket=!1,this.tabIndex=0;const m=c.getItem("userData");m&&this.otpService.loggedUser.next(m),(0,Ee.aj)(this.themeService.selfServiceConfigs,this.otpService.loggedUser).subscribe(h=>{var _,v,p,T,x,y;this.selfServiceConfig=h[0],+h[0].LOGIN.SELFSERVICE_LOGIN_ENABLED.value?m||this.router.navigate(["/login"]):this.otpService.loggedUser.next(null),this.titleService.setTitle("ar"===this.translate.currentLang?null===(p=null===(v=null===(_=h[0])||void 0===_?void 0:_.CLIENT_DETAILS)||void 0===v?void 0:v.CLIENT_NAME_AR)||void 0===p?void 0:p.value:null===(y=null===(x=null===(T=h[0])||void 0===T?void 0:T.CLIENT_DETAILS)||void 0===x?void 0:x.CLIENT_NAME)||void 0===y?void 0:y.value)})}ngOnInit(){}ngAfterViewInit(){this.themeService.ChatBot_enabled&&this.loadChatBot()}loadChatBot(){const t=this.themeService.ChatBotScript;let i=document.createElement("script");i.src=t,i.type="text/javascript",i.async=!0,document.getElementById("chatbotDiv").appendChild(i)}toggleSpinner(t){this.showLoader=t}resetSearchbox(t){this.resetSearchBox=t}resetTicketDetails(t){this.resetTicket=t}setSearchCriteria(t){this.searchCriteria=Object.assign({},t)}setUserTickets(t){this.userTickets=t}otpStatus(t){this.otpData=t}setActiveTab(t){this.tabIndex=+t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.f),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(N.j),e.Y36(B.F0),e.Y36(ee.Dx),e.Y36(Z.sK),e.Y36(Y.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-self-service"]],decls:4,vars:3,consts:[["class","self-service-container",4,"ngIf"],["style","text-align: center",4,"ngIf"],["id","chatbotDiv",4,"ngIf"],[1,"self-service-container"],[3,"showLoader","searchCriteria","resetSearch","resetTicketDetails","searchTickets","updateOtpStatus"],[1,"content",2,"margin-top","50px"],[1,"container"],[3,"tabIndex","searchCriteria","resetTicket","clientTickets","toggleSpinner","resetSearch"],[1,"row","mt-3"],["id","self-service-tab",3,"styleClass"],[3,"header"],[3,"otpFromSearch","activeTicketTab","ticketAdded","userTickets"],[3,"header",4,"ngIf"],[2,"text-align","center"],["src","assets/maintenance.jpg","alt","","width","500px",2,"margin","20px auto"],[1,"text-green",2,"text-align","center","margin-bottom","35px"],["id","chatbotDiv"]],template:function(t,i){1&t&&(e.YNc(0,Yl,11,13,"div",0),e.YNc(1,Hl,5,3,"div",1),e._UZ(2,"self-service-footer"),e.YNc(3,$l,1,0,"div",2)),2&t&&(e.Q6J("ngIf",!i.themeService.MAINTENANCE_MODE),e.xp6(1),e.Q6J("ngIf",i.themeService.MAINTENANCE_MODE),e.xp6(2),e.Q6J("ngIf",i.themeService.ChatBot_enabled))},directives:[f.O5,Ve,Vi,xo,W.xf,W.x4,Il,Pl],pipes:[Z.X$],styles:[".self-service-container{width:100%;background-size:cover;background-position:center;border-radius:0 0 25px 25px}.self-service-container self-service-header{width:100%;margin-bottom:30px}.self-service-container .ticket-info .card{border-radius:20px}.self-service-container .ticket-info .card .card-header{display:flex;flex-direction:row;justify-content:space-between;border-radius:20px;border-bottom:1px solid #f4f4f4;background-color:#fff}.self-service-container .ticket-info .card-body{padding:.5rem}.self-service-container .ticket-info .card-body .row.round{padding:.75rem}.self-service-container .ticket-info .card-body .history-info{border-right:1px solid #999;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end}.self-service-container .ticket-info .card-body .history-info .history-info-details{display:grid;grid-template-columns:1fr 3fr;grid-column-gap:.25rem;column-gap:.25rem;grid-template-rows:4}#self-service-tab .p-tabview-nav-container .p-tabview-nav-content ul{border-color:#f4f4f4!important}#self-service-tab .p-tabview-nav-container .p-tabview-nav-content ul li[role=presentation] a{border-top-left-radius:20px;border-top-right-radius:20px;background-color:#f4f4f4;color:#000;border-color:#f4f4f4!important}@media (max-width: 768px){.history-info{border:unset}.content{margin-top:75px}}\n"],encapsulation:2}),n})();const jl=[{path:"",component:Oe,children:[{path:":mobile",component:Oe}]}];var Gl=g(1459);let Kl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[Gl.m,B.Bz.forChild(jl),$t]]}),n})()}}]);